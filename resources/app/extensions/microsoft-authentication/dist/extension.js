/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={20:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthError:()=>z,AuthErrorCodes:()=>n,AuthErrorMessage:()=>B,AzureCloudInstance:()=>Mr,ClientApplication:()=>Zo,ClientAssertion:()=>Yo,ClientAuthError:()=>Ue,ClientAuthErrorCodes:()=>i,ClientAuthErrorMessage:()=>Le,ClientConfigurationError:()=>yt,ClientConfigurationErrorCodes:()=>o,ClientConfigurationErrorMessage:()=>vt,ClientCredentialClient:()=>na,ConfidentialClientApplication:()=>oa,CryptoProvider:()=>Bo,DeviceCodeClient:()=>ta,DistributedCachePlugin:()=>Da,InteractionRequiredAuthError:()=>Pi,InteractionRequiredAuthErrorCodes:()=>s,InteractionRequiredAuthErrorMessage:()=>ki,LogLevel:()=>Rr,Logger:()=>Or,ManagedIdentityApplication:()=>Na,ManagedIdentitySourceNames:()=>Zt,OnBehalfOfClient:()=>ia,PromptValue:()=>w,ProtocolMode:()=>Ve,PublicClientApplication:()=>ra,ResponseMode:()=>I,ServerError:()=>Pr,TokenCache:()=>Wo,TokenCacheContext:()=>Ni,UsernamePasswordClient:()=>Qo,internals:()=>a,version:()=>Bi});var n={};r.r(n),r.d(n,{postRequestFailed:()=>F,unexpectedError:()=>q});var i={};r.r(i),r.d(i,{authTimeNotFound:()=>re,authorizationCodeMissingFromServerResponse:()=>be,bindingKeyNotRemoved:()=>Te,cannotAppendScopeSet:()=>ue,cannotRemoveEmptyScope:()=>ce,clientInfoDecodingError:()=>$,clientInfoEmptyError:()=>V,deviceCodeExpired:()=>he,deviceCodePollingCancelled:()=>de,deviceCodeUnknownError:()=>fe,emptyInputScopeSet:()=>le,endSessionEndpointNotSupported:()=>_e,endpointResolutionError:()=>W,hashNotDeserialized:()=>Q,invalidAssertion:()=>Ie,invalidCacheEnvironment:()=>me,invalidCacheRecord:()=>ge,invalidClientCredential:()=>Ae,invalidState:()=>J,keyIdMissing:()=>ke,maxAgeTranspired:()=>ne,methodNotImplemented:()=>Me,missingTenantIdError:()=>Oe,multipleMatchingAccounts:()=>oe,multipleMatchingAppMetadata:()=>ae,multipleMatchingTokens:()=>ie,nestedAppAuthBridgeDisabled:()=>Ne,networkError:()=>X,noAccountFound:()=>ve,noAccountInSilentRequest:()=>pe,noCryptoObject:()=>ye,noNetworkConnectivity:()=>Pe,nonceMismatch:()=>te,nullOrEmptyToken:()=>G,openIdConfigError:()=>Y,platformBrokerError:()=>De,requestCannotBeMade:()=>se,stateMismatch:()=>Z,stateNotFound:()=>ee,tokenClaimsCnfRequiredForSignedJwt:()=>Ee,tokenParsingError:()=>K,tokenRefreshRequired:()=>Ce,unexpectedCredentialType:()=>we,userCanceled:()=>Re,userTimeoutReached:()=>Se});var o={};r.r(o),r.d(o,{authorityMismatch:()=>ft,authorityUriInsecure:()=>Xe,cannotAllowPlatformBroker:()=>ht,cannotSetOIDCOptions:()=>dt,claimsRequestParsingError:()=>We,emptyInputScopesError:()=>Je,invalidAuthenticationHeader:()=>lt,invalidAuthorityMetadata:()=>ot,invalidAuthorizePostBodyParameters:()=>gt,invalidClaims:()=>Ze,invalidCloudDiscoveryMetadata:()=>it,invalidCodeChallengeMethod:()=>rt,invalidRequestMethodForEAR:()=>pt,logoutRequestEmpty:()=>tt,missingNonceAuthenticationHeader:()=>ut,missingSshJwk:()=>st,missingSshKid:()=>ct,pkceParamsMissing:()=>nt,redirectUriEmpty:()=>Ge,tokenRequestEmpty:()=>et,untrustedAuthority:()=>at,urlEmptyError:()=>Qe,urlParseError:()=>Ye});var a={};r.r(a),r.d(a,{Deserializer:()=>Ht,Serializer:()=>c});var s={};r.r(s),r.d(s,{badToken:()=>Ei,consentRequired:()=>Ci,interactionRequired:()=>Ai,loginRequired:()=>Si,nativeAccountUnavailable:()=>yi,noTokensFound:()=>vi,refreshTokenExpired:()=>wi,uxNotAllowed:()=>Ii});class c{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){const t={};return Object.keys(e).map(function(r){const n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,realm:n.realm,local_account_id:n.localAccountId,username:n.username,authority_type:n.authorityType,name:n.name,client_info:n.clientInfo,last_modification_time:n.lastModificationTime,last_modification_app:n.lastModificationApp,tenantProfiles:n.tenantProfiles?.map(e=>JSON.stringify(e))}}),t}static serializeIdTokens(e){const t={};return Object.keys(e).map(function(r){const n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,credential_type:n.credentialType,client_id:n.clientId,secret:n.secret,realm:n.realm}}),t}static serializeAccessTokens(e){const t={};return Object.keys(e).map(function(r){const n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,credential_type:n.credentialType,client_id:n.clientId,secret:n.secret,realm:n.realm,target:n.target,cached_at:n.cachedAt,expires_on:n.expiresOn,extended_expires_on:n.extendedExpiresOn,refresh_on:n.refreshOn,key_id:n.keyId,token_type:n.tokenType,requestedClaims:n.requestedClaims,requestedClaimsHash:n.requestedClaimsHash,userAssertionHash:n.userAssertionHash}}),t}static serializeRefreshTokens(e){const t={};return Object.keys(e).map(function(r){const n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,credential_type:n.credentialType,client_id:n.clientId,secret:n.secret,family_id:n.familyId,target:n.target,realm:n.realm}}),t}static serializeAppMetadata(e){const t={};return Object.keys(e).map(function(r){const n=e[r];t[r]={client_id:n.clientId,environment:n.environment,family_id:n.familyId}}),t}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}}const u={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},l=[u.OPENID_SCOPE,u.PROFILE_SCOPE,u.OFFLINE_ACCESS_SCOPE],d=[...l,u.EMAIL_SCOPE],h="Content-Type",f="Retry-After",p="X-AnchorMailbox",g="x-ms-request-id",m="x-ms-httpver",v={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},y="access_token",w={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},I={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},A="Generic",C={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},S="appmetadata",E="1",b="authority-metadata",T="config",_="cache",k="network",P="hardcoded_values",R={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},O={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},M="throttling",N="0",D="2",x="3",L="4",U="base64",q="unexpected_error",F="post_request_failed",H={[q]:"Unexpected error in authentication.",[F]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},B={unexpectedError:{code:q,desc:H[q]},postRequestFailed:{code:F,desc:H[F]}};class z extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,z.prototype),this.errorCode=e||u.EMPTY_STRING,this.errorMessage=t||u.EMPTY_STRING,this.subError=r||u.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function j(e,t){return new z(e,t?`${H[e]} ${t}`:H[e])}const $="client_info_decoding_error",V="client_info_empty_error",K="token_parsing_error",G="null_or_empty_token",W="endpoints_resolution_error",X="network_error",Y="openid_config_error",Q="hash_not_deserialized",J="invalid_state",Z="state_mismatch",ee="state_not_found",te="nonce_mismatch",re="auth_time_not_found",ne="max_age_transpired",ie="multiple_matching_tokens",oe="multiple_matching_accounts",ae="multiple_matching_appMetadata",se="request_cannot_be_made",ce="cannot_remove_empty_scope",ue="cannot_append_scopeset",le="empty_input_scopeset",de="device_code_polling_cancelled",he="device_code_expired",fe="device_code_unknown_error",pe="no_account_in_silent_request",ge="invalid_cache_record",me="invalid_cache_environment",ve="no_account_found",ye="no_crypto_object",we="unexpected_credential_type",Ie="invalid_assertion",Ae="invalid_client_credential",Ce="token_refresh_required",Se="user_timeout_reached",Ee="token_claims_cnf_required_for_signedjwt",be="authorization_code_missing_from_server_response",Te="binding_key_not_removed",_e="end_session_endpoint_not_supported",ke="key_id_missing",Pe="no_network_connectivity",Re="user_canceled",Oe="missing_tenant_id_error",Me="method_not_implemented",Ne="nested_app_auth_bridge_disabled",De="platform_broker_error",xe={[$]:"The client info could not be parsed/decoded correctly",[V]:"The client info was empty",[K]:"Token cannot be parsed",[G]:"The token is null or empty",[W]:"Endpoints cannot be resolved",[X]:"Network request failed",[Y]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Q]:"The hash parameters could not be deserialized",[J]:"State was not the expected format",[Z]:"State mismatch error",[ee]:"State not found",[te]:"Nonce mismatch error",[re]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[ne]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[ie]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[oe]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[ae]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[se]:"Token request cannot be made without authorization code or refresh token.",[ce]:"Cannot remove null or empty scope from ScopeSet",[ue]:"Cannot append ScopeSet",[le]:"Empty input ScopeSet cannot be processed",[de]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[he]:"Device code is expired.",[fe]:"Device code stopped polling for unknown reasons.",[pe]:"Please pass an account object, silent flow is not supported without account information",[ge]:"Cache record object was null or undefined.",[me]:"Invalid environment when attempting to create cache entry",[ve]:"No account found in cache for given key.",[ye]:"No crypto object detected.",[we]:"Unexpected credential type.",[Ie]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Ae]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Ce]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Se]:"User defined timeout for device code polling reached",[Ee]:"Cannot generate a POP jwt if the token_claims are not populated",[be]:"Server response does not contain an authorization code to proceed",[Te]:"Could not remove the credential's binding key from storage.",[_e]:"The provided authority does not support logout",[ke]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Pe]:"No network connectivity. Check your internet connection.",[Re]:"User cancelled the flow.",[Oe]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Me]:"This method has not been implemented",[Ne]:"The nested app auth bridge is disabled",[De]:"An error occurred in the native broker. See the platformBrokerError property for details."},Le={clientInfoDecodingError:{code:$,desc:xe[$]},clientInfoEmptyError:{code:V,desc:xe[V]},tokenParsingError:{code:K,desc:xe[K]},nullOrEmptyToken:{code:G,desc:xe[G]},endpointResolutionError:{code:W,desc:xe[W]},networkError:{code:X,desc:xe[X]},unableToGetOpenidConfigError:{code:Y,desc:xe[Y]},hashNotDeserialized:{code:Q,desc:xe[Q]},invalidStateError:{code:J,desc:xe[J]},stateMismatchError:{code:Z,desc:xe[Z]},stateNotFoundError:{code:ee,desc:xe[ee]},nonceMismatchError:{code:te,desc:xe[te]},authTimeNotFoundError:{code:re,desc:xe[re]},maxAgeTranspired:{code:ne,desc:xe[ne]},multipleMatchingTokens:{code:ie,desc:xe[ie]},multipleMatchingAccounts:{code:oe,desc:xe[oe]},multipleMatchingAppMetadata:{code:ae,desc:xe[ae]},tokenRequestCannotBeMade:{code:se,desc:xe[se]},removeEmptyScopeError:{code:ce,desc:xe[ce]},appendScopeSetError:{code:ue,desc:xe[ue]},emptyInputScopeSetError:{code:le,desc:xe[le]},DeviceCodePollingCancelled:{code:de,desc:xe[de]},DeviceCodeExpired:{code:he,desc:xe[he]},DeviceCodeUnknownError:{code:fe,desc:xe[fe]},NoAccountInSilentRequest:{code:pe,desc:xe[pe]},invalidCacheRecord:{code:ge,desc:xe[ge]},invalidCacheEnvironment:{code:me,desc:xe[me]},noAccountFound:{code:ve,desc:xe[ve]},noCryptoObj:{code:ye,desc:xe[ye]},unexpectedCredentialType:{code:we,desc:xe[we]},invalidAssertion:{code:Ie,desc:xe[Ie]},invalidClientCredential:{code:Ae,desc:xe[Ae]},tokenRefreshRequired:{code:Ce,desc:xe[Ce]},userTimeoutReached:{code:Se,desc:xe[Se]},tokenClaimsRequired:{code:Ee,desc:xe[Ee]},noAuthorizationCodeFromServer:{code:be,desc:xe[be]},bindingKeyNotRemovedError:{code:Te,desc:xe[Te]},logoutNotSupported:{code:_e,desc:xe[_e]},keyIdMissing:{code:ke,desc:xe[ke]},noNetworkConnectivity:{code:Pe,desc:xe[Pe]},userCanceledError:{code:Re,desc:xe[Re]},missingTenantIdError:{code:Oe,desc:xe[Oe]},nestedAppAuthBridgeDisabled:{code:Ne,desc:xe[Ne]},platformBrokerError:{code:De,desc:xe[De]}};class Ue extends z{constructor(e,t){super(e,t?`${xe[e]}: ${t}`:xe[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Ue.prototype)}}function qe(e,t){return new Ue(e,t)}function Fe(e,t){if(!e)throw qe(V);try{const r=t(e);return JSON.parse(r)}catch(e){throw qe($)}}function He(e){if(!e)throw qe($);const t=e.split(".",2);return{uid:t[0],utid:t.length<2?u.EMPTY_STRING:t[1]}}function Be(e,t){return!!e&&!!t&&e===t.split(".")[1]}function ze(e,t,r,n){if(n){const{oid:t,sub:r,tid:i,name:o,tfp:a,acr:s,preferred_username:c,upn:u,login_hint:l}=n,d=i||a||s||"";return{tenantId:d,localAccountId:t||r||"",name:o,username:c||u||"",loginHint:l,isHomeTenant:Be(d,e)}}return{tenantId:r,localAccountId:t,username:"",isHomeTenant:Be(r,e)}}function je(e,t,r,n){let i=e;if(t){const{isHomeTenant:r,...n}=t;i={...e,...n}}if(r){const{isHomeTenant:t,...o}=ze(e.homeAccountId,e.localAccountId,e.tenantId,r);return i={...i,...o,idTokenClaims:r,idToken:n},i}return i}function $e(e){return e&&(e.tid||e.tfp||e.acr)||null}const Ve={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};class Ke{static getAccountInfo(e){return{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,loginHint:e.loginHint,name:e.name,nativeAccountId:e.nativeAccountId,authorityType:e.authorityType,tenantProfiles:new Map((e.tenantProfiles||[]).map(e=>[e.tenantId,e])),dataBoundary:e.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){const n=new Ke;let i;1===t.authorityType?n.authorityType="ADFS":t.protocolMode===Ve.OIDC?n.authorityType=A:n.authorityType="MSSTS",e.clientInfo&&r&&(i=Fe(e.clientInfo,r),i.xms_tdbr&&(n.dataBoundary="EU"===i.xms_tdbr?"EU":"None")),n.clientInfo=e.clientInfo,n.homeAccountId=e.homeAccountId,n.nativeAccountId=e.nativeAccountId;const o=e.environment||t&&t.getPreferredCache();if(!o)throw qe(me);n.environment=o,n.realm=i?.utid||$e(e.idTokenClaims)||"",n.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";const a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,s=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(n.username=a||s||"",n.loginHint=e.idTokenClaims?.login_hint,n.name=e.idTokenClaims?.name||"",n.cloudGraphHostName=e.cloudGraphHostName,n.msGraphHost=e.msGraphHost,e.tenantProfiles)n.tenantProfiles=e.tenantProfiles;else{const t=ze(e.homeAccountId,n.localAccountId,n.realm,e.idTokenClaims);n.tenantProfiles=[t]}return n}static createFromAccountInfo(e,t,r){const n=new Ke;return n.authorityType=e.authorityType||A,n.homeAccountId=e.homeAccountId,n.localAccountId=e.localAccountId,n.nativeAccountId=e.nativeAccountId,n.realm=e.tenantId,n.environment=e.environment,n.username=e.username,n.name=e.name,n.loginHint=e.loginHint,n.cloudGraphHostName=t,n.msGraphHost=r,n.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),n.dataBoundary=e.dataBoundary,n}static generateHomeAccountId(e,t,r,n,i){if(1!==t&&2!==t){if(e)try{const t=Fe(e,n.base64Decode);if(t.uid&&t.utid)return`${t.uid}.${t.utid}`}catch(e){}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let n=!0;if(r){const r=e.idTokenClaims||{},i=t.idTokenClaims||{};n=r.iat===i.iat&&r.nonce===i.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&n}}const Ge="redirect_uri_empty",We="claims_request_parsing_error",Xe="authority_uri_insecure",Ye="url_parse_error",Qe="empty_url_error",Je="empty_input_scopes_error",Ze="invalid_claims",et="token_request_empty",tt="logout_request_empty",rt="invalid_code_challenge_method",nt="pkce_params_missing",it="invalid_cloud_discovery_metadata",ot="invalid_authority_metadata",at="untrusted_authority",st="missing_ssh_jwk",ct="missing_ssh_kid",ut="missing_nonce_authentication_header",lt="invalid_authentication_header",dt="cannot_set_OIDCOptions",ht="cannot_allow_platform_broker",ft="authority_mismatch",pt="invalid_request_method_for_EAR",gt="invalid_authorize_post_body_parameters",mt={[Ge]:"A redirect URI is required for all calls, and none has been set.",[We]:"Could not parse the given claims request object.",[Xe]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Ye]:"URL could not be parsed into appropriate segments.",[Qe]:"URL was empty or null.",[Je]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Ze]:"Given claims parameter must be a stringified JSON object.",[et]:"Token request was empty and not found in cache.",[tt]:"The logout request was null or undefined.",[rt]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[nt]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[it]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[ot]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[at]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[st]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[ct]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[ut]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[lt]:"Invalid authentication header provided",[dt]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[ht]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[ft]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[gt]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[pt]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},vt={redirectUriNotSet:{code:Ge,desc:mt[Ge]},claimsRequestParsingError:{code:We,desc:mt[We]},authorityUriInsecure:{code:Xe,desc:mt[Xe]},urlParseError:{code:Ye,desc:mt[Ye]},urlEmptyError:{code:Qe,desc:mt[Qe]},emptyScopesError:{code:Je,desc:mt[Je]},invalidClaimsRequest:{code:Ze,desc:mt[Ze]},tokenRequestEmptyError:{code:et,desc:mt[et]},logoutRequestEmptyError:{code:tt,desc:mt[tt]},invalidCodeChallengeMethod:{code:rt,desc:mt[rt]},invalidCodeChallengeParams:{code:nt,desc:mt[nt]},invalidCloudDiscoveryMetadata:{code:it,desc:mt[it]},invalidAuthorityMetadata:{code:ot,desc:mt[ot]},untrustedAuthority:{code:at,desc:mt[at]},missingSshJwk:{code:st,desc:mt[st]},missingSshKid:{code:ct,desc:mt[ct]},missingNonceAuthenticationHeader:{code:ut,desc:mt[ut]},invalidAuthenticationHeader:{code:lt,desc:mt[lt]},cannotSetOIDCOptions:{code:dt,desc:mt[dt]},cannotAllowPlatformBroker:{code:ht,desc:mt[ht]},authorityMismatch:{code:ft,desc:mt[ft]},invalidAuthorizePostBodyParameters:{code:gt,desc:mt[gt]},invalidRequestMethodForEAR:{code:pt,desc:mt[pt]}};class yt extends z{constructor(e){super(e,mt[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,yt.prototype)}}function wt(e){return new yt(e)}class It{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(e){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),n=e=>decodeURIComponent(e.replace(/\+/g," "));return r.forEach(e=>{if(e.trim()){const[r,i]=e.split(/=(.+)/g,2);r&&i&&(t[n(r)]=n(i))}}),t}static trimArrayEntries(e){return e.map(e=>e.trim())}static removeEmptyStringsFromArray(e){return e.filter(e=>!!e)}static jsonParseHelper(e){try{return JSON.parse(e)}catch(e){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class At{constructor(e){const t=e?It.trimArrayEntries([...e]):[],r=t?It.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw wt(Je);this.scopes=new Set,r.forEach(e=>this.scopes.add(e))}static fromString(e){const t=(e||u.EMPTY_STRING).split(" ");return new At(t)}static createSearchScopes(e){const t=e&&e.length>0?e:[...l],r=new At(t);return r.containsOnlyOIDCScopes()?r.removeScope(u.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new At(t);return!!e&&r.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(e=>this.containsScope(e))}containsOnlyOIDCScopes(){let e=0;return d.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(e=>this.appendScope(e))}catch(e){throw qe(ue)}}removeScope(e){if(!e)throw qe(ce);this.scopes.delete(e.trim())}removeOIDCScopes(){d.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw qe(le);const t=new Set;return e.scopes.forEach(e=>t.add(e.toLowerCase())),this.scopes.forEach(e=>t.add(e.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw qe(le);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),n=this.getScopeCount();return t.size<n+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):u.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Ct(e,t){const r=function(e){if(!e)throw qe(G);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw qe(K);return t[2]}(e);try{const e=t(r);return JSON.parse(e)}catch(e){throw qe(K)}}function St(e,t){if(0===t||Date.now()-3e5>e+t)throw qe(ne)}const Et="@azure/msal-common",bt="15.13.2";function Tt(e){if(!e||e.indexOf("=")<0)return null;try{const t=function(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}(e),r=Object.fromEntries(new URLSearchParams(t));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch(e){throw qe(Q)}return null}function _t(e,t=!0,r){const n=new Array;return e.forEach((e,i)=>{!t&&r&&i in r?n.push(`${i}=${e}`):n.push(`${i}=${encodeURIComponent(e)}`)}),n.join("&")}class kt{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw wt(Qe);e.includes("#")||(this._urlString=kt.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return It.endsWith(t,"?")?t=t.slice(0,-1):It.endsWith(t,"?/")&&(t=t.slice(0,-2)),It.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(e){throw wt(Ye)}if(!e.HostNameAndPort||!e.PathSegments)throw wt(Ye);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw wt(Xe)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return kt.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return!e||0===r.length||r[0]!==v.COMMON&&r[0]!==v.ORGANIZATIONS||(r[0]=e),kt.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw wt(Ye);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let n=r.AbsolutePath.split("/");return n=n.filter(e=>e&&e.length>0),r.PathSegments=n,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw wt(Ye);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===u.FORWARD_SLASH){const r=new kt(t).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new kt(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Tt(e)}}const Pt={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},Rt={metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},Ot=new Set;function Mt(e,t,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),e&&t){const i=Nt(t,e);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}function Nt(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(n.aliases.includes(t))return n}return null}Rt.metadata.forEach(e=>{e.aliases.forEach(e=>{Ot.add(e)})});const Dt="cache_quota_exceeded",xt="cache_error_unknown",Lt={[Dt]:"Exceeded cache storage capacity.",[xt]:"Unexpected error occurred when using cache storage."};class Ut extends z{constructor(e,t){const r=t||(Lt[e]?Lt[e]:Lt[xt]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Ut.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}class qt{constructor(e,t,r,n,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(Et,bt),this.staticAuthorityOptions=i,this.performanceClient=n}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(0===Object.keys(e).length||Object.values(e).every(e=>!e))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,t);return r.length>1?r.sort(e=>e.idTokenClaims?-1:1)[0]:1===r.length?r[0]:null}getBaseAccountInfo(e,t){const r=this.getAccountsFilteredBy(e,t);return r.length>0?Ke.getAccountInfo(r[0]):null}buildTenantProfiles(e,t,r){return e.flatMap(e=>this.getTenantProfilesFromAccountEntity(e,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,n,i){let o,a=null;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;const s=this.getIdToken(e,n,t,r.tenantId);return s&&(o=Ct(s.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,i))?null:(a=je(e,r,o,s?.secret),a)}getTenantProfilesFromAccountEntity(e,t,r,n){const i=Ke.getAccountInfo(e);let o=i.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const e=o.get(r);if(!e)return[];o=new Map([[r,e]])}const s=[];return o.forEach(e=>{const r=this.getTenantedAccountInfoByFilter(i,a,e,t,n);r&&s.push(r)}),s}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||void 0!==t.isHomeTenant&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,r,n){if(!e)throw qe(ge);try{e.account&&await this.setAccount(e.account,t,r),e.idToken&&!1!==n?.idToken&&await this.setIdTokenCredential(e.idToken,t,r),e.accessToken&&!1!==n?.accessToken&&await this.saveAccessToken(e.accessToken,t,r),e.refreshToken&&!1!==n?.refreshToken&&await this.setRefreshTokenCredential(e.refreshToken,t,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(e){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),e instanceof z?e:function(e){return e instanceof Error?"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||e.message.includes("exceeded the quota")?new Ut(Dt):new Ut(e.name,e.message):new Ut(xt)}(e)}}async saveAccessToken(e,t,r){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),o=At.fromString(e.target);i.accessToken.forEach(e=>{if(!this.accessTokenKeyMatchesFilter(e,n,!1))return;const r=this.getAccessTokenCredential(e,t);r&&this.credentialMatchesFilter(r,n)&&At.fromString(r.target).intersectingScopeSets(o)&&this.removeAccessToken(e,t)}),await this.setAccessTokenCredential(e,t,r)}getAccountsFilteredBy(e,t){const r=this.getAccountKeys(),n=[];return r.forEach(r=>{const i=this.getAccount(r,t);if(!i)return;if(e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId))return;if(e.username&&!this.matchUsername(i.username,e.username))return;if(e.environment&&!this.matchEnvironment(i,e.environment))return;if(e.realm&&!this.matchRealm(i,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const o={localAccountId:e?.localAccountId,name:e?.name},a=i.tenantProfiles?.filter(e=>this.tenantProfileMatchesFilter(e,o));a&&0===a.length||n.push(i)}),n}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"==typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===C.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===O.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(t=>{if(!this.isAppMetadata(t))return;const n=this.getAppMetadata(t);n&&(e.environment&&!this.matchEnvironment(n,e.environment)||e.clientId&&!this.matchClientId(n,e.clientId)||(r[t]=n))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const n=this.getAuthorityMetadata(t);n&&-1!==n.aliases.indexOf(e)&&(r=n)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(t=>{this.removeAccount(t,e)})}removeAccount(e,t){this.removeAccountContext(e,t),this.getAccountKeys().filter(t=>t.includes(e.homeAccountId)&&t.includes(e.environment)).forEach(e=>{this.removeItem(e,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){const r=this.getTokenKeys(),n=t=>t.includes(e.homeAccountId)&&t.includes(e.environment);r.idToken.filter(n).forEach(e=>{this.removeIdToken(e,t)}),r.accessToken.filter(n).forEach(e=>{this.removeAccessToken(e,t)}),r.refreshToken.filter(n).forEach(e=>{this.removeRefreshToken(e,t)})}removeAccessToken(e,t){const r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==C.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==O.POP)return;const n=r.keyId;n&&this.cryptoImpl.removeTokenBindingKey(n).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${n}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t,e)}),!0}getIdToken(e,t,r,n,i){this.commonLogger.trace("CacheManager - getIdToken called");const o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:C.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(o,t,r),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let r=a;if(!n){const t=new Map;a.forEach((r,n)=>{r.realm===e.tenantId&&t.set(n,r)});const n=t.size;if(n<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===n)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),t.values().next().value;r=t}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),r.forEach((e,r)=>{this.removeIdToken(r,t)}),i&&t&&i.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){const n=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return n.forEach(r=>{if(!this.idTokenKeyMatchesFilter(r,{clientId:this.clientId,...e}))return;const n=this.getIdTokenCredential(r,t);n&&this.credentialMatchesFilter(n,e)&&i.set(r,n)}),i}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,n){const i=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);const o=At.createSearchScopes(t.scopes),a=t.authenticationScheme||O.BEARER,s=a&&a.toLowerCase()!==O.BEARER.toLowerCase()?C.ACCESS_TOKEN_WITH_AUTH_SCHEME:C.ACCESS_TOKEN,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:s,clientId:this.clientId,realm:n||e.tenantId,target:o,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,l=[];u.forEach(e=>{if(this.accessTokenKeyMatchesFilter(e,c,!0)){const t=this.getAccessTokenCredential(e,i);t&&this.credentialMatchesFilter(t,c)&&l.push(t)}});const d=l.length;return d<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):d>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),l.forEach(e=>{this.removeAccessToken(this.generateCredentialKey(e),i)}),this.performanceClient.addFields({multiMatchedAT:l.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),l[0])}accessTokenKeyMatchesFilter(e,t,r){const n=e.toLowerCase();if(t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===n.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===n.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(r&&!n.includes(e[t].toLowerCase()))return!1;if(!r&&n.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){const r=this.getTokenKeys(),n=[];return r.accessToken.forEach(r=>{if(!this.accessTokenKeyMatchesFilter(r,e,!0))return;const i=this.getAccessTokenCredential(r,t);i&&this.credentialMatchesFilter(i,e)&&n.push(i)}),n}getRefreshToken(e,t,r,n,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const o=t?E:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:C.REFRESH_TOKEN,clientId:this.clientId,familyId:o},s=n&&n.refreshToken||this.getTokenKeys().refreshToken,c=[];s.forEach(e=>{if(this.refreshTokenKeyMatchesFilter(e,a)){const t=this.getRefreshTokenCredential(e,r);t&&this.credentialMatchesFilter(t,a)&&c.push(t)}});const u=c.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&r&&i.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&-1===r.indexOf(t.familyId.toLowerCase())||!t.familyId&&t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),n=Object.keys(r).map(e=>r[e]),i=n.length;if(i<1)return null;if(i>1)throw qe(ae);return n[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==E)}matchHomeAccountId(e,t){return!("string"!=typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return!(t.toLowerCase()!==e.name?.toLowerCase())}matchUsername(e,t){return!(!e||"string"!=typeof e||t?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const r=function(e,t){let r;const n=e.canonicalAuthority;if(n){const i=new kt(n).getUrlComponents().HostNameAndPort;r=Mt(i,e.cloudDiscoveryMetadata?.metadata,T,t)||Mt(i,Rt.metadata,P,t)||e.knownAuthorities}return r||[]}(this.staticAuthorityOptions,this.commonLogger);if(r.includes(t)&&r.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){return!(e.realm?.toLowerCase()!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){return!(e.credentialType!==C.ACCESS_TOKEN&&e.credentialType!==C.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&At.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(S)}isAuthorityMetadata(e){return-1!==e.indexOf(b)}generateAuthorityMetadataCacheKey(e){return`${b}-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class Ft extends qt{async setAccount(){throw qe(Me)}getAccount(){throw qe(Me)}async setIdTokenCredential(){throw qe(Me)}getIdTokenCredential(){throw qe(Me)}async setAccessTokenCredential(){throw qe(Me)}getAccessTokenCredential(){throw qe(Me)}async setRefreshTokenCredential(){throw qe(Me)}getRefreshTokenCredential(){throw qe(Me)}setAppMetadata(){throw qe(Me)}getAppMetadata(){throw qe(Me)}setServerTelemetry(){throw qe(Me)}getServerTelemetry(){throw qe(Me)}setAuthorityMetadata(){throw qe(Me)}getAuthorityMetadata(){throw qe(Me)}getAuthorityMetadataKeys(){throw qe(Me)}setThrottlingCache(){throw qe(Me)}getThrottlingCache(){throw qe(Me)}removeItem(){throw qe(Me)}getKeys(){throw qe(Me)}getAccountKeys(){throw qe(Me)}getTokenKeys(){throw qe(Me)}generateCredentialKey(){throw qe(Me)}generateAccountKey(){throw qe(Me)}}class Ht{static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){const t={};return e&&Object.keys(e).map(function(r){const n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,realm:n.realm,localAccountId:n.local_account_id,username:n.username,authorityType:n.authority_type,name:n.name,clientInfo:n.client_info,lastModificationTime:n.last_modification_time,lastModificationApp:n.last_modification_app,tenantProfiles:n.tenantProfiles?.map(e=>JSON.parse(e)),lastUpdatedAt:Date.now().toString()},o=new Ke;qt.toObject(o,i),t[r]=o}),t}static deserializeIdTokens(e){const t={};return e&&Object.keys(e).map(function(r){const n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,credentialType:n.credential_type,clientId:n.client_id,secret:n.secret,realm:n.realm,lastUpdatedAt:Date.now().toString()};t[r]=i}),t}static deserializeAccessTokens(e){const t={};return e&&Object.keys(e).map(function(r){const n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,credentialType:n.credential_type,clientId:n.client_id,secret:n.secret,realm:n.realm,target:n.target,cachedAt:n.cached_at,expiresOn:n.expires_on,extendedExpiresOn:n.extended_expires_on,refreshOn:n.refresh_on,keyId:n.key_id,tokenType:n.token_type,requestedClaims:n.requestedClaims,requestedClaimsHash:n.requestedClaimsHash,userAssertionHash:n.userAssertionHash,lastUpdatedAt:Date.now().toString()};t[r]=i}),t}static deserializeRefreshTokens(e){const t={};return e&&Object.keys(e).map(function(r){const n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,credentialType:n.credential_type,clientId:n.client_id,secret:n.secret,familyId:n.family_id,target:n.target,realm:n.realm,lastUpdatedAt:Date.now().toString()};t[r]=i}),t}static deserializeAppMetadata(e){const t={};return e&&Object.keys(e).map(function(r){const n=e[r];t[r]={clientId:n.client_id,environment:n.environment,familyId:n.family_id}}),t}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}}const Bt="https://login.microsoftonline.com/managed_identity/",zt="Metadata",jt="secret",$t="api-version",Vt="resource",Kt="AZURE_POD_IDENTITY_AUTHORITY_HOST",Gt="IDENTITY_ENDPOINT",Wt="IDENTITY_HEADER",Xt="IDENTITY_SERVER_THUMBPRINT",Yt="IMDS_ENDPOINT",Qt="MSI_ENDPOINT",Jt="MSI_SECRET",Zt={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},er="system-assigned",tr="user-assigned-client-id",rr="user-assigned-resource-id",nr="user-assigned-object-id",ir="get",or="post",ar=200,sr=299,cr=500,ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",lr="msal.js.node",dr="urn:ietf:params:oauth:client-assertion-type:jwt-bearer",hr="x5c",fr="aud",pr="exp",gr="iss",mr="sub",vr="nbf",yr="jti";class wr{constructor(e,t){this.cacheOutcome=N,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||u.EMPTY_STRING,this.wrapperVer=e.wrapperVer||u.EMPTY_STRING,this.telemetryCacheKey=R.CACHE_KEY+"-"+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${R.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);const n=t.join(R.VALUE_SEPARATOR),i=[e,this.getRegionDiscoveryFields()].join(R.VALUE_SEPARATOR);return[R.SCHEMA_VERSION,i,n].join(R.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=wr.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(R.VALUE_SEPARATOR),n=e.errors.slice(0,t).join(R.VALUE_SEPARATOR),i=e.errors.length,o=[i,t<i?R.OVERFLOW_TRUE:R.OVERFLOW_FALSE].join(R.VALUE_SEPARATOR);return[R.SCHEMA_VERSION,e.cacheHits,r,n,o].join(R.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=R.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof z?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(R.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=wr.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const r={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,n=0;const i=e.errors.length;for(t=0;t<i;t++){const i=e.failedRequests[2*t]||u.EMPTY_STRING,o=e.failedRequests[2*t+1]||u.EMPTY_STRING,a=e.errors[t]||u.EMPTY_STRING;if(n+=i.toString().length+o.toString().length+a.length+3,!(n<R.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||u.EMPTY_STRING),e.push(this.regionSource||u.EMPTY_STRING),e.push(this.regionOutcome||u.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return function(e){const{skus:t,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=e,a=new Map([[0,[r,n]],[2,[i,o]]]);let s=[];if(t?.length){if(s=t.split(","),s.length<4)return t}else s=Array.from({length:4},()=>"|");return a.forEach((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){const{skuArr:t,index:r,skuName:n,skuVersion:i}=e;r>=t.length||(t[r]=[n,i].join("|"))}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})}),s.join(",")}(e)}}const Ir="client_id",Ar="redirect_uri",Cr="token_type",Sr="req_cnf",Er="return_spa_code",br="x-client-xtra-sku",Tr="brk_client_id",_r="brk_redirect_uri",kr="instance_aware";class Pr extends z{constructor(e,t,r,n,i){super(e,t,r),this.name="ServerError",this.errorNo=n,this.status=i,Object.setPrototypeOf(this,Pr.prototype)}}var Rr;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(Rr||(Rr={}));class Or{constructor(e,t,r){this.level=Rr.Info;const n=e||Or.createDefaultLoggerOptions();this.localCallback=n.loggerCallback||(()=>{}),this.piiLoggingEnabled=n.piiLoggingEnabled||!1,this.level="number"==typeof n.logLevel?n.logLevel:Rr.Info,this.correlationId=n.correlationId||u.EMPTY_STRING,this.packageName=t||u.EMPTY_STRING,this.packageVersion=r||u.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Rr.Info}}clone(e,t,r){return new Or({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const r=`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${Rr[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,r,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:Rr.Error,containsPii:!1,correlationId:t||u.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Rr.Error,containsPii:!0,correlationId:t||u.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Rr.Warning,containsPii:!1,correlationId:t||u.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Rr.Warning,containsPii:!0,correlationId:t||u.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Rr.Info,containsPii:!1,correlationId:t||u.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Rr.Info,containsPii:!0,correlationId:t||u.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Rr.Verbose,containsPii:!1,correlationId:t||u.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Rr.Verbose,containsPii:!0,correlationId:t||u.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Rr.Trace,containsPii:!1,correlationId:t||u.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Rr.Trace,containsPii:!0,correlationId:t||u.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const Mr={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"},Nr="networkClientSendPostRequestAsync",Dr="refreshTokenClientExecutePostToTokenEndpoint",xr="authorizationCodeClientExecutePostToTokenEndpoint",Lr="refreshTokenClientExecuteTokenRequest",Ur="refreshTokenClientAcquireToken",qr="refreshTokenClientAcquireTokenWithCachedRefreshToken",Fr="refreshTokenClientAcquireTokenByRefreshToken",Hr="refreshTokenClientCreateTokenRequestBody",Br="silentFlowClientAcquireCachedToken",zr="silentFlowClientGenerateResultFromCacheRecord",jr="updateTokenEndpointAuthority",$r="authClientAcquireToken",Vr="authClientExecuteTokenRequest",Kr="authClientCreateTokenRequestBody",Gr="popTokenGenerateCnf",Wr="popTokenGenerateKid",Xr="handleServerTokenResponse",Yr="authorityFactoryCreateDiscoveredInstance",Qr="authorityResolveEndpointsAsync",Jr="authorityGetCloudDiscoveryMetadataFromNetwork",Zr="authorityUpdateCloudDiscoveryMetadata",en="authorityGetEndpointMetadataFromNetwork",tn="authorityUpdateEndpointMetadata",rn="authorityUpdateMetadataWithRegionalInformation",nn="regionDiscoveryDetectRegion",on="regionDiscoveryGetRegionFromIMDS",an="regionDiscoveryGetCurrentVersion",sn="cacheManagerGetRefreshToken",cn=(new Map([["acquireTokenByCode","ATByCode"],["acquireTokenByRefreshToken","ATByRT"],["acquireTokenSilent","ATS"],["acquireTokenSilentAsync","ATSAsync"],["acquireTokenPopup","ATPopup"],["acquireTokenRedirect","ATRedirect"],["cryptoOptsGetPublicKeyThumbprint","CryptoGetPKThumb"],["cryptoOptsSignJwt","CryptoSignJwt"],["silentCacheClientAcquireToken","SltCacheClientAT"],["silentIframeClientAcquireToken","SltIframeClientAT"],["silentRefreshClientAcquireToken","SltRClientAT"],["ssoSilent","SsoSlt"],["standardInteractionClientGetDiscoveredAuthority","StdIntClientGetDiscAuth"],["fetchAccountIdWithNativeBroker","FetchAccIdWithNtvBroker"],["nativeInteractionClientAcquireToken","NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[Nr,"NetClientSendPost"],[Dr,"RTClientExecPost"],[xr,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[Lr,"RTClientExecTReq"],[Ur,"RTClientAT"],[qr,"RTClientATWithCachedRT"],[Fr,"RTClientATByRT"],[Hr,"RTClientCreateTReqBody"],["acquireTokenFromCache","ATFromCache"],[Br,"SltFlowClientATCached"],[zr,"SltFlowClientGenResFromCache"],["acquireTokenBySilentIframe","ATBySltIframe"],["initializeBaseRequest","InitBaseReq"],["initializeSilentRequest","InitSltReq"],["initializeClientApplication","InitClientApplication"],["initializeCache","InitCache"],["importExistingCache","importCache"],["setUserData","setUserData"],["localStorageUpdated","localStorageUpdated"],["silentIframeClientTokenHelper","SIClientTHelper"],["silentHandlerInitiateAuthRequest","SHandlerInitAuthReq"],["silentHandlerMonitorIframeForHash","SltHandlerMonitorIframeForHash"],["silentHandlerLoadFrame","SHandlerLoadFrame"],["silentHandlerLoadFrameSync","SHandlerLoadFrameSync"],["standardInteractionClientCreateAuthCodeClient","StdIntClientCreateAuthCodeClient"],["standardInteractionClientGetClientConfiguration","StdIntClientGetClientConf"],["standardInteractionClientInitializeAuthorizationRequest","StdIntClientInitAuthReq"],["getAuthCodeUrl","GetAuthCodeUrl"],["handleCodeResponseFromServer","HandleCodeResFromServer"],["handleCodeResponse","HandleCodeResp"],["handleResponseEar","HandleRespEar"],["handleResponseCode","HandleRespCode"],["handleResponsePlatformBroker","HandleRespPlatBroker"],[jr,"UpdTEndpointAuth"],[$r,"AuthClientAT"],[Vr,"AuthClientExecTReq"],[Kr,"AuthClientCreateTReqBody"],[Gr,"PopTGenCnf"],[Wr,"PopTGenKid"],[Xr,"HandleServerTRes"],["deserializeResponse","DeserializeRes"],[Yr,"AuthFactCreateDiscInst"],[Qr,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[Jr,"AuthGetCDMetaFromNet"],[Zr,"AuthUpdCDMeta"],[en,"AuthUpdCDMetaFromNet"],[tn,"AuthUpdEndpointMeta"],[rn,"AuthUpdMetaWithRegInfo"],[nn,"RegDiscDetectReg"],[on,"RegDiscGetRegFromIMDS"],[an,"RegDiscGetCurrentVer"],["acquireTokenByCodeAsync","ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],["handleRedirectPromise","HandleRedirectPromise"],["handleNativeRedirectPromise","HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],["nativeMessageHandlerHandshake","NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],["removeHiddenIframe","RemoveHiddenIframe"],["clearTokensAndKeysWithClaims","ClearTAndKeysWithClaims"],[sn,"CacheManagerGetRT"],["generatePkceCodes","GenPkceCodes"],["generateCodeVerifier","GenCodeVerifier"],["generateCodeChallengeFromVerifier","GenCodeChallengeFromVerifier"],["sha256Digest","Sha256Digest"],["getRandomValues","GetRandomValues"],["generateHKDF","genHKDF"],["generateBaseKey","genBaseKey"],["base64Decode","b64Decode"],["urlEncodeArr","urlEncArr"],["encrypt","encrypt"],["decrypt","decrypt"],["generateEarKey","genEarKey"],["decryptEarResponse","decryptEarResp"]]),1),un=(new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount","oldAccountCount","oldAccessCount","oldIdCount","oldRefreshCount","currAccountCount","currAccessCount","currIdCount","currRefreshCount","expiredCacheRemovedCount","upgradedCacheCount"]),(e,t,r,n,i)=>(...o)=>{r.trace(`Executing function ${t}`);const a=n?.startMeasurement(t,i);if(i){const e=t+"CallCount";n?.incrementFields({[e]:1},i)}return n?.setPreQueueTime(t,i),e(...o).then(e=>(r.trace(`Returning result from ${t}`),a?.end({success:!0}),e)).catch(e=>{r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(e))}catch(e){r.trace("Unable to print error message.")}throw a?.end({success:!1},e),e})});class ln{constructor(e,t,r,n){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=n}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(nn,this.correlationId);let r=e;if(r)t.region_source="3";else{const e=ln.IMDS_OPTIONS;try{const n=await un(this.getRegionFromIMDS.bind(this),on,this.logger,this.performanceClient,this.correlationId)(u.IMDS_VERSION,e);if(200===n.status&&(r=n.body,t.region_source="4"),400===n.status){const n=await un(this.getCurrentVersion.bind(this),an,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source="1",null;const i=await un(this.getRegionFromIMDS.bind(this),on,this.logger,this.performanceClient,this.correlationId)(n,e);200===i.status&&(r=i.body,t.region_source="4")}}catch(e){return t.region_source="1",null}}return r||(t.region_source="1"),r||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(on,this.correlationId),this.networkInterface.sendGetRequestAsync(`${u.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,u.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(an,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync(`${u.IMDS_ENDPOINT}?format=json`,e);return 400===t.status&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(e){return null}}}function dn(){return Math.round((new Date).getTime()/1e3)}function hn(e){return e?new Date(1e3*Number(e)):new Date}function fn(e,t){const r=Number(e)||0;return dn()+t>r}function pn(e,t){return new Promise(r=>setTimeout(()=>r(t),e))}function gn(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function mn(e){return!!e&&gn(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===C.ACCESS_TOKEN||e.credentialType===C.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function vn(e){return!!e&&gn(e)&&e.hasOwnProperty("realm")&&e.credentialType===C.ID_TOKEN}function yn(e){return!!e&&gn(e)&&e.credentialType===C.REFRESH_TOKEN}function wn(e,t){return!!t&&0===e.indexOf(S)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment")}function In(){return dn()+86400}function An(e,t,r){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=r,e.jwks_uri=t.jwks_uri}function Cn(e,t,r){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=r}function Sn(e){return e.expiresAt<=dn()}ln.IMDS_OPTIONS={headers:{Metadata:"true"}};class En{constructor(e,t,r,n,i,o,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=n,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=o,this.managedIdentity=s||!1,this.regionDiscovery=new ln(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(u.CIAM_AUTH_URL))return 3;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case u.ADFS:return 1;case u.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new kt(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw qe(W)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw qe(W)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw qe(W)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw qe(_e);return this.replacePath(this.metadata.end_session_endpoint)}throw qe(W)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw qe(W)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw qe(W)}canReplaceTenant(e){return 1===e.PathSegments.length&&!En.reservedTenantDomains.has(e.PathSegments[0])&&0===this.getAuthorityType(e)&&this.protocolMode!==Ve.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const r=new kt(this.metadata.canonical_authority).getUrlComponents(),n=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((e,i)=>{let o=n[i];if(0===i&&this.canReplaceTenant(r)){const e=new kt(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];o!==e&&(this.logger.verbose(`Replacing tenant domain name ${o} with id ${e}`),o=e)}e!==o&&(t=t.replace(`/${o}/`,`/${e}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||this.protocolMode===Ve.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Qr,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await un(this.updateCloudDiscoveryMetadata.bind(this),Zr,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await un(this.updateEndpointMetadata.bind(this),tn,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:In(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==_&&r?.source!==_&&(e.expiresAt=In(),e.canonical_authority=this.canonicalAuthority);const n=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(n,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(tn,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t)return t.source===P&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata&&(An(e,await un(this.updateMetadataWithRegionalInformation.bind(this),rn,this.logger,this.performanceClient,this.correlationId)(t.metadata),!1),e.canonical_authority=this.canonicalAuthority),t.source;let r=await un(this.getEndpointMetadataFromNetwork.bind(this),en,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await un(this.updateMetadataWithRegionalInformation.bind(this),rn,this.logger,this.performanceClient,this.correlationId)(r)),An(e,r,!0),k;throw qe(Y,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),An(e,t,!1),{source:T};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return An(e,t,!1),{source:P,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=Sn(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:_}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new kt(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw wt(ot)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(en,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const r=await this.networkInterface.sendGetRequestAsync(t,e),n=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(r.body);return n?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(e){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${e}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Pt?Pt[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(rn,this.correlationId);const t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==u.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome="2",this.regionDiscoveryMetadata.region_used=t,En.replaceWithRegionalInformation(e,t);const r=await un(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),nn,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome="4",this.regionDiscoveryMetadata.region_used=r,En.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome="5"}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Zr,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const r=await un(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Jr,this.logger,this.performanceClient,this.correlationId)();if(r)return Cn(e,r,!0),k;throw wt(at)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||u.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||u.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||u.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Cn(e,t,!1),T;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(r=this.hostnameAndPort,Nt(Rt.metadata,r));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Cn(e,t,!1),P;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var r;const n=Sn(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),_):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),En.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=Nt(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),wt(it)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),En.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Jr,this.correlationId);const e=`${u.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let r=null;try{const n=await this.networkInterface.sendGetRequestAsync(e,t);let i,o;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(n.body))i=n.body,o=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(n.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${n.status}`),i=n.body,i.error===u.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Nt(o,this.hostnameAndPort)}catch(e){if(e instanceof z)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${e.errorCode}\nError Description: ${e.errorMessage}`);else{const t=e;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${t.name}\nError Description: ${t.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=En.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&kt.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==Mr.None){const e=t.tenant?t.tenant:u.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${e}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return u.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw qe(W)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Ot.has(e)}static isPublicCloudAuthority(e){return u.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const n=new kt(e);n.validateAsUri();const i=n.getUrlComponents();let o=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(o=`${t}.${u.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=kt.constructAuthorityUriFromObject({...n.getUrlComponents(),HostNameAndPort:o}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=En.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=En.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=En.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const r=new kt(e).getUrlComponents();return 0===r.PathSegments.length&&r.HostNameAndPort.endsWith(u.CIAM_AUTH_URL)&&(t=`${t}${r.HostNameAndPort.split(".")[0]}${u.AAD_TENANT_DOMAIN_SUFFIX}`),t}}function bn(e){return e.endsWith(u.FORWARD_SLASH)?e:`${e}${u.FORWARD_SLASH}`}En.reservedTenantDomains=new Set(["{tenant}","{tenantid}",v.COMMON,v.CONSUMERS,v.ORGANIZATIONS]);const Tn={createNewGuid:()=>{throw qe(Me)},base64Decode:()=>{throw qe(Me)},base64Encode:()=>{throw qe(Me)},base64UrlEncode:()=>{throw qe(Me)},encodeKid:()=>{throw qe(Me)},async getPublicKeyThumbprint(){throw qe(Me)},async removeTokenBindingKey(){throw qe(Me)},async clearKeystore(){throw qe(Me)},async signJwt(){throw qe(Me)},async hashString(){throw qe(Me)}};class _n{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class kn{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:cn,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new _n}}startPerformanceMeasurement(){return new _n}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const Pn={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},Rn={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Rr.Info,correlationId:u.EMPTY_STRING},On={claimsBasedCachingEnabled:!1},Mn={async sendGetRequestAsync(){throw qe(Me)},async sendPostRequestAsync(){throw qe(Me)}},Nn={sku:u.SKU,version:bt,cpu:u.EMPTY_STRING,os:u.EMPTY_STRING},Dn={clientSecret:u.EMPTY_STRING,clientAssertion:void 0},xn={azureCloudInstance:Mr.None,tenant:`${u.DEFAULT_COMMON_TENANT}`},Ln={application:{appName:"",appVersion:""}};function Un(e){return e.authOptions.authority.options.protocolMode===Ve.OIDC}const qn="home_account_id",Fn="UPN";function Hn(e,t,r){if(!t)return;const n=e.get(Ir);n&&e.has(Tr)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:e.get(Ar)},t)}function Bn(e,t){e.set("response_type",t)}function zn(e,t,r=!0,n=l){!r||n.includes("openid")||t.includes("openid")||n.push("openid");const i=r?[...t||[],...n]:t||[],o=new At(i);e.set("scope",o.printScopes())}function jn(e,t){e.set(Ir,t)}function $n(e,t){e.set(Ar,t)}function Vn(e,t){e.set("login_hint",t)}function Kn(e,t){e.set(p,`UPN:${t}`)}function Gn(e,t){e.set(p,`Oid:${t.uid}@${t.utid}`)}function Wn(e,t){e.set("sid",t)}function Xn(e,t,r){const n=function(e,t){let r;if(e)try{r=JSON.parse(e)}catch(e){throw wt(Ze)}else r={};return t&&t.length>0&&(r.hasOwnProperty(y)||(r[y]={}),r[y].xms_cc={values:t}),JSON.stringify(r)}(t,r);try{JSON.parse(n)}catch(e){throw wt(Ze)}e.set("claims",n)}function Yn(e,t){e.set("client-request-id",t)}function Qn(e,t){e.set("x-client-SKU",t.sku),e.set("x-client-VER",t.version),t.os&&e.set("x-client-OS",t.os),t.cpu&&e.set("x-client-CPU",t.cpu)}function Jn(e,t){t?.appName&&e.set("x-app-name",t.appName),t?.appVersion&&e.set("x-app-ver",t.appVersion)}function Zn(e,t){t&&e.set("state",t)}function ei(e,t){e.set("client_secret",t)}function ti(e,t){t&&e.set("client_assertion",t)}function ri(e,t){t&&e.set("client_assertion_type",t)}function ni(e,t){e.set("grant_type",t)}function ii(e){e.set("client_info","1")}function oi(e){e.has(kr)||e.set(kr,"true")}function ai(e,t){Object.entries(t).forEach(([t,r])=>{!e.has(t)&&r&&e.set(t,r)})}function si(e,t){t&&(e.set(Cr,O.POP),e.set(Sr,t))}function ci(e,t){t&&(e.set(Cr,O.SSH),e.set(Sr,t))}function ui(e,t){e.set("x-client-current-telemetry",t.generateCurrentRequestHeaderValue()),e.set("x-client-last-telemetry",t.generateLastRequestHeaderValue())}function li(e){e.set("x-ms-lib-capability","retry-after, h429")}function di(e,t,r){e.has(Tr)||e.set(Tr,t),e.has(_r)||e.set(_r,r)}async function hi(e,t,r,n,i,o,a){a?.addQueueMeasurement(Yr,o);const s=En.transformCIAMAuthority(bn(e)),c=new En(s,t,r,n,i,o,a);try{return await un(c.resolveEndpointsAsync.bind(c),Qr,i,a,o)(),c}catch(e){throw qe(W)}}function fi(e,t,r){return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:r,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||t.tokenBodyParameters?.clientId}}class pi{static generateThrottlingStorageKey(e){return`${M}.${JSON.stringify(e)}`}static preProcess(e,t,r){const n=pi.generateThrottlingStorageKey(t),i=e.getThrottlingCache(n);if(i){if(i.throttleTime<Date.now())return void e.removeItem(n,r);throw new Pr(i.errorCodes?.join(" ")||u.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,r,n){if(pi.checkResponseStatus(r)||pi.checkResponseForRetryAfter(r)){const i={throttleTime:pi.calculateThrottleTime(parseInt(r.headers[f])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(pi.generateThrottlingStorageKey(t),i,n)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty(f)&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(t||60),r+3600))}static removeThrottle(e,t,r,n){const i=fi(t,r,n),o=this.generateThrottlingStorageKey(i);e.removeItem(o,r.correlationId)}}class gi extends z{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,gi.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}class mi{constructor(e,t){this.config=function({authOptions:e,systemOptions:t,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:a,clientCredentials:s,libraryInfo:c,telemetry:u,serverTelemetryManager:l,persistencePlugin:d,serializableCache:h}){const f={...Rn,...r};return{authOptions:(p=e,{clientCapabilities:[],azureCloudOptions:xn,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...p}),systemOptions:{...Pn,...t},loggerOptions:f,cacheOptions:{...On,...n},storageInterface:i||new Ft(e.clientId,Tn,new Or(f),new kn),networkInterface:o||Mn,cryptoInterface:a||Tn,clientCredentials:s||Dn,libraryInfo:{...Nn,...c},telemetry:{...Ln,...u},serverTelemetryManager:l||null,persistencePlugin:d||null,serializableCache:h||null};var p}(e),this.logger=new Or(this.config.loggerOptions,Et,bt),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[h]=u.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case qn:try{const r=He(e.credential);t[p]=`Oid:${r.uid}@${r.utid}`}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Fn:t[p]=`UPN: ${e.credential}`}return t}async executePostToTokenEndpoint(e,t,r,n,i,o){o&&this.performanceClient?.addQueueMeasurement(o,i);const a=await this.sendPostRequest(n,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&429!==a.status&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,t,r,n){let i;pi.preProcess(this.cacheManager,e,n);try{i=await un(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Nr,this.logger,this.performanceClient,n)(t,r);const e=i.headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:e[m]||"",requestId:e[g]||""},n)}catch(e){if(e instanceof gi){const t=e.responseHeaders;throw t&&this.performanceClient?.addFields({httpVerToken:t[m]||"",requestId:t[g]||"",contentTypeHeader:t[h]||void 0,contentLengthHeader:t["Content-Length"]||void 0,httpStatus:e.httpStatus},n),e.error}throw e instanceof z?e:qe(X)}return pi.postProcess(this.cacheManager,e,i,n),i}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(jr,t);const r=`https://${e}/${this.authority.tenant}/`,n=await hi(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=n}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&di(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&ai(t,e.tokenQueryParameters),Yn(t,e.correlationId),Hn(t,e.correlationId,this.performanceClient),_t(t)}}const vi="no_tokens_found",yi="native_account_unavailable",wi="refresh_token_expired",Ii="ux_not_allowed",Ai="interaction_required",Ci="consent_required",Si="login_required",Ei="bad_token",bi=[Ai,Ci,Si,Ei,Ii],Ti=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],_i={[vi]:"No refresh token found in the cache. Please sign-in.",[yi]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[wi]:"Refresh token has expired.",[Ei]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Ii]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},ki={noTokensFoundError:{code:vi,desc:_i[vi]},native_account_unavailable:{code:yi,desc:_i[yi]},bad_token:{code:Ei,desc:_i[Ei]}};class Pi extends z{constructor(e,t,r,n,i,o,a,s){super(e,t,r),Object.setPrototypeOf(this,Pi.prototype),this.timestamp=n||u.EMPTY_STRING,this.traceId=i||u.EMPTY_STRING,this.correlationId=o||u.EMPTY_STRING,this.claims=a||u.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=s}}function Ri(e){return new Pi(e,_i[e])}class Oi{static setRequestState(e,t,r){const n=Oi.generateLibraryState(e,r);return t?`${n}${u.RESOURCE_DELIM}${t}`:n}static generateLibraryState(e,t){if(!e)throw qe(ye);const r={id:e.createNewGuid()};t&&(r.meta=t);const n=JSON.stringify(r);return e.base64Encode(n)}static parseRequestState(e,t){if(!e)throw qe(ye);if(!t)throw qe(J);try{const r=t.split(u.RESOURCE_DELIM),n=r[0],i=r.length>1?r.slice(1).join(u.RESOURCE_DELIM):u.EMPTY_STRING,o=e.base64Decode(n),a=JSON.parse(o);return{userRequestState:i||u.EMPTY_STRING,libraryState:a}}catch(e){throw qe(J)}}}class Mi{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(Gr,e.correlationId);const r=await un(this.generateKid.bind(this),Gr,t,this.performanceClient,e.correlationId)(e),n=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:n}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Wr,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,n){const{resourceRequestMethod:i,resourceRequestUri:o,shrClaims:a,shrNonce:s,shrOptions:c}=r,u=o?new kt(o):void 0,l=u?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:dn(),m:i?.toUpperCase(),u:l?.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:l?.AbsolutePath,q:l?.QueryString?[[],l.QueryString]:void 0,client_claims:a||void 0,...n},t,c,r.correlationId)}}class Ni{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Di{constructor(e,t,r,n,i,o,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=n,this.serializableCache=i,this.persistencePlugin=o,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const r=`Error(s): ${e.error_codes||u.NOT_AVAILABLE} - Timestamp: ${e.timestamp||u.NOT_AVAILABLE} - Description: ${e.error_description||u.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||u.NOT_AVAILABLE} - Trace ID: ${e.trace_id||u.NOT_AVAILABLE}`,n=e.error_codes?.length?e.error_codes[0]:void 0,i=new Pr(e.error,r,e.suberror,n,e.status);if(t&&e.status&&e.status>=500&&e.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${i}`);if(t&&e.status&&e.status>=400&&e.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${i}`);if(function(e,t,r){const n=!!e&&bi.indexOf(e)>-1,i=!!r&&Ti.indexOf(r)>-1,o=!!t&&bi.some(e=>t.indexOf(e)>-1);return n||o||i}(e.error,e.error_description,e.suberror))throw new Pi(e.error,e.error_description,e.suberror,e.timestamp||u.EMPTY_STRING,e.trace_id||u.EMPTY_STRING,e.correlation_id||u.EMPTY_STRING,e.claims||u.EMPTY_STRING,n);throw i}}async handleServerTokenResponse(e,t,r,n,i,o,a,s,c){let l,d;if(this.performanceClient?.addQueueMeasurement(Xr,e.correlation_id),e.id_token){if(l=Ct(e.id_token||u.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&l.nonce!==i.nonce)throw qe(te);if(n.maxAge||0===n.maxAge){const e=l.auth_time;if(!e)throw qe(re);St(e,n.maxAge)}}this.homeAccountIdentifier=Ke.generateHomeAccountId(e.client_info||u.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,l),i&&i.state&&(d=Oi.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||n.sshKid||void 0;const h=this.generateCacheRecord(e,t,r,n,l,o,i);let f;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),f=new Ni(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(f)),a&&!s&&h.account){const e=this.cacheStorage.generateAccountKey(Ke.getAccountInfo(h.account));if(!this.cacheStorage.getAccount(e,n.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Di.generateAuthenticationResult(this.cryptoObj,t,h,!1,n,l,d,void 0,c)}await this.cacheStorage.saveCacheRecord(h,n.correlationId,function(e){if(!e.signin_state)return!1;const t=["kmsi","dvc_dmjd"];return e.signin_state.some(e=>t.includes(e.trim().toLowerCase()))}(l||{}),n.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&f&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(f))}return Di.generateAuthenticationResult(this.cryptoObj,t,h,!1,n,l,d,e,c)}generateCacheRecord(e,t,r,n,i,o,a){const s=t.getPreferredCache();if(!s)throw qe(me);const c=$e(i);let u,l;var d,h,f,p,g;e.id_token&&i&&(d=this.homeAccountIdentifier,h=s,f=e.id_token,p=this.clientId,g=c||"",u={credentialType:C.ID_TOKEN,homeAccountId:d,environment:h,clientId:p,secret:f,realm:g,lastUpdatedAt:Date.now().toString()},l=function(e,t,r,n,i,o,a,s,c,u,l,d){d?.verbose("setCachedAccount called");const h=e.getAccountKeys().find(e=>e.startsWith(r));let f=null;h&&(f=e.getAccount(h,i));const p=f||Ke.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:a,environment:s,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:void 0},t,n),g=p.tenantProfiles||[],m=c||p.realm;if(m&&!g.find(e=>e.tenantId===m)){const e=ze(r,p.localAccountId,m,o);g.push(e)}return p.tenantProfiles=g,p}(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,n.correlationId,i,e.client_info,s,c,a,0,this.logger));let m=null;if(e.access_token){const i=e.scope?At.fromString(e.scope):new At(n.scopes||[]),a=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,u=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,l=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,d=r+a,h=d+u,f=l&&l>0?r+l:void 0;m=function(e,t,r,n,i,o,a,s,c,u,l,d,h,f,p){const g={homeAccountId:e,credentialType:C.ACCESS_TOKEN,secret:r,cachedAt:dn().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:n,realm:i,target:o,tokenType:l||O.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(g.userAssertionHash=d),u&&(g.refreshOn=u.toString()),f&&(g.requestedClaims=f,g.requestedClaimsHash=p),g.tokenType?.toLowerCase()!==O.BEARER.toLowerCase())switch(g.credentialType=C.ACCESS_TOKEN_WITH_AUTH_SCHEME,g.tokenType){case O.POP:const e=Ct(r,c);if(!e?.cnf?.kid)throw qe(Ee);g.keyId=e.cnf.kid;break;case O.SSH:g.keyId=h}return g}(this.homeAccountIdentifier,s,e.access_token,this.clientId,c||t.tenant||"",i.printScopes(),d,h,this.cryptoObj.base64Decode,f,e.token_type,o,e.key_id,n.claims,n.requestedClaimsHash)}let v=null;if(e.refresh_token){let t;e.refresh_token_expires_in&&(t=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),v=function(e,t,r,n,i,o,a){const s={credentialType:C.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:n,secret:r,lastUpdatedAt:Date.now().toString()};return o&&(s.userAssertionHash=o),i&&(s.familyId=i),a&&(s.expiresOn=a.toString()),s}(this.homeAccountIdentifier,s,e.refresh_token,this.clientId,e.foci,o,t)}let y=null;return e.foci&&(y={clientId:this.clientId,environment:s,familyId:e.foci}),{account:l,idToken:u,accessToken:m,refreshToken:v,appMetadata:y}}static async generateAuthenticationResult(e,t,r,n,i,o,a,s,c){let l,d,h=u.EMPTY_STRING,f=[],p=null,g=u.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==O.POP||i.popKid)h=r.accessToken.secret;else{const t=new Mi(e),{secret:n,keyId:o}=r.accessToken;if(!o)throw qe(ke);h=await t.signPopToken(n,o,i)}f=At.fromString(r.accessToken.target).asArray(),p=hn(r.accessToken.expiresOn),l=hn(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(d=hn(r.accessToken.refreshOn))}r.appMetadata&&(g=r.appMetadata.familyId===E?E:"");const m=o?.oid||o?.sub||"",v=o?.tid||"";s?.spa_accountid&&r.account&&(r.account.nativeAccountId=s?.spa_accountid);const y=r.account?je(Ke.getAccountInfo(r.account),void 0,o,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:m,tenantId:v,scopes:f,account:y,idToken:r?.idToken?.secret||"",idTokenClaims:o||{},accessToken:h,fromCache:n,expiresOn:p,extExpiresOn:l,refreshOn:d,correlationId:i.correlationId,requestId:c||u.EMPTY_STRING,familyId:g,tokenType:r.accessToken?.tokenType||u.EMPTY_STRING,state:a?a.userRequestState:u.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||u.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||u.EMPTY_STRING,code:s?.spa_code,fromNativeBroker:!1}}}async function xi(e,t,r){return"string"==typeof e?e:e({clientId:t,tokenEndpoint:r})}class Li extends mi{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement($r,e.correlationId),!e.code)throw qe(se);const r=dn(),n=await un(this.executeTokenRequest.bind(this),Vr,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=n.headers?.[g],o=new Di(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(n.body),un(o.handleServerTokenResponse.bind(o),Xr,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,t,void 0,void 0,void 0,i)}getLogoutUri(e){if(!e)throw wt(tt);const t=this.createLogoutUrlQueryString(e);return kt.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(Vr,t.correlationId);const r=this.createTokenQueryParameters(t),n=kt.appendQueryString(e.tokenEndpoint,r),i=await un(this.createTokenRequestBody.bind(this),Kr,this.logger,this.performanceClient,t.correlationId)(t);let o;if(t.clientInfo)try{const e=Fe(t.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${e.uid}.${e.utid}`,type:qn}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}const a=this.createTokenRequestHeaders(o||t.ccsCredential),s=fi(this.config.authOptions.clientId,t);return un(this.executePostToTokenEndpoint.bind(this),xr,this.logger,this.performanceClient,t.correlationId)(n,i,a,s,t.correlationId,xr)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Kr,e.correlationId);const t=new Map;if(jn(t,e.embeddedClientId||e.tokenBodyParameters?.[Ir]||this.config.authOptions.clientId),this.includeRedirectUri)$n(t,e.redirectUri);else if(!e.redirectUri)throw wt(Ge);if(zn(t,e.scopes,!0,this.oidcDefaultScopes),function(e,t){e.set("code",t)}(t,e.code),Qn(t,this.config.libraryInfo),Jn(t,this.config.telemetry.application),li(t),this.serverTelemetryManager&&!Un(this.config)&&ui(t,this.serverTelemetryManager),e.codeVerifier&&function(e,t){e.set("code_verifier",t)}(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&ei(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;ti(t,await xi(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ri(t,r.assertionType)}if(ni(t,"authorization_code"),ii(t),e.authenticationScheme===O.POP){const r=new Mi(this.cryptoUtils,this.performanceClient);let n;n=e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await un(r.generateCnf.bind(r),Gr,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,si(t,n)}else if(e.authenticationScheme===O.SSH){if(!e.sshJwk)throw wt(st);ci(t,e.sshJwk)}let r;if((!It.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xn(t,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=Fe(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${t.uid}.${t.utid}`,type:qn}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case qn:try{Gn(t,He(r.credential))}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Fn:Kn(t,r.credential)}return e.embeddedClientId&&di(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&ai(t,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[Er]||ai(t,{[Er]:"1"}),Hn(t,e.correlationId,this.performanceClient),_t(t)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&function(e,t){e.set("post_logout_redirect_uri",t)}(t,e.postLogoutRedirectUri),e.correlationId&&Yn(t,e.correlationId),e.idTokenHint&&function(e,t){e.set("id_token_hint",t)}(t,e.idTokenHint),e.state&&Zn(t,e.state),e.logoutHint&&function(e,t){e.set("logout_hint",t)}(t,e.logoutHint),e.extraQueryParameters&&ai(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&oi(t),_t(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}class Ui extends mi{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Ur,e.correlationId);const t=dn(),r=await un(this.executeTokenRequest.bind(this),Lr,this.logger,this.performanceClient,e.correlationId)(e,this.authority),n=r.headers?.[g],i=new Di(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),un(i.handleServerTokenResponse.bind(i),Xr,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,n)}async acquireTokenByRefreshToken(e){if(!e)throw wt(et);if(this.performanceClient?.addQueueMeasurement(Fr,e.correlationId),!e.account)throw qe(pe);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await un(this.acquireTokenWithCachedRefreshToken.bind(this),qr,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(t){const r=t instanceof Pi&&t.errorCode===vi,n=t instanceof Pr&&"invalid_grant"===t.errorCode&&"client_mismatch"===t.subError;if(r||n)return un(this.acquireTokenWithCachedRefreshToken.bind(this),qr,this.logger,this.performanceClient,e.correlationId)(e,!1);throw t}return un(this.acquireTokenWithCachedRefreshToken.bind(this),qr,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(qr,e.correlationId);const r=(n=this.cacheManager.getRefreshToken.bind(this.cacheManager),i=sn,o=this.logger,a=this.performanceClient,s=e.correlationId,(...e)=>{o.trace(`Executing function ${i}`);const t=a?.startMeasurement(i,s);if(s){const e=i+"CallCount";a?.incrementFields({[e]:1},s)}try{const r=n(...e);return t?.end({success:!0}),o.trace(`Returning result from ${i}`),r}catch(e){o.trace(`Error occurred in ${i}`);try{o.trace(JSON.stringify(e))}catch(e){o.trace("Unable to print error message.")}throw t?.end({success:!1},e),e}})(e.account,t,e.correlationId,void 0,this.performanceClient);var n,i,o,a,s;if(!r)throw Ri(vi);if(r.expiresOn&&fn(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Ri(wi);const c={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||O.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:qn}};try{return await un(this.acquireToken.bind(this),Ur,this.logger,this.performanceClient,e.correlationId)(c)}catch(t){if(t instanceof Pi&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),t.subError===Ei)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const t=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(t,e.correlationId)}throw t}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(Lr,e.correlationId);const r=this.createTokenQueryParameters(e),n=kt.appendQueryString(t.tokenEndpoint,r),i=await un(this.createTokenRequestBody.bind(this),Hr,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a=fi(this.config.authOptions.clientId,e);return un(this.executePostToTokenEndpoint.bind(this),Dr,this.logger,this.performanceClient,e.correlationId)(n,i,o,a,e.correlationId,Dr)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Hr,e.correlationId);const t=new Map;if(jn(t,e.embeddedClientId||e.tokenBodyParameters?.[Ir]||this.config.authOptions.clientId),e.redirectUri&&$n(t,e.redirectUri),zn(t,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),ni(t,"refresh_token"),ii(t),Qn(t,this.config.libraryInfo),Jn(t,this.config.telemetry.application),li(t),this.serverTelemetryManager&&!Un(this.config)&&ui(t,this.serverTelemetryManager),function(e,t){e.set("refresh_token",t)}(t,e.refreshToken),this.config.clientCredentials.clientSecret&&ei(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;ti(t,await xi(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ri(t,r.assertionType)}if(e.authenticationScheme===O.POP){const r=new Mi(this.cryptoUtils,this.performanceClient);let n;n=e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await un(r.generateCnf.bind(r),Gr,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,si(t,n)}else if(e.authenticationScheme===O.SSH){if(!e.sshJwk)throw wt(st);ci(t,e.sshJwk)}if((!It.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xn(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case qn:try{Gn(t,He(e.ccsCredential.credential))}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Fn:Kn(t,e.ccsCredential.credential)}return e.embeddedClientId&&di(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&ai(t,e.tokenBodyParameters),Hn(t,e.correlationId,this.performanceClient),_t(t)}}class qi extends mi{constructor(e,t){super(e,t)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Br,e.correlationId);let t=N;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!It.isEmptyObj(e.claims))throw this.setCacheOutcome("1",e.correlationId),qe(Ce);if(!e.account)throw qe(pe);const r=e.account.tenantId||function(e){const t=new kt(e).getUrlComponents(),r=t.PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case v.COMMON:case v.ORGANIZATIONS:case v.CONSUMERS:return;default:return r}}(e.authority),n=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,n,r);if(!i)throw this.setCacheOutcome(D,e.correlationId),qe(Ce);if(o=i.cachedAt,Number(o)>dn()||fn(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(x,e.correlationId),qe(Ce);var o;i.refreshOn&&fn(i.refreshOn,0)&&(t=L);const a=e.authority||this.authority.getPreferredCache(),s={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,n,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await un(this.generateResultFromCacheRecord.bind(this),zr,this.logger,this.performanceClient,e.correlationId)(s,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==N&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){let r;if(this.performanceClient?.addQueueMeasurement(zr,t.correlationId),e.idToken&&(r=Ct(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){const e=r?.auth_time;if(!e)throw qe(re);St(e,t.maxAge)}return Di.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}class Fi{static getNetworkResponse(e,t,r){return{headers:e,body:t,status:r}}static urlToHttpOptions(e){const t={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return""!==e.port&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),t}}const Hi="@azure/msal-node",Bi="3.8.3",zi=require("http");var ji=r(5692);class $i{constructor(e,t,r){this.networkRequestViaProxy=(e,t,r,n)=>{const i=new URL(t),o=new URL(this.proxyUrl),a=r?.headers||{},s={host:o.hostname,port:o.port,method:"CONNECT",path:i.hostname,headers:a};this.customAgentOptions&&Object.keys(this.customAgentOptions).length&&(s.agent=new zi.Agent(this.customAgentOptions));let c="";if(e===or){const e=r?.body||"";c=`Content-Type: application/x-www-form-urlencoded\r\nContent-Length: ${e.length}\r\n\r\n${e}`}else n&&(s.timeout=n);const u=`${e.toUpperCase()} ${i.href} HTTP/1.1\r\nHost: ${i.host}\r\nConnection: close\r\n`+c+"\r\n";return new Promise((r,i)=>{const o=zi.request(s);n&&o.on("timeout",()=>{this.logUrlWithPiiAwareness(`Request timeout after ${n}ms for URL`,t),o.destroy(),i(new Error(`Request time out after ${n}ms`))}),o.end(),o.on("connect",(e,t)=>{const n=e?.statusCode||cr;(n<ar||n>sr)&&(o.destroy(),t.destroy(),i(new Error(`Error connecting to proxy. Http status code: ${e.statusCode}. Http status message: ${e?.statusMessage||"Unknown"}`))),t.write(u);const a=[];t.on("data",e=>{a.push(e)}),t.on("end",()=>{const e=Buffer.concat([...a]).toString().split("\r\n"),t=parseInt(e[0].split(" ")[1]),n=e[0].split(" ").slice(2).join(" "),i=e[e.length-1],s=e.slice(1,e.length-2),c=new Map;s.forEach(e=>{const t=e.split(new RegExp(/:\s(.*)/s)),r=t[0];let n=t[1];try{const e=JSON.parse(n);e&&"object"==typeof e&&(n=e)}catch(e){}c.set(r,n)});const u=Object.fromEntries(c),l=Fi.getNetworkResponse(u,this.parseBody(t,n,u,i),t);this.shouldDestroyRequest(t,l)&&o.destroy(),r(l)}),t.on("error",e=>{o.destroy(),t.destroy(),i(new Error(e.toString()))})}),o.on("error",r=>{this.logger.error(`HttpClient - Proxy request error: ${r.toString()}`,""),this.logUrlWithPiiAwareness("Destination URL",t),this.logUrlWithPiiAwareness("Proxy URL",this.proxyUrl),this.logger.error(`HttpClient - Method: ${e}`,""),this.logger.errorPii(`HttpClient - Headers: ${JSON.stringify(a)}`,""),o.destroy(),i(new Error(r.toString()))})})},this.networkRequestViaHttps=(e,t,r,n)=>{const i=e===or,o=r?.body||"",a=new URL(t),s=r?.headers||{},c={method:e,headers:s,...Fi.urlToHttpOptions(a)};return this.customAgentOptions&&Object.keys(this.customAgentOptions).length&&(c.agent=new ji.Agent(this.customAgentOptions)),i?c.headers={...c.headers,"Content-Length":o.length}:n&&(c.timeout=n),new Promise((r,a)=>{let u;u="http:"===c.protocol?zi.request(c):ji.request(c),i&&u.write(o),n&&u.on("timeout",()=>{this.logUrlWithPiiAwareness(`HTTPS request timeout after ${n}ms for URL`,t),u.destroy(),a(new Error(`Request time out after ${n}ms`))}),u.end(),u.on("response",e=>{const t=e.headers,n=e.statusCode,i=e.statusMessage,o=[];e.on("data",e=>{o.push(e)}),e.on("end",()=>{const e=Buffer.concat([...o]).toString(),a=t,s=Fi.getNetworkResponse(a,this.parseBody(n,i,a,e),n);this.shouldDestroyRequest(n,s)&&u.destroy(),r(s)})}),u.on("error",r=>{this.logger.error(`HttpClient - HTTPS request error: ${r.toString()}`,""),this.logUrlWithPiiAwareness("URL",t),this.logger.error(`HttpClient - Method: ${e}`,""),this.logger.errorPii(`HttpClient - Headers: ${JSON.stringify(s)}`,""),u.destroy(),a(new Error(r.toString()))})})},this.parseBody=(e,t,r,n)=>{let i;try{i=JSON.parse(n)}catch(n){let o,a;e>=400&&e<=499?(o="client_error",a="A client"):e>=500&&e<=599?(o="server_error",a="A server"):(o="unknown_error",a="An unknown"),i={error:o,error_description:`${a} error occured.\nHttp status code: ${e}\nHttp status message: ${t||"Unknown"}\nHeaders: ${JSON.stringify(r)}`}}return i},this.logUrlWithPiiAwareness=(e,t)=>{if(this.isPiiEnabled)this.logger.errorPii(`HttpClient - ${e}: ${t}`,"");else{let r;try{const e=new URL(t);r=`${e.protocol}//${e.host}${e.pathname}`}catch{r=t.split("?")[0]||"unknown"}this.logger.error(`HttpClient - ${e}: ${r} [Enable PII logging to see additional details]`,"")}},this.shouldDestroyRequest=(e,t)=>(e<200||e>299)&&!(t.body&&"object"==typeof t.body&&"error"in t.body&&"authorization_pending"===t.body.error),this.proxyUrl=e||"",this.customAgentOptions=t||{},this.logger=new Or(r||{},Hi,Bi),this.isPiiEnabled=this.logger.isPiiLoggingEnabled()}async sendGetRequestAsync(e,t,r){return this.proxyUrl?this.networkRequestViaProxy(ir,e,t,r):this.networkRequestViaHttps(ir,e,t,r)}async sendPostRequestAsync(e,t){return this.proxyUrl?this.networkRequestViaProxy(or,e,t):this.networkRequestViaHttps(or,e,t)}}const Vi="invalid_file_extension",Ki="invalid_file_path",Gi="invalid_managed_identity_id_type",Wi="invalid_secret",Xi="missing_client_id",Yi="network_unavailable",Qi="platform_not_supported",Ji="unable_to_create_azure_arc",Zi="unable_to_create_cloud_shell",eo="unable_to_create_source",to="unable_to_read_secret_file",ro="user_assigned_not_available_at_runtime",no="www_authenticate_header_missing",io="www_authenticate_header_unsupported_format",oo={[Kt]:"azure_pod_identity_authority_host_url_malformed",[Gt]:"identity_endpoint_url_malformed",[Yt]:"imds_endpoint_url_malformed",[Qt]:"msi_endpoint_url_malformed"},ao={[Vi]:"The file path in the WWW-Authenticate header does not contain a .key file.",[Ki]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[Gi]:"More than one ManagedIdentityIdType was provided.",[Wi]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[Qi]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[Xi]:"A ManagedIdentityId id was not provided.",[oo.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${Kt}' environment variable is malformed.`,[oo.IDENTITY_ENDPOINT]:`The Managed Identity's '${Gt}' environment variable is malformed.`,[oo.IMDS_ENDPOINT]:`The Managed Identity's '${Yt}' environment variable is malformed.`,[oo.MSI_ENDPOINT]:`The Managed Identity's '${Qt}' environment variable is malformed.`,[Yi]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[Ji]:"Azure Arc Managed Identities can only be system assigned.",[Zi]:"Cloud Shell Managed Identities can only be system assigned.",[eo]:"Unable to create a Managed Identity source based on environment variables.",[to]:"Unable to read the secret file.",[ro]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[no]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[io]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."};class so extends z{constructor(e){super(e,ao[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,so.prototype)}}function co(e){return new so(e)}class uo{get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){const t=e?.userAssignedClientId,r=e?.userAssignedResourceId,n=e?.userAssignedObjectId;if(t){if(r||n)throw co(Gi);this.id=t,this.idType=tr}else if(r){if(t||n)throw co(Gi);this.id=r,this.idType=rr}else if(n){if(t||r)throw co(Gi);this.id=n,this.idType=nr}else this.id="system_assigned_managed_identity",this.idType=er}}const lo="invalid_loopback_server_address_type",ho="Loopback server address is not type string. This is unexpected.",fo="unable_to_load_redirectUrl",po="Loopback server callback was invoked without a url. This is unexpected.",go="no_auth_code_in_response",mo="No auth code found in the server response. Please check your network trace to determine what happened.",vo="no_loopback_server_exists",yo="No loopback server exists yet.",wo="loopback_server_already_exists",Io="Loopback server already exists. Cannot create another.",Ao="loopback_server_timeout",Co="Timed out waiting for auth code listener to be registered.",So="state_not_found",Eo="State not found. Please verify that the request originated from msal.",bo="thumbprint_missing_from_client_certificate",To="Client certificate does not contain a SHA-1 or SHA-256 thumbprint.",_o="redirect_uri_not_supported",ko="RedirectUri is not supported in this scenario. Please remove redirectUri from the request.";class Po extends z{constructor(e,t){super(e,t),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new Po(lo,`${ho}`)}static createUnableToLoadRedirectUrlError(){return new Po(fo,`${po}`)}static createNoAuthCodeInResponseError(){return new Po(go,`${mo}`)}static createNoLoopbackServerExistsError(){return new Po(vo,`${yo}`)}static createLoopbackServerAlreadyExistsError(){return new Po(wo,`${Io}`)}static createLoopbackServerTimeoutError(){return new Po(Ao,`${Co}`)}static createStateNotFoundError(){return new Po(So,Eo)}static createThumbprintMissingError(){return new Po(bo,To)}static createRedirectUriNotSupportedError(){return new Po(_o,ko)}}const Ro={clientId:u.EMPTY_STRING,authority:u.DEFAULT_AUTHORITY,clientSecret:u.EMPTY_STRING,clientAssertion:u.EMPTY_STRING,clientCertificate:{thumbprint:u.EMPTY_STRING,thumbprintSha256:u.EMPTY_STRING,privateKey:u.EMPTY_STRING,x5c:u.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:u.EMPTY_STRING,authorityMetadata:u.EMPTY_STRING,clientCapabilities:[],protocolMode:Ve.AAD,azureCloudOptions:{azureCloudInstance:Mr.None,tenant:u.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},Oo={claimsBasedCachingEnabled:!1},Mo={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Rr.Info},No={loggerOptions:Mo,networkClient:new $i,proxyUrl:u.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},Do={application:{appName:u.EMPTY_STRING,appVersion:u.EMPTY_STRING}};var xo=r(2107);class Lo{generateGuid(){return(0,xo.v4)()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}class Uo{static base64Encode(e,t){return Buffer.from(e,t).toString(U)}static base64EncodeUrl(e,t){return Uo.base64Encode(e,t).replace(/=/g,u.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,U).toString("utf8")}static base64DecodeUrl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return Uo.base64Decode(t)}}var qo=r(6982);class Fo{sha256(e){return qo.createHash("sha256").update(e).digest()}}class Ho{constructor(){this.hashUtils=new Fo}async generatePkceCodes(){const e=this.generateCodeVerifier();return{verifier:e,challenge:this.generateCodeChallengeFromVerifier(e)}}generateCodeVerifier(){const e=[];for(;e.length<=32;){const t=qo.randomBytes(1)[0];if(t>=198)continue;const r=t%66;e.push(ur[r])}const t=e.join(u.EMPTY_STRING);return Uo.base64EncodeUrl(t)}generateCodeChallengeFromVerifier(e){return Uo.base64EncodeUrl(this.hashUtils.sha256(e).toString(U),U)}}class Bo{constructor(){this.pkceGenerator=new Ho,this.guidGenerator=new Lo,this.hashUtils=new Fo}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return Uo.base64Encode(e)}base64Decode(e){return Uo.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return Uo.base64EncodeUrl(this.hashUtils.sha256(e).toString(U),U)}}class zo extends qt{constructor(e,t,r,n){super(t,r,e,new kn,n),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){const t={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(const r in e){const n=e[r];if("object"==typeof n)if(n instanceof Ke)t.accounts[r]=n;else if(vn(n))t.idTokens[r]=n;else if(mn(n))t.accessTokens[r]=n;else if(yn(n))t.refreshTokens[r]=n;else{if(!wn(r,n))continue;t.appMetadata[r]=n}}return t}inMemoryCacheToCache(e){let t=this.getCache();return t={...t,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},t}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");const t=this.inMemoryCacheToCache(e);this.setCache(t),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,t){this.logger.tracePii(`Item key: ${e}`);const r=this.getCache();r[e]=t,this.setCache(r)}generateCredentialKey(e){return function(e){const t=e.credentialType===C.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==O.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join("-").toLowerCase()}(e)}generateAccountKey(e){return function(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment,t||e.tenantId||""].join("-").toLowerCase()}(e)}getAccountKeys(){const e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){const e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new Ke,this.getItem(e)):null}async setAccount(e){const t=this.generateAccountKey(Ke.getAccountInfo(e));this.setItem(t,e)}getIdTokenCredential(e){const t=this.getItem(e);return vn(t)?t:null}async setIdTokenCredential(e){const t=this.generateCredentialKey(e);this.setItem(t,e)}getAccessTokenCredential(e){const t=this.getItem(e);return mn(t)?t:null}async setAccessTokenCredential(e){const t=this.generateCredentialKey(e);this.setItem(t,e)}getRefreshTokenCredential(e){const t=this.getItem(e);return yn(t)?t:null}async setRefreshTokenCredential(e){const t=this.generateCredentialKey(e);this.setItem(t,e)}getAppMetadata(e){const t=this.getItem(e);return wn(e,t)?t:null}setAppMetadata(e){const t=function({environment:e,clientId:t}){return[S,e,t].join("-").toLowerCase()}(e);this.setItem(t,e)}getServerTelemetry(e){const t=this.getItem(e);return t&&function(e,t){const r=0===e.indexOf(R.CACHE_KEY);let n=!0;return t&&(n=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),r&&n}(e,t)?t:null}setServerTelemetry(e,t){this.setItem(e,t)}getAuthorityMetadata(e){const t=this.getItem(e);return t&&function(e,t){return!!t&&0===e.indexOf(b)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,t)?t:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,t){this.setItem(e,t)}getThrottlingCache(e){const t=this.getItem(e);return t&&function(e,t){let r=!1;e&&(r=0===e.indexOf(M));let n=!0;return t&&(n=t.hasOwnProperty("throttleTime")),r&&n}(e,t)?t:null}setThrottlingCache(e,t){this.setItem(e,t)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let t=!1;const r=this.getCache();return r[e]&&(delete r[e],t=!0),t&&(this.setCache(r),this.emitChange()),t}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");const e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(e=>{this.removeItem(e)}),this.emitChange()}static generateInMemoryCache(e){return Ht.deserializeAllCache(Ht.deserializeJSONBlob(e))}static generateJsonCache(e){return c.serializeAllCache(e)}updateCredentialCacheKey(e,t){const r=this.generateCredentialKey(t);if(e!==r){const n=this.getItem(e);if(n)return this.removeItem(e),this.setItem(r,n),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),r;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}}const jo={},$o={},Vo={},Ko={},Go={};class Wo{constructor(e,t,r){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),r&&(this.persistence=r),this.logger=t}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=c.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");const e=Ht.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(e)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){const e=zo.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=(new Bo).createNewGuid()){let t;this.logger.trace("getAllAccounts called");try{return this.persistence&&(t=new Ni(this,!1),await this.persistence.beforeCacheAccess(t)),this.storage.getAllAccounts({},e)}finally{this.persistence&&t&&await this.persistence.afterCacheAccess(t)}}async getAccountByHomeId(e){const t=await this.getAllAccounts();return e&&t&&t.length&&t.filter(t=>t.homeAccountId===e)[0]||null}async getAccountByLocalId(e){const t=await this.getAllAccounts();return e&&t&&t.length&&t.filter(t=>t.localAccountId===e)[0]||null}async removeAccount(e,t){let r;this.logger.trace("removeAccount called");try{this.persistence&&(r=new Ni(this,!0),await this.persistence.beforeCacheAccess(r)),this.storage.removeAccount(e,t||(new Lo).generateGuid())}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async overwriteCache(){if(!this.persistence)return void this.logger.info("No persistence layer specified, cache cannot be overwritten");this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();const e=new Ni(this,!1);await this.persistence.beforeCacheAccess(e);const t=this.getCacheSnapshot();this.storage.setCache(t),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,t){this.logger.trace("Merging in-memory cache with cache snapshot");const r=this.mergeRemovals(e,t);return this.mergeUpdates(r,t)}mergeUpdates(e,t){return Object.keys(t).forEach(r=>{const n=t[r];if(e.hasOwnProperty(r)){const t=null!==n,i="object"==typeof n,o=!Array.isArray(n),a=void 0!==e[r]&&null!==e[r];t&&i&&o&&a?this.mergeUpdates(e[r],n):e[r]=n}else null!==n&&(e[r]=n)}),e}mergeRemovals(e,t){this.logger.trace("Remove updated entries in cache");const r=e.Account?this.mergeRemovalsDict(e.Account,t.Account):e.Account,n=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,t.AccessToken):e.AccessToken,i=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,t.RefreshToken):e.RefreshToken,o=e.IdToken?this.mergeRemovalsDict(e.IdToken,t.IdToken):e.IdToken,a=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,t.AppMetadata):e.AppMetadata;return{...e,Account:r,AccessToken:n,RefreshToken:i,IdToken:o,AppMetadata:a}}mergeRemovalsDict(e,t){const r={...e};return Object.keys(e).forEach(e=>{t&&t.hasOwnProperty(e)||delete r[e]}),r}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...jo,...e.Account},IdToken:{...$o,...e.IdToken},AccessToken:{...Vo,...e.AccessToken},RefreshToken:{...Ko,...e.RefreshToken},AppMetadata:{...Go,...e.AppMetadata}}}}var Xo=r(4040);class Yo{static fromAssertion(e){const t=new Yo;return t.jwt=e,t}static fromCertificate(e,t,r){const n=new Yo;return n.privateKey=t,n.thumbprint=e,n.useSha256=!1,r&&(n.publicCertificate=this.parseCertificate(r)),n}static fromCertificateWithSha256Thumbprint(e,t,r){const n=new Yo;return n.privateKey=t,n.thumbprint=e,n.useSha256=!0,r&&(n.publicCertificate=this.parseCertificate(r)),n}getJwt(e,t,r){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&t===this.issuer&&r===this.jwtAudience?this.jwt:this.createJwt(e,t,r);if(this.jwt)return this.jwt;throw qe(Ie)}createJwt(e,t,r){this.issuer=t,this.jwtAudience=r;const n=dn();this.expirationTime=n+600;const i={alg:this.useSha256?"PS256":"RS256"},o=this.useSha256?"x5t#S256":"x5t";Object.assign(i,{[o]:Uo.base64EncodeUrl(this.thumbprint,"hex")}),this.publicCertificate&&Object.assign(i,{[hr]:this.publicCertificate});const a={[fr]:this.jwtAudience,[pr]:this.expirationTime,[gr]:this.issuer,[mr]:this.issuer,[vr]:n,[yr]:e.createNewGuid()};return this.jwt=Xo.sign(a,this.privateKey,{header:i}),this.jwt}isExpired(){return this.expirationTime<dn()}static parseCertificate(e){const t=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,r=[];let n;for(;null!==(n=t.exec(e));)r.push(n[1].replace(/\r*\n/g,u.EMPTY_STRING));return r}}class Qo extends mi{constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");const t=dn(),r=await this.executeTokenRequest(this.authority,e),n=new Di(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return n.validateTokenResponse(r.body),n.handleServerTokenResponse(r.body,this.authority,t,e)}async executeTokenRequest(e,t){const r=this.createTokenQueryParameters(t),n=kt.appendQueryString(e.tokenEndpoint,r),i=await this.createTokenRequestBody(t),o=this.createTokenRequestHeaders({credential:t.username,type:Fn}),a={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return this.executePostToTokenEndpoint(n,i,o,a,t.correlationId)}async createTokenRequestBody(e){const t=new Map;jn(t,this.config.authOptions.clientId),function(e,t){e.set("username",t)}(t,e.username),function(e,t){e.set("password",t)}(t,e.password),zn(t,e.scopes),Bn(t,"id_token token"),ni(t,"password"),ii(t),Qn(t,this.config.libraryInfo),Jn(t,this.config.telemetry.application),li(t),this.serverTelemetryManager&&ui(t,this.serverTelemetryManager),Yn(t,e.correlationId||this.config.cryptoInterface.createNewGuid()),this.config.clientCredentials.clientSecret&&ei(t,this.config.clientCredentials.clientSecret);const r=this.config.clientCredentials.clientAssertion;return r&&(ti(t,await xi(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ri(t,r.assertionType)),(!It.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xn(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&Kn(t,e.username),_t(t)}}function Jo(e,t,r,n){const i=function(e,t,r,n){const i=t.correlationId,o=new Map;if(jn(o,t.embeddedClientId||t.extraQueryParameters?.[Ir]||e.clientId),zn(o,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,e.authority.options.OIDCOptions?.defaultScopes),$n(o,t.redirectUri),Yn(o,i),function(e,t){e.set("response_mode",t||I.QUERY)}(o,t.responseMode),ii(o),t.prompt&&(function(e,t){e.set("prompt",t)}(o,t.prompt),n?.addFields({prompt:t.prompt},i)),t.domainHint&&(function(e,t){e.set("domain_hint",t)}(o,t.domainHint),n?.addFields({domainHintFromRequest:!0},i)),t.prompt!==w.SELECT_ACCOUNT)if(t.sid&&t.prompt===w.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Wn(o,t.sid),n?.addFields({sidFromRequest:!0},i);else if(t.account){const e=(a=t.account,a.idTokenClaims?.sid||null);let s=function(e){return e.loginHint||e.idTokenClaims?.login_hint||null}(t.account);if(s&&t.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),s=null),s){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Vn(o,s),n?.addFields({loginHintFromClaim:!0},i);try{Gn(o,He(t.account.homeAccountId))}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===w.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Wn(o,e),n?.addFields({sidFromClaim:!0},i);try{Gn(o,He(t.account.homeAccountId))}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Vn(o,t.loginHint),Kn(o,t.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(t.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Vn(o,t.account.username),n?.addFields({loginHintFromUpn:!0},i);try{Gn(o,He(t.account.homeAccountId))}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Vn(o,t.loginHint),Kn(o,t.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");var a;return t.nonce&&function(e,t){e.set("nonce",t)}(o,t.nonce),t.state&&Zn(o,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&Xn(o,t.claims,e.clientCapabilities),t.embeddedClientId&&di(o,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(kr)||oi(o),o}({...e.auth,authority:t,redirectUri:r.redirectUri||""},r,n);return Qn(i,{sku:lr,version:Bi,cpu:process.arch||"",os:process.platform||""}),e.auth.protocolMode!==Ve.OIDC&&Jn(i,e.telemetry.application),Bn(i,"code"),r.codeChallenge&&r.codeChallengeMethod&&function(e,t,r){if(!t||!r)throw wt(nt);e.set("code_challenge",t),e.set("code_challenge_method",r)}(i,r.codeChallenge,r.codeChallengeMethod),ai(i,r.extraQueryParameters||{}),function(e,t,r,n){const i=_t(t,r,n);return kt.appendQueryString(e.authorizationEndpoint,i)}(t,i,e.auth.encodeExtraQueryParams,r.extraQueryParameters)}class Zo{constructor(e){this.config=function({auth:e,broker:t,cache:r,system:n,telemetry:i}){const o={...No,networkClient:new $i(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||Mo,disableInternalRetries:n?.disableInternalRetries||!1};if(e.clientCertificate&&!e.clientCertificate.thumbprint&&!e.clientCertificate.thumbprintSha256)throw Po.createStateNotFoundError();return{auth:{...Ro,...e},broker:{...t},cache:{...Oo,...r},system:{...o,...n},telemetry:{...Do,...i}}}(e),this.cryptoProvider=new Bo,this.logger=new Or(this.config.system.loggerOptions,Hi,Bi),this.storage=new zo(this.logger,this.config.auth.clientId,this.cryptoProvider,function(e){const t=e.cloudDiscoveryMetadata;let r;if(t)try{r=JSON.parse(t)}catch(e){throw wt(it)}return{canonicalAuthority:e.authority?bn(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:r}}(this.config.auth)),this.tokenCache=new Wo(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||I.QUERY,authenticationScheme:O.BEARER,state:e.state||"",nonce:e.nonce||""},r=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions);return Jo(this.config,r,t,this.logger)}async acquireTokenByCode(e,t){this.logger.info("acquireTokenByCode called"),e.state&&t&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,t.state||""),t={...t,state:""});const r={...e,...await this.initializeBaseRequest(e),authenticationScheme:O.BEARER},n=this.initializeServerTelemetryManager(871,r.correlationId);try{const i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri,n),a=new Li(o);return this.logger.verbose("Auth code client created",r.correlationId),await a.acquireToken(r,t)}catch(e){throw e instanceof z&&e.setCorrelationId(r.correlationId),n.cacheFailedRequest(e),e}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e),authenticationScheme:O.BEARER},r=this.initializeServerTelemetryManager(872,t.correlationId);try{const n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,t.correlationId,t.redirectUri||"",r),o=new Ui(i);return this.logger.verbose("Refresh token client created",t.correlationId),await o.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}async acquireTokenSilent(e){const t={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},r=this.initializeServerTelemetryManager(62,t.correlationId,t.forceRefresh);try{const n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,t.correlationId,t.redirectUri||"",r),o=new qi(i);this.logger.verbose("Silent flow client created",t.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(t,o,i)}catch(e){if(e instanceof Ue&&e.errorCode===Ce)return new Ui(i).acquireTokenByRefreshToken(t);throw e}}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}async acquireCachedTokenSilent(e,t,r){const[n,i]=await t.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...l]});if(i===L){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");const t=new Ui(r);try{await t.acquireTokenByRefreshToken(e)}catch{}}return n}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e)},r=this.initializeServerTelemetryManager(371,t.correlationId);try{const n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,t.correlationId,"",r),o=new Qo(i);return this.logger.verbose("Username password client created",t.correlationId),await o.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,t){if(!e)throw Po.createStateNotFoundError();if(e!==t)throw qe(Z)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,t,r,n){return this.logger.verbose("buildOauthClientConfiguration called",t),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,t),n?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:r},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:t},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:lr,version:Bi,cpu:process.arch||u.EMPTY_STRING,os:process.platform||u.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=Yo.fromAssertion(await xi(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:dr}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===O.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=O.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!It.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...l],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,t,r){const n={clientId:this.config.auth.clientId,correlationId:t,apiId:e,forceRefresh:r||!1};return new wr(n,this.storage)}async createAuthority(e,t,r,n){this.logger.verbose("createAuthority called",t);const i=En.generateAuthority(e,n||this.config.auth.azureCloudOptions),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:r,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return hi(i,this.config.system.networkClient,this.storage,o,this.logger,t)}clearCache(){this.storage.clear()}}class ea{async listenForAuthCode(e,t){if(this.server)throw Po.createLoopbackServerAlreadyExistsError();return new Promise((r,n)=>{this.server=zi.createServer((i,o)=>{const a=i.url;if(!a)return o.end(t||"Error occurred loading redirectUrl"),void n(Po.createUnableToLoadRedirectUrlError());if(a===u.FORWARD_SLASH)return void o.end(e||"Auth code was successfully acquired. You can close this window now.");const s=this.getRedirectUri(),c=Tt(new URL(a,s).search)||{};c.code&&(o.writeHead(302,{location:s}),o.end()),c.error&&o.end(t||`Error occurred: ${c.error}`),r(c)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw Po.createNoLoopbackServerExistsError();const e=this.server.address();if(!e||"string"==typeof e||!e.port)throw this.closeServer(),Po.createInvalidLoopbackAddressTypeError();return`http://localhost:${e&&e.port}`}closeServer(){this.server&&(this.server.close(),"function"==typeof this.server.closeAllConnections&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}}class ta extends mi{constructor(e){super(e)}async acquireToken(e){const t=await this.getDeviceCode(e);e.deviceCodeCallback(t);const r=dn(),n=await this.acquireTokenWithDeviceCode(e,t),i=new Di(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n),i.handleServerTokenResponse(n,this.authority,r,e)}async getDeviceCode(e){const t=this.createExtraQueryParameters(e),r=kt.appendQueryString(this.authority.deviceCodeEndpoint,t),n=this.createQueryString(e),i=this.createTokenRequestHeaders(),o={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(r,n,i,o,e.correlationId)}createExtraQueryParameters(e){const t=new Map;return e.extraQueryParameters&&ai(t,e.extraQueryParameters),_t(t)}async executePostRequestToDeviceCodeEndpoint(e,t,r,n,i){const{body:{user_code:o,device_code:a,verification_uri:s,expires_in:c,interval:u,message:l}}=await this.sendPostRequest(n,e,{body:t,headers:r},i);return{userCode:o,deviceCode:a,verificationUri:s,expiresIn:c,interval:u,message:l}}createQueryString(e){const t=new Map;return zn(t,e.scopes),jn(t,this.config.authOptions.clientId),e.extraQueryParameters&&ai(t,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xn(t,e.claims,this.config.authOptions.clientCapabilities),_t(t)}continuePolling(e,t,r){if(r)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),qe(de);if(t&&t<e&&dn()>t)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${t}`),qe(Se);if(dn()>e)throw t&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${t}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),qe(he);return!0}async acquireTokenWithDeviceCode(e,t){const r=this.createTokenQueryParameters(e),n=kt.appendQueryString(this.authority.tokenEndpoint,r),i=this.createTokenRequestBody(e,t),o=this.createTokenRequestHeaders(),a=e.timeout?dn()+e.timeout:void 0,s=dn()+t.expiresIn,c=1e3*t.interval;for(;this.continuePolling(s,a,e.cancel);){const t={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},r=await this.executePostToTokenEndpoint(n,i,o,t,e.correlationId);if(!r.body||!r.body.error)return this.logger.verbose("Authorization completed successfully. Polling stopped."),r.body;if(r.body.error!==u.AUTHORIZATION_PENDING)throw this.logger.info("Unexpected error in polling from the server"),j(F,r.body.error);this.logger.info("Authorization pending. Continue polling."),await pn(c)}throw this.logger.error("Polling stopped for unknown reasons."),qe(fe)}createTokenRequestBody(e,t){const r=new Map;return zn(r,e.scopes),jn(r,this.config.authOptions.clientId),ni(r,"device_code"),function(e,t){e.set("device_code",t)}(r,t.deviceCode),Yn(r,e.correlationId||this.config.cryptoInterface.createNewGuid()),ii(r),Qn(r,this.config.libraryInfo),Jn(r,this.config.telemetry.application),li(r),this.serverTelemetryManager&&ui(r,this.serverTelemetryManager),(!It.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xn(r,e.claims,this.config.authOptions.clientCapabilities),_t(r)}}class ra extends Zo{constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=wr.makeExtraSkuString({libraryName:lr,libraryVersion:Bi})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);const t=Object.assign(e,await this.initializeBaseRequest(e)),r=this.initializeServerTelemetryManager(671,t.correlationId);try{const n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,t.correlationId,"",r),o=new ta(i);return this.logger.verbose("Device code client created",t.correlationId),await o.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}async acquireTokenInteractive(e){const t=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",t);const{openBrowser:r,successTemplate:n,errorTemplate:i,windowHandle:o,loopbackClient:a,...s}=e;if(this.nativeBrokerPlugin){const r={...s,clientId:this.config.auth.clientId,scopes:e.scopes||l,redirectUri:e.redirectUri||"",authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...s.extraQueryParameters,...s.tokenQueryParameters,[br]:this.skus},accountId:s.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(r,o)}if(e.redirectUri){if(!this.config.broker.nativeBrokerPlugin)throw Po.createRedirectUriNotSupportedError();e.redirectUri=""}const{verifier:c,challenge:d}=await this.cryptoProvider.generatePkceCodes(),h=a||new ea;let f={},p=null;try{const o=h.listenForAuthCode(n,i).then(e=>{f=e}).catch(e=>{p=e}),a=await this.waitForRedirectUri(h),g={...s,correlationId:t,scopes:e.scopes||l,redirectUri:a,responseMode:I.QUERY,codeChallenge:d,codeChallengeMethod:"S256"},m=await this.getAuthCodeUrl(g);if(await r(m),await o,p)throw p;if(f.error)throw new Pr(f.error,f.error_description,f.suberror);if(!f.code)throw Po.createNoAuthCodeInResponseError();const v=f.client_info,y={code:f.code,codeVerifier:c,clientInfo:v||u.EMPTY_STRING,...g};return await this.acquireTokenByCode(y)}finally{h.closeServer()}}async acquireTokenSilent(e){const t=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",t),this.nativeBrokerPlugin){const r={...e,clientId:this.config.auth.clientId,scopes:e.scopes||l,redirectUri:e.redirectUri||"",authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...e.tokenQueryParameters,[br]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(r)}if(e.redirectUri){if(!this.config.broker.nativeBrokerPlugin)throw Po.createRedirectUriNotSupportedError();e.redirectUri=""}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){const t={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(t)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){const e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((t,r)=>{let n=0;const i=setInterval(()=>{if(50<n)return clearInterval(i),void r(Po.createLoopbackServerTimeoutError());try{const r=e.getRedirectUri();return clearInterval(i),void t(r)}catch(e){return e instanceof z&&e.errorCode===vo?void n++:(clearInterval(i),void r(e))}},100)})}}class na extends mi{constructor(e,t){super(e),this.appTokenProvider=t}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);const[t,r]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);if(t){if(r===L){this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");const t=!0;await this.executeTokenRequest(e,this.authority,t)}return t}return this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,t,r,n,i,o){const a=t,s=t;let c,u=N;a.serializableCache&&a.persistencePlugin&&(c=new Ni(a.serializableCache,!1),await a.persistencePlugin.beforeCacheAccess(c));const l=this.readAccessTokenFromCache(n,s.managedIdentityId?.id||a.authOptions.clientId,new At(e.scopes||[]),i,e.correlationId);return a.serializableCache&&a.persistencePlugin&&c&&await a.persistencePlugin.afterCacheAccess(c),l?fn(l.expiresOn,a.systemOptions?.tokenRenewalOffsetSeconds||300)?(o?.setCacheOutcome(x),[null,x]):(l.refreshOn&&fn(l.refreshOn.toString(),0)&&(u=L,o?.setCacheOutcome(L)),[await Di.generateAuthenticationResult(r,n,{account:null,idToken:null,accessToken:l,refreshToken:null,appMetadata:null},!0,e),u]):(o?.setCacheOutcome(D),[null,D])}readAccessTokenFromCache(e,t,r,n,i){const o={homeAccountId:u.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:C.ACCESS_TOKEN,clientId:t,realm:e.tenant,target:At.createSearchScopes(r.asArray())},a=n.getAccessTokensByFilter(o,i);if(a.length<1)return null;if(a.length>1)throw qe(ie);return a[0]}async executeTokenRequest(e,t,r){let n,i;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");const t={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};i=dn();const r=await this.appTokenProvider(t);n={access_token:r.accessToken,expires_in:r.expiresInSeconds,refresh_in:r.refreshInSeconds,token_type:O.BEARER}}else{const r=this.createTokenQueryParameters(e),o=kt.appendQueryString(t.tokenEndpoint,r),a=await this.createTokenRequestBody(e),s=this.createTokenRequestHeaders(),c={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+t.tokenEndpoint),i=dn();const u=await this.executePostToTokenEndpoint(o,a,s,c,e.correlationId);n=u.body,n.status=u.status}const o=new Di(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n,r),await o.handleServerTokenResponse(n,this.authority,i,e)}async createTokenRequestBody(e){const t=new Map;jn(t,this.config.authOptions.clientId),zn(t,e.scopes,!1),ni(t,"client_credentials"),Qn(t,this.config.libraryInfo),Jn(t,this.config.telemetry.application),li(t),this.serverTelemetryManager&&ui(t,this.serverTelemetryManager),Yn(t,e.correlationId||this.config.cryptoInterface.createNewGuid()),this.config.clientCredentials.clientSecret&&ei(t,this.config.clientCredentials.clientSecret);const r=e.clientAssertion||this.config.clientCredentials.clientAssertion;return r&&(ti(t,await xi(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ri(t,r.assertionType)),(!It.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xn(t,e.claims,this.config.authOptions.clientCapabilities),_t(t)}}class ia extends mi{constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new At(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch(t){return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){const t=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(!t)throw this.serverTelemetryManager?.setCacheOutcome(D),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),qe(Ce);if(fn(t.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(x),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),qe(Ce);const r=this.readIdTokenFromCacheForOBO(t.homeAccountId,e.correlationId);let n,i=null;if(r){n=Ct(r.secret,Uo.base64Decode);const t=n.oid||n.sub,o={homeAccountId:r.homeAccountId,environment:r.environment,tenantId:r.realm,username:u.EMPTY_STRING,localAccountId:t||u.EMPTY_STRING};i=this.cacheManager.getAccount(this.cacheManager.generateAccountKey(o),e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),Di.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:i,accessToken:t,idToken:r,refreshToken:null,appMetadata:null},!0,e,n)}readIdTokenFromCacheForOBO(e,t){const r={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:C.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},n=this.cacheManager.getIdTokensByFilter(r,t);return Object.values(n).length<1?null:Object.values(n)[0]}readAccessTokenFromCacheForOBO(e,t){const r=t.authenticationScheme||O.BEARER,n={credentialType:r&&r.toLowerCase()!==O.BEARER.toLowerCase()?C.ACCESS_TOKEN_WITH_AUTH_SCHEME:C.ACCESS_TOKEN,clientId:e,target:At.createSearchScopes(this.scopeSet.asArray()),tokenType:r,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash,userAssertionHash:this.userAssertionHash},i=this.cacheManager.getAccessTokensByFilter(n,t.correlationId),o=i.length;if(o<1)return null;if(o>1)throw qe(ie);return i[0]}async executeTokenRequest(e,t,r){const n=this.createTokenQueryParameters(e),i=kt.appendQueryString(t.tokenEndpoint,n),o=await this.createTokenRequestBody(e),a=this.createTokenRequestHeaders(),s={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},c=dn(),u=await this.executePostToTokenEndpoint(i,o,a,s,e.correlationId),l=new Di(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return l.validateTokenResponse(u.body),await l.handleServerTokenResponse(u.body,this.authority,c,e,void 0,r)}async createTokenRequestBody(e){const t=new Map;jn(t,this.config.authOptions.clientId),zn(t,e.scopes),ni(t,"urn:ietf:params:oauth:grant-type:jwt-bearer"),ii(t),Qn(t,this.config.libraryInfo),Jn(t,this.config.telemetry.application),li(t),this.serverTelemetryManager&&ui(t,this.serverTelemetryManager),Yn(t,e.correlationId||this.config.cryptoInterface.createNewGuid()),function(e){e.set("requested_token_use","on_behalf_of")}(t),function(e,t){e.set("assertion",t)}(t,e.oboAssertion),this.config.clientCredentials.clientSecret&&ei(t,this.config.clientCredentials.clientSecret);const r=this.config.clientCredentials.clientAssertion;return r&&(ti(t,await xi(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ri(t,r.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Xn(t,e.claims,this.config.authOptions.clientCapabilities),_t(t)}}class oa extends Zo{constructor(e){super(e);const t=!!this.config.auth.clientSecret,r=!!this.config.auth.clientAssertion,n=!(!this.config.auth.clientCertificate?.thumbprint&&!this.config.auth.clientCertificate?.thumbprintSha256||!this.config.auth.clientCertificate?.privateKey);if(!this.appTokenProvider){if(t&&r||r&&n||t&&n)throw qe(Ae);if(this.config.auth.clientSecret)this.clientSecret=this.config.auth.clientSecret;else if(this.config.auth.clientAssertion)this.developerProvidedClientAssertion=this.config.auth.clientAssertion;else{if(!n)throw qe(Ae);this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?Yo.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):Yo.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c),this.appTokenProvider=void 0}}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){let t;this.logger.info("acquireTokenByClientCredential called",e.correlationId),e.clientAssertion&&(t={assertion:await xi(e.clientAssertion,this.config.auth.clientId),assertionType:dr});const r=await this.initializeBaseRequest(e),n={...r,scopes:r.scopes.filter(e=>!l.includes(e))},i={...e,...n,clientAssertion:t},o=new kt(i.authority).getUrlComponents().PathSegments[0];if(Object.values(v).includes(o))throw qe(Oe);const a=process.env.MSAL_FORCE_REGION;let s;"DisableMsalForceRegion"!==i.azureRegion&&(s=!i.azureRegion&&a?a:i.azureRegion);const c={azureRegion:s,environmentRegion:process.env.REGION_NAME},u=this.initializeServerTelemetryManager(771,i.correlationId,i.skipCache);try{const t=await this.createAuthority(i.authority,i.correlationId,c,e.azureCloudOptions),r=await this.buildOauthClientConfiguration(t,i.correlationId,"",u),n=new na(r,this.appTokenProvider);return this.logger.verbose("Client credential client created",i.correlationId),await n.acquireToken(i)}catch(e){throw e instanceof z&&e.setCorrelationId(i.correlationId),u.cacheFailedRequest(e),e}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e)};try{const r=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),n=await this.buildOauthClientConfiguration(r,t.correlationId,"",void 0),i=new ia(n);return this.logger.verbose("On behalf of client created",t.correlationId),await i.acquireToken(t)}catch(e){throw e instanceof z&&e.setCorrelationId(t.correlationId),e}}}class aa{constructor(e,t,r){this.httpClientNoRetries=e,this.retryPolicy=t,this.logger=r}async sendNetworkRequestAsyncHelper(e,t,r){return e===ir?this.httpClientNoRetries.sendGetRequestAsync(t,r):this.httpClientNoRetries.sendPostRequestAsync(t,r)}async sendNetworkRequestAsync(e,t,r){let n=await this.sendNetworkRequestAsyncHelper(e,t,r);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let i=0;for(;await this.retryPolicy.pauseForRetry(n.status,i,this.logger,n.headers[f]);)n=await this.sendNetworkRequestAsyncHelper(e,t,r),i++;return n}async sendGetRequestAsync(e,t){return this.sendNetworkRequestAsync(ir,e,t)}async sendPostRequestAsync(e,t){return this.sendNetworkRequestAsync(or,e,t)}}const sa="clientid";class ca{constructor(e,t,r,n,i){this.logger=e,this.nodeStorage=t,this.networkClient=r,this.cryptoProvider=n,this.disableInternalRetries=i}async getServerTokenResponseAsync(e,t,r,n){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let t,r;return e.body.expires_on&&(function(e){if("string"!=typeof e)return!1;const t=new Date(e);return!isNaN(t.getTime())&&t.toISOString()===e}(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),r=e.body.expires_on-dn(),r>7200&&(t=r/2)),{status:e.status,access_token:e.body.access_token,expires_in:r,scope:e.body.resource,token_type:e.body.token_type,refresh_in:t,correlation_id:e.body.correlation_id||e.body.correlationId,error:"string"==typeof e.body.error?e.body.error:e.body.error?.code,error_description:e.body.message||("string"==typeof e.body.error?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,t,r,n){const i=this.createRequest(e.resource,t);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),i.queryParameters.token_sha256_to_refresh=e.revokedTokenSha256Hash),e.clientCapabilities?.length){const t=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${t}`),i.queryParameters.xms_cc=t}const o=i.headers;o[h]=u.URL_FORM_CONTENT_TYPE;const a={headers:o};Object.keys(i.bodyParameters).length&&(a.body=i.computeParametersBodyString());const s=this.disableInternalRetries?this.networkClient:new aa(this.networkClient,i.retryPolicy,this.logger),c=dn();let l;try{l=i.httpMethod===or?await s.sendPostRequestAsync(i.computeUri(),a):await s.sendGetRequestAsync(i.computeUri(),a)}catch(e){throw e instanceof z?e:qe(X)}const d=new Di(t.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),f=await this.getServerTokenResponseAsync(l,s,i,a);return d.validateTokenResponse(f,n),d.handleServerTokenResponse(f,r,c,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,t,r){switch(e){case tr:return this.logger.info(`[Managed Identity] [API version ${r?"2017+":"2019+"}] Adding user assigned client id to the request.`),r?sa:"client_id";case rr:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),t?"msi_res_id":"mi_res_id";case nr:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),"object_id";default:throw co(Gi)}}}ca.getValidatedEnvVariableUrlString=(e,t,r,n)=>{try{return new kt(t).urlString}catch(t){throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${e}' environment variable is malformed.`),co(oo[e])}};class ua{calculateDelay(e,t){if(!e)return t;let r=Math.round(1e3*parseFloat(e));return isNaN(r)&&(r=new Date(e).valueOf()-(new Date).valueOf()),Math.max(t,r)}}const la=[404,408,429,500,503,504];class da{constructor(){this.linearRetryStrategy=new ua}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return 1e3}async pauseForRetry(e,t,r,n){if(la.includes(e)&&t<3){const e=this.linearRetryStrategy.calculateDelay(n,da.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return r.verbose(`Retrying request in ${e}ms (retry attempt: ${t+1})`),await new Promise(t=>setTimeout(t,e)),!0}return!1}}class ha{constructor(e,t,r){this.httpMethod=e,this._baseEndpoint=t,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=r||new da}computeUri(){const e=new Map;this.queryParameters&&ai(e,this.queryParameters);const t=_t(e);return kt.appendQueryString(this._baseEndpoint,t)}computeParametersBodyString(){const e=new Map;return this.bodyParameters&&ai(e,this.bodyParameters),_t(e)}}class fa extends ca{constructor(e,t,r,n,i,o,a){super(e,t,r,n,i),this.identityEndpoint=o,this.identityHeader=a}static getEnvironmentVariables(){return[process.env[Gt],process.env[Wt]]}static tryCreate(e,t,r,n,i){const[o,a]=fa.getEnvironmentVariables();if(!o||!a)return e.info(`[Managed Identity] ${Zt.APP_SERVICE} managed identity is unavailable because one or both of the '${Wt}' and '${Gt}' environment variables are not defined.`),null;const s=fa.getValidatedEnvVariableUrlString(Gt,o,Zt.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Zt.APP_SERVICE} managed identity. Endpoint URI: ${s}. Creating ${Zt.APP_SERVICE} managed identity.`),new fa(e,t,r,n,i,o,a)}createRequest(e,t){const r=new ha(ir,this.identityEndpoint);return r.headers["X-IDENTITY-HEADER"]=this.identityHeader,r.queryParameters[$t]="2019-08-01",r.queryParameters[Vt]=e,t.idType!==er&&(r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),r}}var pa=r(9896),ga=r(6928);const ma="http://127.0.0.1:40342/metadata/identity/oauth2/token",va="N/A: himds executable exists",ya={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},wa={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"};class Ia extends ca{constructor(e,t,r,n,i,o){super(e,t,r,n,i),this.identityEndpoint=o}static getEnvironmentVariables(){let e=process.env[Gt],t=process.env[Yt];if(!e||!t){const r=wa[process.platform];try{(0,pa.accessSync)(r,pa.constants.F_OK|pa.constants.R_OK),e=ma,t=va}catch(e){}}return[e,t]}static tryCreate(e,t,r,n,i,o){const[a,s]=Ia.getEnvironmentVariables();if(!a||!s)return e.info(`[Managed Identity] ${Zt.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${Gt}' and '${Yt}' are not defined. ${Zt.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(s===va)e.info(`[Managed Identity] ${Zt.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${Zt.AZURE_ARC} endpoint: ${ma}. Creating ${Zt.AZURE_ARC} managed identity.`);else{const t=Ia.getValidatedEnvVariableUrlString(Gt,a,Zt.AZURE_ARC,e);t.endsWith("/")&&t.slice(0,-1),Ia.getValidatedEnvVariableUrlString(Yt,s,Zt.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${Zt.AZURE_ARC} managed identity. Endpoint URI: ${t}. Creating ${Zt.AZURE_ARC} managed identity.`)}if(o.idType!==er)throw co(Ji);return new Ia(e,t,r,n,i,a)}createRequest(e){const t=new ha(ir,this.identityEndpoint.replace("localhost","127.0.0.1"));return t.headers[zt]="true",t.queryParameters[$t]="2019-11-01",t.queryParameters[Vt]=e,t}async getServerTokenResponseAsync(e,t,r,n){let i;if(401===e.status){const o=e.headers["www-authenticate"];if(!o)throw co(no);if(!o.includes("Basic realm="))throw co(io);const a=o.split("Basic realm=")[1];if(!ya.hasOwnProperty(process.platform))throw co(Qi);const s=ya[process.platform],c=ga.basename(a);if(!c.endsWith(".key"))throw co(Vi);if(s+c!==a)throw co(Ki);let u,l;try{u=await(0,pa.statSync)(a).size}catch(e){throw co(to)}if(u>4096)throw co(Wi);try{l=(0,pa.readFileSync)(a,"utf-8")}catch(e){throw co(to)}const d=`Basic ${l}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),r.headers.Authorization=d;try{i=await t.sendGetRequestAsync(r.computeUri(),n)}catch(e){throw e instanceof z?e:qe(X)}}return this.getServerTokenResponse(i||e)}}class Aa extends ca{constructor(e,t,r,n,i,o){super(e,t,r,n,i),this.msiEndpoint=o}static getEnvironmentVariables(){return[process.env[Qt]]}static tryCreate(e,t,r,n,i,o){const[a]=Aa.getEnvironmentVariables();if(!a)return e.info(`[Managed Identity] ${Zt.CLOUD_SHELL} managed identity is unavailable because the '${Qt} environment variable is not defined.`),null;const s=Aa.getValidatedEnvVariableUrlString(Qt,a,Zt.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${Zt.CLOUD_SHELL} managed identity. Endpoint URI: ${s}. Creating ${Zt.CLOUD_SHELL} managed identity.`),o.idType!==er)throw co(Zi);return new Aa(e,t,r,n,i,a)}createRequest(e){const t=new ha(or,this.msiEndpoint);return t.headers[zt]="true",t.bodyParameters[Vt]=e,t}}class Ca{constructor(e,t,r){this.minExponentialBackoff=e,this.maxExponentialBackoff=t,this.exponentialDeltaBackoff=r}calculateDelay(e){return 0===e?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}}const Sa=[404,408,410,429];class Ea{constructor(){this.exponentialRetryStrategy=new Ca(Ea.MIN_EXPONENTIAL_BACKOFF_MS,Ea.MAX_EXPONENTIAL_BACKOFF_MS,Ea.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return 1e3}static get MAX_EXPONENTIAL_BACKOFF_MS(){return 4e3}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return 2e3}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return 1e4}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,t,r){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=410===e?7:3),(Sa.includes(e)||e>=500&&e<=599&&t<this.maxRetries)&&t<this.maxRetries){const n=410===e?Ea.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(t);return r.verbose(`Retrying request in ${n}ms (retry attempt: ${t+1})`),await new Promise(e=>setTimeout(e,n)),!0}return!1}}const ba="/metadata/identity/oauth2/token",Ta=`http://169.254.169.254${ba}`;class _a extends ca{constructor(e,t,r,n,i,o){super(e,t,r,n,i),this.identityEndpoint=o}static tryCreate(e,t,r,n,i){let o;return process.env[Kt]?(e.info(`[Managed Identity] Environment variable ${Kt} for ${Zt.IMDS} returned endpoint: ${process.env[Kt]}`),o=_a.getValidatedEnvVariableUrlString(Kt,`${process.env[Kt]}${ba}`,Zt.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${Kt} environment variable for ${Zt.IMDS}, using the default endpoint.`),o=Ta),new _a(e,t,r,n,i,o)}createRequest(e,t){const r=new ha(ir,this.identityEndpoint);return r.headers[zt]="true",r.queryParameters[$t]="2018-02-01",r.queryParameters[Vt]=e,t.idType!==er&&(r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType,!0)]=t.id),r.retryPolicy=new Ea,r}}class ka extends ca{constructor(e,t,r,n,i,o,a){super(e,t,r,n,i),this.identityEndpoint=o,this.identityHeader=a}static getEnvironmentVariables(){return[process.env[Gt],process.env[Wt],process.env[Xt]]}static tryCreate(e,t,r,n,i,o){const[a,s,c]=ka.getEnvironmentVariables();if(!a||!s||!c)return e.info(`[Managed Identity] ${Zt.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${Wt}', '${Gt}' or '${Xt}' environment variables are not defined.`),null;const u=ka.getValidatedEnvVariableUrlString(Gt,a,Zt.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Zt.SERVICE_FABRIC} managed identity. Endpoint URI: ${u}. Creating ${Zt.SERVICE_FABRIC} managed identity.`),o.idType!==er&&e.warning(`[Managed Identity] ${Zt.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new ka(e,t,r,n,i,a,s)}createRequest(e,t){const r=new ha(ir,this.identityEndpoint);return r.headers[jt]=this.identityHeader,r.queryParameters[$t]="2019-07-01-preview",r.queryParameters[Vt]=e,t.idType!==er&&(r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),r}}const Pa=`Only client id is supported for user-assigned managed identity in ${Zt.MACHINE_LEARNING}.`;class Ra extends ca{constructor(e,t,r,n,i,o,a){super(e,t,r,n,i),this.msiEndpoint=o,this.secret=a}static getEnvironmentVariables(){return[process.env[Qt],process.env[Jt]]}static tryCreate(e,t,r,n,i){const[o,a]=Ra.getEnvironmentVariables();if(!o||!a)return e.info(`[Managed Identity] ${Zt.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${Qt}' and '${Jt}' environment variables are not defined.`),null;const s=Ra.getValidatedEnvVariableUrlString(Qt,o,Zt.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Zt.MACHINE_LEARNING} managed identity. Endpoint URI: ${s}. Creating ${Zt.MACHINE_LEARNING} managed identity.`),new Ra(e,t,r,n,i,o,a)}createRequest(e,t){const r=new ha(ir,this.msiEndpoint);if(r.headers[zt]="true",r.headers[jt]=this.secret,r.queryParameters[$t]="2017-09-01",r.queryParameters[Vt]=e,t.idType===er)r.queryParameters[sa]=process.env.DEFAULT_IDENTITY_CLIENT_ID;else{if(t.idType!==tr)throw new Error(Pa);r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType,!1,!0)]=t.id}return r}}class Oa{constructor(e,t,r,n,i){this.logger=e,this.nodeStorage=t,this.networkClient=r,this.cryptoProvider=n,this.disableInternalRetries=i}async sendManagedIdentityTokenRequest(e,t,r,n){return Oa.identitySource||(Oa.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,t)),Oa.identitySource.acquireTokenWithManagedIdentity(e,t,r,n)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(e=>void 0!==e)}getManagedIdentitySource(){return Oa.sourceName=this.allEnvironmentVariablesAreDefined(ka.getEnvironmentVariables())?Zt.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(fa.getEnvironmentVariables())?Zt.APP_SERVICE:this.allEnvironmentVariablesAreDefined(Ra.getEnvironmentVariables())?Zt.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(Aa.getEnvironmentVariables())?Zt.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(Ia.getEnvironmentVariables())?Zt.AZURE_ARC:Zt.DEFAULT_TO_IMDS,Oa.sourceName}selectManagedIdentitySource(e,t,r,n,i,o){const a=ka.tryCreate(e,t,r,n,i,o)||fa.tryCreate(e,t,r,n,i)||Ra.tryCreate(e,t,r,n,i)||Aa.tryCreate(e,t,r,n,i,o)||Ia.tryCreate(e,t,r,n,i,o)||_a.tryCreate(e,t,r,n,i);if(!a)throw co(eo);return a}}const Ma=[Zt.SERVICE_FABRIC];class Na{constructor(e){this.config=function({clientCapabilities:e,managedIdentityIdParams:t,system:r}){const n=new uo(t),i=r?.loggerOptions||Mo;let o;return o=r?.networkClient?r.networkClient:new $i(r?.proxyUrl,r?.customAgentOptions),{clientCapabilities:e||[],managedIdentityId:n,system:{loggerOptions:i,networkClient:o},disableInternalRetries:r?.disableInternalRetries||!1}}(e||{}),this.logger=new Or(this.config.system.loggerOptions,Hi,Bi);const t={canonicalAuthority:u.DEFAULT_AUTHORITY};Na.nodeStorage||(Na.nodeStorage=new zo(this.logger,this.config.managedIdentityId.id,Tn,t)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new Bo;const r={protocolMode:Ve.AAD,knownAuthorities:[Bt],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new En(Bt,this.networkClient,Na.nodeStorage,r,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new na({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new Oa(this.logger,Na.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new Fo}async acquireToken(e){if(!e.resource)throw wt(Qe);const t={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(t.forceRefresh)return this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority);const[r,n]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(t,this.config,this.cryptoProvider,this.fakeAuthority,Na.nodeStorage);if(t.claims){const e=this.managedIdentityClient.getManagedIdentitySource();if(r&&Ma.includes(e)){const e=this.hashUtils.sha256(r.accessToken).toString("hex");t.revokedTokenSha256Hash=e}return this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority)}if(r){if(n===L){this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");const e=!0;await this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority,e)}return r}return this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,t,r,n){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,t,r,n)}getManagedIdentitySource(){return Oa.sourceName||this.managedIdentityClient.getManagedIdentitySource()}}class Da{constructor(e,t){this.client=e,this.partitionManager=t}async beforeCacheAccess(e){const t=await this.partitionManager.getKey(),r=await this.client.get(t);e.tokenCache.deserialize(r)}async afterCacheAccess(e){if(e.cacheHasChanged){const t=e.tokenCache.getKVStore(),r=Object.values(t).filter(e=>Ke.isAccountEntity(e));let n;if(r.length>0){const e=r[0];n=await this.partitionManager.extractKey(e)}else n=await this.partitionManager.getKey();await this.client.set(n,e.tokenCache.serialize())}}}},51:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(129))&&n.__esModule?n:{default:n};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},87:(e,t,r)=>{"use strict";r.d(t,{Dt:()=>a,Y8:()=>c,bb:()=>s,vv:()=>u});var n=r(269),i=r(5130),o="";function a(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString()[i.OL]()}function s(e){(isNaN(e)||e<0)&&(e=0),e=Math.round(e);var t=o+e%1e3,r=o+Math.floor(e/1e3)%60,n=o+Math.floor(e/6e4)%60,a=o+Math.floor(e/36e5)%24,s=Math.floor(e/864e5);return t=1===t[i.oI]?"00"+t:2===t[i.oI]?"0"+t:t,r=r[i.oI]<2?"0"+r:r,n=n[i.oI]<2?"0"+n:n,a=a[i.oI]<2?"0"+a:a,(s>0?s+".":o)+a+":"+n+":"+r+"."+t}function c(e,t){var r=null;return(0,n.Iuo)(e,function(e){if(e.identifier===t)return r=e,-1}),r}function u(e,t,r,i,o){return!o&&(0,n.KgX)(e)&&("Script error."===e||"Script error"===e)}},129:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(996))&&n.__esModule?n:{default:n};t.default=function(e){return"string"==typeof e&&i.default.test(e)}},144:(e,t,r)=>{const n=r(3908);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},181:e=>{"use strict";e.exports=require("buffer")},252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsalAuthProvider=void 0;const n=r(20),i=r(1398),o=r(8197),a=r(1039),s=r(410),c=r(6422),u=r(713),l=r(366),d=r(4413),h=r(6942),f=r(8261);class p{_context;_telemetryReporter;_logger;_uriHandler;_publicClientManager;_env;_disposables;_eventBufferer=new c.EventBufferer;_onDidChangeSessionsEmitter=new i.EventEmitter;onDidChangeSessions=this._onDidChangeSessionsEmitter.event;constructor(e,t,r,n,i,a=o.Environment.AzureCloud){this._context=e,this._telemetryReporter=t,this._logger=r,this._uriHandler=n,this._publicClientManager=i,this._env=a,this._disposables=e.subscriptions;const s=this._eventBufferer.wrapEvent(this._publicClientManager.onDidAccountsChange,(e,t)=>{if(!e)return t;const r={added:[...e.added??[],...t.added??[]],deleted:[...e.deleted??[],...t.deleted??[]],changed:[...e.changed??[],...t.changed??[]]};return{added:Array.from(new Map(r.added.map(e=>[e.username,e])).values()),deleted:Array.from(new Map(r.deleted.map(e=>[e.username,e])).values()),changed:Array.from(new Map(r.changed.map(e=>[e.username,e])).values())}},{added:new Array,deleted:new Array,changed:new Array})(e=>this._handleAccountChange(e));this._disposables.push(this._onDidChangeSessionsEmitter,s)}static async create(e,t,r,n,i=o.Environment.AzureCloud){const s=await a.CachedPublicClientApplicationManager.create(e.secrets,r,t,i);e.subscriptions.push(s);const c=new p(e,t,r,n,s,i);return await c.initialize(),c}async _migrateSessions(){const e=new u.BetterTokenStorage("microsoft.login.keylist",this._context),t=await e.getAll(e=>(e.endpoint||=o.Environment.AzureCloud.activeDirectoryEndpointUrl,e.endpoint===this._env.activeDirectoryEndpointUrl));this._context.globalState.update("msalMigration",!0);const r=new Map;for(const e of t){const t=new s.ScopeData(e.scope.split(" ")),n=`${t.clientId}:${t.tenant}`;r.has(n)||r.set(n,{clientId:t.clientId,tenant:t.tenant,refreshTokens:[]}),r.get(n).refreshTokens.push(e.refreshToken)}for(const{clientId:e,tenant:t,refreshTokens:n}of r.values())await this._publicClientManager.getOrCreate(e,{refreshTokensToMigrate:n,tenant:t})}async initialize(){this._context.globalState.get("msalMigration",!1)||await this._migrateSessions();for(const e of this._publicClientManager.getAll())for(const t of e.accounts){const e=t.tenantId,r="9188040d-6c67-4c5b-b112-36a304b66dad"===e||"f8cdef31-a31e-4b4a-93e4-5f571e91255a"===e?"msa":"aad";this._telemetryReporter.sendAccountEvent([],r)}}_handleAccountChange({added:e,changed:t,deleted:r}){this._logger.debug(`[_handleAccountChange] added: ${e.length}, changed: ${t.length}, deleted: ${r.length}`),this._onDidChangeSessionsEmitter.fire({added:e.map(this.sessionFromAccountInfo),changed:t.map(this.sessionFromAccountInfo),removed:r.map(this.sessionFromAccountInfo)})}async getSessions(e,t={}){const r=void 0===e,n=new s.ScopeData(e,void 0,t?.authorizationServer);if(this._logger.info("[getSessions]",r?"[all]":`[${n.scopeStr}]`,"starting"),r){const e=new Map;for(const t of this._publicClientManager.getAll())for(const r of t.accounts)e.has(r.homeAccountId)||e.set(r.homeAccountId,this.sessionFromAccountInfo(r));const t=Array.from(e.values());return this._logger.info("[getSessions] [all]",`returned ${t.length} session(s)`),t}const i=await this._publicClientManager.getOrCreate(n.clientId),o=await this.getAllSessionsForPca(i,n,t?.account);return this._logger.info(`[getSessions] [${n.scopeStr}] returned ${o.length} session(s)`),o}async createSession(e,t){const r=new s.ScopeData(e,void 0,t.authorizationServer);this._logger.info("[createSession]",`[${r.scopeStr}]`,"starting");const o=await this._publicClientManager.getOrCreate(r.clientId);let a;const c=i.l10n.t("Yes"),u=i.l10n.t("No"),d=async e=>{if(void 0===a)return;const t=a?i.l10n.t("Having trouble logging in? Would you like to try a different way? ({0})",e):i.l10n.t("You have not yet finished authorizing this extension to use your Microsoft Account. Would you like to try a different way? ({0})",e);if(await i.window.showWarningMessage(t,c,u)!==c)throw new i.CancellationError},h=await i.env.asExternalUri(i.Uri.parse(`${i.env.uriScheme}://vscode.microsoft-authentication`)),p=(0,l.getMsalFlows)({extensionHost:this._context.extension.extensionKind===i.ExtensionKind.UI?1:0,supportedClient:(0,f.isSupportedClient)(h),isBrokerSupported:o.isBrokerAvailable}),g=new URL(r.tenant,this._env.activeDirectoryEndpointUrl).toString();let m;for(const e of p){if(e!==p[0])try{await d(e.label)}finally{this._telemetryReporter.sendLoginFailedEvent()}try{const n=await e.trigger({cachedPca:o,authority:g,scopes:r.scopesToSend,loginHint:t.account?.label,windowHandle:i.window.nativeHandle?Buffer.from(i.window.nativeHandle):void 0,logger:this._logger,uriHandler:this._uriHandler,callbackUri:h}),a=this.sessionFromAuthenticationResult(n,r.originalScopes);return this._telemetryReporter.sendLoginEvent(a.scopes),this._logger.info("[createSession]",`[${r.scopeStr}]`,"returned session"),a}catch(e){if(m=e,e instanceof n.ServerError||e?.errorCode===n.ClientAuthErrorCodes.userCanceled)throw this._telemetryReporter.sendLoginFailedEvent(),e;e instanceof i.CancellationError&&(a=!0)}}throw this._telemetryReporter.sendLoginFailedEvent(),m??new Error("No auth flow succeeded")}async removeSession(e){this._logger.info("[removeSession]",e,"starting");const t=new Array;for(const r of this._publicClientManager.getAll()){const n=r.accounts;for(const i of n)i.homeAccountId===e&&(this._telemetryReporter.sendLogoutEvent(),t.push(r.removeAccount(i)),this._logger.info(`[removeSession] [${e}] [${r.clientId}] removing session...`))}if(!t.length)return void this._logger.info("[removeSession]",e,"session not found");const r=await Promise.allSettled(t);for(const t of r)"rejected"===t.status&&(this._telemetryReporter.sendLogoutFailedEvent(),this._logger.error("[removeSession]",e,"error removing session",t.reason));this._logger.info("[removeSession]",e,`attempted to remove ${t.length} sessions`)}async getSessionsFromChallenges(e,t){this._logger.info("[getSessionsFromChallenges]","starting with",e.challenges.length,"challenges");const r=this.extractScopesFromChallenges(e.challenges)??e.fallbackScopes;if(!r||0===r.length)throw new Error("No scopes found in authentication challenges or fallback scopes");const n=this.extractClaimsFromChallenges(e.challenges);if(!n)throw new Error("No claims found in authentication challenges");const i=new s.ScopeData(r,n,t?.authorizationServer);this._logger.info("[getSessionsFromChallenges]",`[${i.scopeStr}]`,"with claims:",i.claims);const o=await this._publicClientManager.getOrCreate(i.clientId),a=await this.getAllSessionsForPca(o,i,t?.account);return this._logger.info("[getSessionsFromChallenges]","returning",a.length,"sessions"),a}async createSessionFromChallenges(e,t){this._logger.info("[createSessionFromChallenges]","starting with",e.challenges.length,"challenges");const r=this.extractScopesFromChallenges(e.challenges)??e.fallbackScopes;if(!r||0===r.length)throw new Error("No scopes found in authentication challenges or fallback scopes");const o=this.extractClaimsFromChallenges(e.challenges),a=r.length>0?r:["https://graph.microsoft.com/User.Read"],c=new s.ScopeData(a,o,t.authorizationServer);this._logger.info("[createSessionFromChallenges]",`[${c.scopeStr}]`,"starting with claims:",o);const u=await this._publicClientManager.getOrCreate(c.clientId);let d;const h=i.l10n.t("Yes"),p=i.l10n.t("No"),g=async e=>{if(void 0===d)return;const t=d?i.l10n.t("Having trouble logging in? Would you like to try a different way? ({0})",e):i.l10n.t("You have not yet finished authorizing this extension to use your Microsoft Account. Would you like to try a different way? ({0})",e);if(await i.window.showWarningMessage(t,h,p)!==h)throw new i.CancellationError},m=await i.env.asExternalUri(i.Uri.parse(`${i.env.uriScheme}://vscode.microsoft-authentication`)),v=(0,l.getMsalFlows)({extensionHost:this._context.extension.extensionKind===i.ExtensionKind.UI?1:0,isBrokerSupported:u.isBrokerAvailable,supportedClient:(0,f.isSupportedClient)(m)}),y=new URL(c.tenant,this._env.activeDirectoryEndpointUrl).toString();let w;for(const e of v){if(e!==v[0])try{await g(e.label)}finally{this._telemetryReporter.sendLoginFailedEvent()}try{const r={cachedPca:u,authority:y,scopes:c.scopesToSend,loginHint:t.account?.label,windowHandle:i.window.nativeHandle?Buffer.from(i.window.nativeHandle):void 0,logger:this._logger,uriHandler:this._uriHandler,claims:c.claims,callbackUri:m},n=await e.trigger(r),o=this.sessionFromAuthenticationResult(n,c.originalScopes);return this._telemetryReporter.sendLoginEvent(o.scopes),this._logger.info("[createSessionFromChallenges]",`[${c.scopeStr}]`,"returned session"),o}catch(e){if(w=e,e instanceof n.ClientAuthError&&e.errorCode===n.ClientAuthErrorCodes.userCanceled){this._logger.info("[createSessionFromChallenges]",`[${c.scopeStr}]`,"user cancelled"),d=!0;continue}throw this._logger.error("[createSessionFromChallenges]",`[${c.scopeStr}]`,"error",e),e}}throw this._telemetryReporter.sendLoginFailedEvent(),w??new Error("No auth flow succeeded")}extractScopesFromChallenges(e){for(const t of e)if("bearer"===t.scheme.toLowerCase()&&t.params.scope)return t.params.scope.split(" ")}extractClaimsFromChallenges(e){for(const t of e)if("bearer"===t.scheme.toLowerCase()&&t.params.claims)try{return(0,d.base64Decode)(t.params.claims)}catch(e){this._logger.warn("[extractClaimsFromChallenges]","failed to decode claims... checking if it is already JSON",e);try{return JSON.parse(t.params.claims),t.params.claims}catch(e){this._logger.error("[extractClaimsFromChallenges]","failed to parse claims as JSON... returning undefined",e)}}}async getAllSessionsForPca(e,t,r){let i=r?e.accounts.filter(e=>e.homeAccountId===r.id):e.accounts;const o=new Map;for(const e of i){const t=o.get(e.homeAccountId)||[];t.push(e),o.set(e.homeAccountId,t)}i=Array.from(o.values()).map(e=>{if(1===e.length)return e[0];if(t.tenantId){const r=e.find(e=>e.tenantId===t.tenantId);if(r)return r}return e.find(e=>e.tenantId===e.idTokenClaims?.tid)||e[0]});const a=new URL(t.tenant,this._env.activeDirectoryEndpointUrl).toString(),s=[];return this._eventBufferer.bufferEventsAsync(async()=>{for(const r of i)try{let n,i,o;t.tenantId?r.tenantId!==t.tenantId&&(n=!0):r.tenantId!==r.idTokenClaims?.tid&&(n=!0),t.claims&&(n=!0,i=t.claims),e.isBrokerAvailable&&"darwin"===process.platform&&(o=h.Config.macOSBrokerRedirectUri);const c=await e.acquireTokenSilent({account:r,authority:a,scopes:t.scopesToSend,claims:i,redirectUri:o,forceRefresh:n});s.push(this.sessionFromAuthenticationResult(c,t.originalScopes))}catch(e){e instanceof n.AuthError?this._telemetryReporter.sendTelemetryClientAuthErrorEvent(e):this._telemetryReporter.sendTelemetryErrorEvent(e),this._logger.info(`[getAllSessionsForPca] [${t.scopeStr}] [${r.username}] failed to acquire token silently, skipping account`,JSON.stringify(e));continue}return s})}sessionFromAuthenticationResult(e,t){return{accessToken:e.accessToken,idToken:e.idToken,id:e.account?.homeAccountId??e.uniqueId,account:{id:e.account?.homeAccountId??e.uniqueId,label:e.account?.username.toLowerCase()??"Unknown"},scopes:t}}sessionFromAccountInfo(e){return{accessToken:"1234",id:e.homeAccountId,scopes:[],account:{id:e.homeAccountId,label:e.username.toLowerCase()},idToken:e.idToken}}}t.MsalAuthProvider=p},269:(e,t,r)=>{"use strict";function n(e,t){return e||t}function i(e,t){return e[t]}r.d(t,{$8:()=>le,$PY:()=>B,$XS:()=>V,AHH:()=>dr,Cv9:()=>Zt,DA8:()=>wt,EHq:()=>Bt,Edw:()=>N,EtT:()=>z,FJj:()=>Qt,GuU:()=>Ke,Gvm:()=>F,HzD:()=>tr,Iuo:()=>Ct,JKf:()=>ct,KTd:()=>Pt,KVm:()=>bt,KgX:()=>U,KhI:()=>Y,Lln:()=>ut,Lmq:()=>j,Lok:()=>ht,N6t:()=>ye,Nq2:()=>kt,O9V:()=>L,P0f:()=>De,QdQ:()=>zt,R3R:()=>Yt,SZ2:()=>M,Tnt:()=>q,UUD:()=>Jt,UxO:()=>te,Vdv:()=>et,W$7:()=>Et,WSA:()=>Ae,Wtk:()=>Je,Y0g:()=>pt,YEm:()=>Ze,Yny:()=>At,ZHX:()=>ve,ZWZ:()=>Ue,aqQ:()=>Dt,b07:()=>D,bJ7:()=>$,cGk:()=>me,cyL:()=>H,dRz:()=>ur,eCG:()=>mt,f0d:()=>xt,fn0:()=>Se,gBW:()=>P,hKY:()=>xe,hXl:()=>x,isD:()=>re,jjc:()=>gt,jsL:()=>we,kgX:()=>W,mS$:()=>Ye,mmD:()=>ue,nRs:()=>Ve,oJg:()=>se,rDm:()=>St,raO:()=>ne,sSX:()=>Rt,tGl:()=>rr,twz:()=>it,v0u:()=>X,vE3:()=>ge,vF1:()=>ie,vKV:()=>lr,w3n:()=>nt,w9M:()=>rt,woc:()=>K,xZI:()=>yt,zS2:()=>Qe,zav:()=>J,zkX:()=>tt,zkd:()=>de,zwS:()=>Wt,zzB:()=>G});var o,a=void 0,s=null,c="",u="function",l="object",d="prototype",h="__proto__",f="undefined",p="constructor",g="Symbol",m="_polyfill",v="length",y="name",w="call",I="toString",A=n(Object),C=i(A,d),S=n(String),E=i(S,d),b=n(Math),T=n(Array),_=i(T,d),k=i(_,"slice");function P(e,t){try{return{v:e.apply(this,t)}}catch(e){return{e}}}function R(e){return function(t){return typeof t===e}}function O(e){var t="[object "+e+"]";return function(e){return!(!e||M(e)!==t)}}function M(e){return C[I].call(e)}function N(e,t){return typeof e===t}function D(e){return typeof e===f||e===f}function x(e){return e===s||D(e)}function L(e){return!!e||e!==a}var U=R("string"),q=R(u);function F(e){return!(!e&&x(e)||!e||typeof e!==l)}var H=i(T,"isArray"),B=O("Date"),z=R("number"),j=R("boolean"),$=O("Error");function V(e){return!!(e&&e.then&&q(e.then))}function K(e){return!e||!G(e)}function G(e){return!(!e||(t=function(){return!(e&&0+e)},r=!e,n=P(t),n.e?r:n.v));var t,r,n}var W=i(A,"getOwnPropertyDescriptor");function X(e,t){return!!e&&C.hasOwnProperty[w](e,t)}var Y=n(i(A,"hasOwn"),Q);function Q(e,t){return X(e,t)||!!W(e,t)}function J(e,t,r){if(e&&F(e))for(var n in e)if(Y(e,n)&&-1===t[w](r||e,n,e[n]))break}var Z={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function ee(e){var t={};if(t[Z.c]=!0,t[Z.e]=!0,e.l){t.get=function(){return e.l.v};var r=W(e.l,"v");r&&r.set&&(t.set=function(t){e.l.v=t})}return J(e,function(e,r){t[Z[e]]=L(r)?r:t[Z[e]]}),t}var te=i(A,"defineProperty"),re=i(A,"defineProperties");function ne(e,t,r,n,i,o){var a={e:o,c:i};return r&&(a.g=r),n&&(a.s=n),te(e,t,ee(a))}function ie(e,t,r){return te(e,t,ee(r))}function oe(e,t,r,n,i){var o={};return J(e,function(e,n){ae(o,e,t?n:e,i),ae(o,n,r?n:e,i)}),n?n(o):o}function ae(e,t,r,n){te(e,t,{value:r,enumerable:!0,writable:!!n})}var se=n(S),ce="[object Error]";function ue(e,t){var r=c,n=C[I][w](e);n===ce&&(e={stack:se(e.stack),message:se(e.message),name:se(e.name)});try{r=((r=JSON.stringify(e,s,t?"number"==typeof t?t:4:a))?r.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):s)||se(e)}catch(e){r=" - "+ue(e,t)}return n+": "+r}function le(e){throw new Error(e)}function de(e){throw new TypeError(e)}var he=i(A,"freeze");function fe(e){return e}function pe(e){return e[h]||s}var ge=i(A,"assign"),me=i(A,"keys");function ve(e){return he&&J(e,function(e,t){(H(t)||F(t))&&ve(t)}),ye(e)}var ye=n(he,fe),we=n(i(A,"seal"),fe),Ie=n(i(A,"getPrototypeOf"),pe);function Ae(e){return oe(e,1,0,ye)}function Ce(e){return oe(e,0,0,ye)}function Se(e){return function(e){var t={};return J(e,function(e,r){ae(t,e,r[1]),ae(t,r[0],r[1])}),ye(t)}(e)}var Ee,be=Ce({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Te="__tsUtils$gblCfg";function _e(){var e;return typeof globalThis!==f&&(e=globalThis),e||typeof self===f||(e=self),e||typeof window===f||(e=window),e||typeof global===f||(e=global),e}function ke(){if(!Ee){var e=P(_e).v||{};Ee=e[Te]=e[Te]||{}}return Ee}var Pe=Re;function Re(e,t,r){var n=t?t[e]:s;return function(t){var i=(t?t[e]:s)||n;if(i||r){var o=arguments;return(i||r).apply(t,i?k[w](o,1):o)}de('"'+se(e)+'" not defined for '+ue(t))}}function Oe(e){return function(t){return t[e]}}var Me=i(b,"max"),Ne=Pe("slice",E),De=Pe("substring",E),xe=Re("substr",E,Le);function Le(e,t,r){return x(e)&&de("Invalid "+ue(e)),r<0?c:((t=t||0)<0&&(t=Me(t+e[v],0)),D(r)?Ne(e,t):Ne(e,t,t+r))}function Ue(e,t){return De(e,0,t)}var qe,Fe,He,Be="_urid";function ze(e){var t={description:se(e),toString:function(){return g+"("+e+")"}};return t[m]=!0,t}function je(e){var t=function(){if(!qe){var e=ke();qe=e.gblSym=e.gblSym||{k:{},s:{}}}return qe}();if(!Y(t.k,e)){var r=ze(e),n=me(t.s).length;r[Be]=function(){return n+"_"+r[I]()},t.k[e]=r,t.s[r[Be]()]=se(e)}return t.k[e]}function $e(){He=ke()}function Ve(e){var t={};return!He&&$e(),t.b=He.lzy,te(t,"v",{configurable:!0,get:function(){var r=e();return He.lzy||te(t,"v",{value:r}),t.b=He.lzy,r}}),t}function Ke(e){return te({toJSON:function(){return e}},"v",{value:e})}var Ge,We="window";function Xe(e,t){var r;return function(){return!He&&$e(),r&&!He.lzy||(r=Ke(P(e,t).v)),r.v}}function Ye(e){return!He&&$e(),Ge&&!1!==e&&!He.lzy||(Ge=Ke(P(_e).v||s)),Ge.v}function Qe(e,t){var r;if((r=Ge&&!1!==t?Ge.v:Ye(t))&&r[e])return r[e];if(e===We)try{return window}catch(e){}return s}function Je(){return!!Ze()}var Ze=Xe(Qe,["document"]);function et(){return!!tt()}var tt=Xe(Qe,[We]);function rt(){return!!nt()}var nt=Xe(Qe,["navigator"]);function it(){return!!ct()}var ot,at,st,ct=Xe(Qe,["history"]),ut=Xe(function(){return!!P(function(){return process&&(process.versions||{}).node}).v});function lt(){return ot=Ke(P(Qe,[g]).v)}function dt(e){var t=(He.lzy?0:ot)||lt();return t.v?t.v[e]:a}function ht(){return!!ft()}function ft(){return!He&&$e(),((He.lzy?0:ot)||lt()).v}function pt(e,t){var r=be[e];!He&&$e();var n=(He.lzy?0:ot)||lt();return n.v?n.v[r||e]:t?a:function(e){var t;!Fe&&(Fe={});var r=be[e];return r&&(t=Fe[r]=Fe[r]||ze(g+"."+r)),t}(e)}function gt(e,t){!He&&$e();var r=(He.lzy?0:ot)||lt();return r.v?r.v(e):t?s:ze(e)}function mt(e){return!He&&$e(),((at=(He.lzy?0:at)||Ke(P(dt,["for"]).v)).v||je)(e)}function vt(e){return!!e&&q(e.next)}function yt(e){return!function(e){return e===s||!L(e)}(e)&&q(e[pt(3)])}function wt(e,t,r){if(e&&(vt(e)||(!st&&(st=Ke(pt(3))),e=e[st.v]?e[st.v]():s),vt(e))){var n=a,i=a;try{for(var o=0;!(i=e.next()).done&&-1!==t[w](r||e,i.value,o,e);)o++}catch(t){n={e:t},e.throw&&(i=s,e.throw(n))}finally{try{i&&!i.done&&e.return&&e.return(i)}finally{if(n)throw n.e}}}}function It(e,t,r){return e.apply(t,r)}function At(e,t){return!D(t)&&e&&(H(t)?It(e.push,e,t):vt(t)||yt(t)?wt(t,function(t){e.push(t)}):e.push(t)),e}function Ct(e,t,r){if(e)for(var n=e[v]>>>0,i=0;i<n&&(!(i in e)||-1!==t[w](r||e,e[i],i,e));i++);}var St=Pe("indexOf",_),Et=Pe("map",_);function bt(e,t,r){return((e?e.slice:s)||k).apply(e,k[w](arguments,1))}function Tt(e,t,r){return-1!==St(e,t,r)}var _t,kt=Re("includes",_,Tt),Pt=Pe("reduce",_),Rt=n(i(A,"create"),Ot);function Ot(e){if(!e)return{};var t=typeof e;function r(){}return t!==l&&t!==u&&de("Prototype must be an Object or function: "+ue(e)),r[d]=e,new r}function Mt(e,t){return(A.setPrototypeOf||function(e,t){var r;!_t&&(_t=Ke(((r={})[h]=[],r instanceof Array))),_t.v?e[h]=t:J(t,function(t,r){return e[t]=r})})(e,t)}function Nt(e,t){t&&(e[y]=t)}function Dt(e,t,r){var n=r||Error,i=n[d][y],o=Error.captureStackTrace;return function(e,t,r){function n(){this[p]=t,P(ie,[this,y,{v:e,c:!0,e:!1}])}return P(ie,[t,y,{v:e,c:!0,e:!1}]),(t=Mt(t,r))[d]=r===s?Rt(r):(n[d]=r[d],new n),t}(e,function(){var r=this,a=arguments;try{P(Nt,[n,e]);var s=It(n,r,k[w](a))||r;if(s!==r){var c=Ie(r);c!==Ie(s)&&Mt(s,c)}return o&&o(s,r[p]),t&&t(s,a),s}finally{P(Nt,[n,i])}},n)}function xt(){return(Date.now||Lt)()}function Lt(){return(new Date).getTime()}function Ut(e){return function(t){return x(t)&&de("strTrim called ["+ue(t)+"]"),t&&t.replace&&(t=t.replace(e,c)),t}}var qt,Ft,Ht,Bt=Re("trim",E,Ut(/^\s+|(?=\s)\s+$/g));function zt(e){if(!e||typeof e!==l)return!1;Ht||(Ht=!et()||tt());var t=!1;if(e!==Ht){Ft||(qt=Function[d][I],Ft=qt[w](A));try{var r=Ie(e);(t=!r)||(X(r,p)&&(r=r[p]),t=!(!r||typeof r!==u||qt[w](r)!==Ft))}catch(e){}}return t}function jt(e){return e.value&&Gt(e),!0}var $t=[function(e){var t=e.value;if(H(t)){var r=e.result=[];return r.length=t.length,e.copyTo(r,t),!0}return!1},Gt,function(e){return e.type===u},function(e){var t=e.value;return!!B(t)&&(e.result=new Date(t.getTime()),!0)}];function Vt(e,t,r,n){var i=r.handler,a=r.path?n?r.path.concat(n):r.path:[],c={handler:r.handler,src:r.src,path:a},u=typeof t,d=!1,h=t===s;h||(t&&u===l?d=zt(t):h=function(e){return!o&&(o=["string","number","boolean",f,"symbol","bigint"]),!(e===l||-1===o.indexOf(e))}(u));var p={type:u,isPrim:h,isPlain:d,value:t,result:t,path:a,origin:r.src,copy:function(t,n){return Vt(e,t,n?c:r,n)},copyTo:function(t,r){return Kt(e,t,r,c)}};return p.isPrim?i&&i[w](r,p)?p.result:t:function(e,t){var n;return Ct(e,function(e){if(e.k===t)return n=e,-1}),n||(n={k:t,v:t},e.push(n),function(e){ie(p,"result",{g:function(){return e.v},s:function(t){e.v=t}});for(var t=0,n=i;!(n||(t<$t.length?$t[t++]:jt))[w](r,p);)n=s}(n)),n.v}(e,t)}function Kt(e,t,r,n){if(!x(r))for(var i in r)t[i]=Vt(e,r[i],n,i);return t}function Gt(e){var t=e.value;if(t&&e.isPlain){var r=e.result={};return e.copyTo(r,t),!0}return!1}function Wt(e,t,r,n,i,o,a){return function(e,t){return Ct(t,function(t){!function(e,t){Kt([],e,t,{handler:void 0,src:t,path:[]})}(e,t)}),e}(Vt([],s=e,{handler:undefined,src:s})||{},k[w](arguments));var s}var Xt,Yt=Oe(v);function Qt(){return!He&&$e(),Xt&&!He.lzy||(Xt=Ke(P(Qe,["performance"]).v)),Xt.v}function Jt(){var e=Qt();return e&&e.now?e.now():xt()}ht();var Zt=Re("endsWith",E,er);function er(e,t,r){U(e)||de("'"+ue(e)+"' is not a string");var n=U(t)?t:se(t),i=!D(r)&&r<e[v]?r:e[v];return De(e,i-n[v],i)===n}var tr=Pe("indexOf",E),rr=Re("startsWith",E,nr);function nr(e,t,r){U(e)||de("'"+ue(e)+"' is not a string");var n=U(t)?t:se(t),i=r>0?r:0;return De(e,i,i+n[v])===n}var ir="ref",or="unref",ar="hasRef",sr="enabled";function cr(e,t,r){var n=H(t),i=n?t.length:0,o=(i>0?t[0]:n?a:t)||setTimeout,c=(i>1?t[1]:a)||clearTimeout,u=r[0];r[0]=function(){l.dn(),It(u,a,k[w](arguments))};var l=function(e,t,r){var n,i=!0,o=e?t(s):s;function a(){return i=!1,o&&o[or]&&o[or](),n}function c(){o&&r(o),o=s}function u(){return o=t(o),i||a(),n}return(n={cancel:c,refresh:u})[ar]=function(){return o&&o[ar]?o[ar]():i},n[ir]=function(){return i=!0,o&&o[ir]&&o[ir](),n},n[or]=a,{h:n=te(n,sr,{get:function(){return!!o},set:function(e){!e&&o&&c(),e&&!o&&u()}}),dn:function(){o=s}}}(e,function(e){if(e){if(e.refresh)return e.refresh(),e;It(c,a,[e])}return It(o,a,r)},function(e){It(c,a,[e])});return l.h}function ur(e,t){return cr(!0,a,k[w](arguments))}function lr(e,t,r){return cr(!0,e,k[w](arguments,1))}function dr(e,t){return cr(!1,a,k[w](arguments))}},270:(e,t,r)=>{const n=r(3908),i=r(8311);e.exports=(e,t,r)=>{let o=null,a=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(o&&1!==a.compare(e)||(o=e,a=new n(o,r)))}),o}},366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMsalFlows=function(e){const t=[];for(const r of s){let n=!0;0===e.extensionHost&&(n&&=r.options.supportsRemoteExtensionHost),n&&=r.options.supportsBroker||!e.isBrokerSupported,n&&=r.options.supportsUnsupportedClient||e.supportedClient,n&&t.push(r)}return t};const n=r(1398),i=r(3178),o=r(8528),a=r(6942),s=[new class{label="default";options={supportsRemoteExtensionHost:!1,supportsUnsupportedClient:!0,supportsBroker:!0};async trigger({cachedPca:e,authority:t,scopes:r,claims:i,loginHint:s,windowHandle:c,logger:u}){let l;return u.info("Trying default msal flow..."),e.isBrokerAvailable&&"darwin"===process.platform&&(l=a.Config.macOSBrokerRedirectUri),await e.acquireTokenInteractive({openBrowser:async e=>{await n.env.openExternal(n.Uri.parse(e))},scopes:r,authority:t,successTemplate:o.loopbackTemplate,errorTemplate:o.loopbackTemplate,loginHint:s,prompt:s?void 0:"select_account",windowHandle:c,claims:i,redirectUri:l})}},new class{label="protocol handler";options={supportsRemoteExtensionHost:!0,supportsUnsupportedClient:!1,supportsBroker:!1};async trigger({cachedPca:e,authority:t,scopes:r,claims:n,loginHint:o,windowHandle:s,logger:c,uriHandler:u,callbackUri:l}){c.info("Trying protocol handler flow...");const d=new i.UriHandlerLoopbackClient(u,"https://vscode.dev/redirect",l,c);let h;return e.isBrokerAvailable&&"darwin"===process.platform&&(h=a.Config.macOSBrokerRedirectUri),await e.acquireTokenInteractive({openBrowser:e=>d.openBrowser(e),scopes:r,authority:t,loopbackClient:d,loginHint:o,prompt:o?void 0:"select_account",windowHandle:s,claims:n,redirectUri:h})}},new class{label="device code";options={supportsRemoteExtensionHost:!0,supportsUnsupportedClient:!0,supportsBroker:!1};async trigger({cachedPca:e,authority:t,scopes:r,claims:n,logger:i}){i.info("Trying device code flow...");const o=await e.acquireTokenByDeviceCode({scopes:r,authority:t,claims:n});if(!o)throw new Error("Device code flow did not return a result");return o}}]},380:(e,t,r)=>{"use strict";r.d(t,{Cr:()=>u,Xc:()=>d,pI:()=>l,u7:()=>h});var n=r(269),i=r(6182),o=r(4276),a=r(6492),s=r(1864),c=(0,o.T)("plugin");function u(e){return c.get(e,"state",{},!0)}function l(e,t){for(var r,o=[],s=null,c=e[i.uR]();c;){var l=c[i.AP]();if(l){s&&s[i.YH]&&l[a.qT]&&s[i.YH](l);var d=!!(r=u(l))[i.tZ];l[i.tZ]&&(d=l[i.tZ]()),d||o[i.y5](l),s=l,c=c[i.uR]()}}(0,n.Iuo)(o,function(n){var o=e[a.eT]();n[i.mE](e.getCfg(),o,t,e[i.uR]()),r=u(n),n[a.eT]||r[a.eT]||(r[a.eT]=o),r[i.tZ]=!0,delete r[i.Ik]})}function d(e){return e.sort(function(e,t){var r=0;if(t){var n=t[a.qT];e[a.qT]?r=n?e[a.Vo]-t[a.Vo]:1:n&&(r=-1)}else r=e?1:-1;return r})}function h(e){var t={};return{getName:function(){return t[i.RS]},setName:function(r){e&&e.setName(r),t[i.RS]=r},getTraceId:function(){return t[i.P5]},setTraceId:function(r){e&&e.setTraceId(r),(0,s.hX)(r)&&(t[i.P5]=r)},getSpanId:function(){return t[i.wi]},setSpanId:function(r){e&&e.setSpanId(r),(0,s.wN)(r)&&(t[i.wi]=r)},getTraceFlags:function(){return t[i.Rr]},setTraceFlags:function(r){e&&e.setTraceFlags(r),t[i.Rr]=r}}}},410:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScopeData=void 0;const r=["openid","email","profile","offline_access"];t.ScopeData=class{originalScopes;allScopes;scopeStr;scopesToSend;clientId;tenant;tenantId;claims;constructor(e=[],t,r){this.originalScopes=e;const n=[...e];n.sort(),this.allScopes=n,this.scopeStr=n.join(" "),this.claims=t,this.scopesToSend=this.getScopesToSend(n),this.clientId=this.getClientId(this.allScopes),this.tenant=this.getTenant(this.allScopes,r),this.tenantId=this.getTenantId(this.tenant)}getClientId(e){return e.reduce((e,t)=>t.startsWith("VSCODE_CLIENT_ID:")?t.split("VSCODE_CLIENT_ID:")[1]:e,void 0)??"aebc6443-996d-45c2-90f0-388ff96faa56"}getTenant(e,t){if(t?.path){const e=t.path.split("/")[1];if(e)return e}return e.reduce((e,t)=>t.startsWith("VSCODE_TENANT:")?t.split("VSCODE_TENANT:")[1]:e,void 0)??"organizations"}getTenantId(e){switch(e){case"organizations":case"common":case"consumers":return;default:return this.tenant}}getScopesToSend(e){const t=e.filter(e=>!e.startsWith("VSCODE_")),n=new Set(t);for(const e of r)n.delete(e);return n.size||t.push("User.Read"),t}}},560:(e,t,r)=>{const n=r(3908);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(6982))&&n.__esModule?n:{default:n};t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i.default.createHash("sha1").update(e).digest()}},659:(e,t,r)=>{"use strict";r.d(t,{Im:()=>a,qU:()=>c,vz:()=>u});var n=r(269),i=r(5664),o=(((0,n.mS$)()||{}).Symbol,((0,n.mS$)()||{}).Reflect,"hasOwnProperty"),a=n.vE3||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])i.Wy[o].call(t,a)&&(e[a]=t[a]);return e},s=function(e,t){return s=i.s6.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t[o](r)&&(e[r]=t[r])},s(e,t)};function c(e,t){function r(){this.constructor=e}typeof t!==i.hW&&null!==t&&(0,n.zkd)("Class extends value "+String(t)+" is not a constructor or null"),s(e,t),e[i.vR]=null===t?(0,n.sSX)(t):(r[i.vR]=t[i.vR],new r)}function u(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e}},713:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BetterTokenStorage=void 0;const i=n(r(5584)),o=r(1398);t.BetterTokenStorage=class{keylistKey;_operationInProgress=!1;_tokensPromise=Promise.resolve(new Map);_secretStorage;_didChangeInOtherWindow=new o.EventEmitter;onDidChangeInOtherWindow=this._didChangeInOtherWindow.event;constructor(e,t){this.keylistKey=e,this._secretStorage=t.secrets,t.subscriptions.push(t.secrets.onDidChange(e=>this.handleSecretChange(e))),this.initialize()}initialize(){this._operationInProgress=!0,this._tokensPromise=new Promise((e,t)=>{this._secretStorage.get(this.keylistKey).then(t=>{if(!t)return void e(new Map);const r=JSON.parse(t).map(e=>new Promise((t,r)=>{this._secretStorage.get(e).then(r=>{t({key:e,value:r})},r)}));Promise.allSettled(r).then(t=>{const r=new Map;t.forEach(e=>{if("fulfilled"===e.status&&e.value.value){const t=this.parseSecret(e.value.value);r.set(e.value.key,t)}else"rejected"===e.status?i.default.error(e.reason):i.default.error("Key was not found in SecretStorage.")}),e(r)})},t=>{i.default.error(t),e(new Map)})}),this._operationInProgress=!1}async get(e){return(await this.getTokens()).get(e)}async getAll(e){const t=await this.getTokens(),r=new Array;for(const[n,i]of t)e&&!e(i)||r.push(i);return r}async store(e,t){const r=await this.getTokens(),n=!r.has(e);r.set(e,t);const o=this.serializeSecret(t);this._operationInProgress=!0,this._tokensPromise=new Promise((t,a)=>{const s=[this._secretStorage.store(e,o)];n&&s.push(this.updateKeyList(r)),Promise.allSettled(s).then(e=>{e.forEach(e=>{"rejected"===e.status&&i.default.error(e.reason)}),t(r)})}),this._operationInProgress=!1}async delete(e){const t=await this.getTokens();t.has(e)&&(t.delete(e),this._operationInProgress=!0,this._tokensPromise=new Promise((r,n)=>{Promise.allSettled([this._secretStorage.delete(e),this.updateKeyList(t)]).then(e=>{e.forEach(e=>{"rejected"===e.status&&i.default.error(e.reason)}),r(t)})}),this._operationInProgress=!1)}async deleteAll(e){const t=await this.getTokens(),r=[];for(const[n,i]of t)e&&!e(i)||r.push(this.delete(n));await Promise.all(r)}async updateKeyList(e){const t=[];for(const[r]of e)t.push(r);const r=JSON.stringify(t);await this._secretStorage.store(this.keylistKey,r)}parseSecret(e){return JSON.parse(e)}serializeSecret(e){return JSON.stringify(e)}async getTokens(){let e;do{e=await this._tokensPromise}while(this._operationInProgress);return e}async handleSecretChange(e){const t=e.key;if(t===this.keylistKey)return;const r=await this.getTokens();this._operationInProgress=!0,this._tokensPromise=new Promise((e,n)=>{this._secretStorage.get(t).then(e=>{if(!e){if(r.has(t)){const e=r.get(t);r.delete(t),this._didChangeInOtherWindow.fire({added:[],updated:[],removed:[{key:t,value:e}]})}return r}const n=this.parseSecret(e),i=r.get(t);return i?(e!==this.serializeSecret(i)&&(r.set(t,n),this._didChangeInOtherWindow.fire({added:[],updated:[t],removed:[]})),r):(r.set(t,n),this._didChangeInOtherWindow.fire({added:[t],updated:[],removed:[]}),r)},e=>(i.default.error(e),r)).then(e)}),this._operationInProgress=!1}}},740:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnalyticsPluginIdentifier:()=>H,BreezeChannelIdentifier:()=>F,ConfigurationManager:()=>b,ConnectionStringParser:()=>h.F,ContextTagKeys:()=>T.o,CtxTagKeys:()=>R.O,DEFAULT_BREEZE_ENDPOINT:()=>p._G,DEFAULT_BREEZE_PATH:()=>p.wc,Data:()=>S.B,DisabledPropertyName:()=>p.xF,DistributedTracingModes:()=>O.uG,Envelope:()=>g.L,Event:()=>m.J,EventPersistence:()=>O.iD,Exception:()=>v.WJ,Extensions:()=>R.F,HttpMethod:()=>p.ym,Metric:()=>y.J,PageView:()=>w.h,PageViewPerformance:()=>C.H,ProcessLegacy:()=>p.jp,PropertiesPluginIdentifier:()=>q,RemoteDependencyData:()=>I.A,RequestHeaders:()=>f.a,SampleRate:()=>p.tU,SeverityLevel:()=>E.O,TelemetryItemCreator:()=>P,ThrottleMgr:()=>d,Trace:()=>A.C,correlationIdCanIncludeCorrelationHeader:()=>n.Rs,correlationIdGetCorrelationContext:()=>n.pg,correlationIdGetCorrelationContextValue:()=>n.mD,correlationIdGetPrefix:()=>n.mp,correlationIdSetPrefix:()=>n.Wt,createDistributedTraceContextFromTrace:()=>n.Ft,createDomEvent:()=>x,createOfflineListener:()=>U.G,createTelemetryItem:()=>k,createTraceParent:()=>D.wk,dataSanitizeException:()=>_.Vt,dataSanitizeId:()=>_.HQ,dataSanitizeInput:()=>_._T,dataSanitizeKey:()=>_.lq,dataSanitizeKeyAndAddUniqueness:()=>_.zx,dataSanitizeMeasurements:()=>_.Vj,dataSanitizeMessage:()=>_.Vk,dataSanitizeProperties:()=>_.xP,dataSanitizeString:()=>_.Rr,dataSanitizeUrl:()=>_.pJ,dateTimeUtilsDuration:()=>n.jj,dateTimeUtilsNow:()=>n.lt,dsPadNumber:()=>_.qW,findAllScripts:()=>D.V5,findW3cTraceParent:()=>D.ef,formatTraceParent:()=>D.L0,getExtensionByName:()=>M.Y8,isBeaconApiSupported:()=>N.Uf,isCrossOriginError:()=>M.vv,isInternalApplicationInsightsEndpoint:()=>n.Qu,isSampledFlag:()=>D.N7,isValidSpanId:()=>D.wN,isValidTraceId:()=>D.hX,isValidTraceParent:()=>D.mJ,msToTimeSpan:()=>M.bb,parseConnectionString:()=>h.H,parseTraceParent:()=>D.ZI,strNotSpecified:()=>p.R2,stringToBoolOrDefault:()=>M.Dt,urlGetAbsoluteUrl:()=>L.wX,urlGetCompleteUrl:()=>L.k6,urlGetPathName:()=>L.Gz,urlParseFullHost:()=>L.M0,urlParseHost:()=>L.PS,urlParseUrl:()=>L.cM,utlCanUseLocalStorage:()=>u.BW,utlCanUseSessionStorage:()=>u.AN,utlDisableStorage:()=>u.Nu,utlEnableStorage:()=>u.iw,utlGetLocalStorage:()=>u.Se,utlGetSessionStorage:()=>u.vH,utlGetSessionStorageKeys:()=>u.T9,utlRemoveSessionStorage:()=>u.v7,utlRemoveStorage:()=>u.tm,utlSetLocalStorage:()=>u._M,utlSetSessionStorage:()=>u.Dt,utlSetStoragePrefix:()=>u.vh});var n=r(2318),i=r(269),o=r(3775),a=r(3673),s=r(9749),c=r(6535),u=r(4658),l=r(5130),d=function(e,t){var r,n,d,h,f,p,g,m=this,v=!1,y=!1;function w(e,t,i,o){if(v){var a=function(e){try{var t=I(e);return(0,c.Z1)(1e6)<=t.limit.samplingRate}catch(e){}return!1}(e);if(!a)return;var s=I(e),u=k(e),d=C(s,r,u),h=!1,p=0,g=P(e);try{d&&!g?(p=Math.min(s.limit.maxSendNumber,u[l.F2]+1),u[l.F2]=0,h=!0,f[e]=!0,u[l.Jm]=new Date):(f[e]=d,u[l.F2]+=1);var m=S(e);b(n,m,u);for(var y=0;y<p;y++)_(e,n,t,i)}catch(e){}return{isThrottled:h,throttleNum:p}}return o&&R(e)[l.y5]({msgID:e,message:t,severity:i}),null}function I(e){return d[e]||d[109]}function A(e,t){var r,n,o,a,s;try{var c=t||{},u={};u[l.Cx]=!!c[l.Cx];var h=c[l.zw]||{};y=(null==h?void 0:h.daysOfMonth)&&(null==h?void 0:h.daysOfMonth[l.oI])>0,u[l.zw]=(a=null===(o=(o=h)||{})||void 0===o?void 0:o.monthInterval,s=null==o?void 0:o.dayInterval,(0,i.hXl)(a)&&(0,i.hXl)(s)&&(o.monthInterval=3,y||(o[l.i9]=[28],y=!0)),o={monthInterval:null==o?void 0:o.monthInterval,dayInterval:null==o?void 0:o.dayInterval,daysOfMonth:null==o?void 0:o.daysOfMonth});var f={samplingRate:(null===(r=c.limit)||void 0===r?void 0:r.samplingRate)||100,maxSendNumber:(null===(n=c.limit)||void 0===n?void 0:n.maxSendNumber)||1};u.limit=f,d[e]=u}catch(e){}}function C(e,t,r){if(e&&!e[l.Cx]&&t&&(0,a.Gh)(r)){var n=E(),o=r[l.C9],s=e[l.zw],c=1;if(null==s?void 0:s.monthInterval){var u=12*(n.getUTCFullYear()-o.getUTCFullYear())+n.getUTCMonth()-o.getUTCMonth();c=T(s.monthInterval,0,u)}var d=1;if(y)d=(0,i.rDm)(s[l.i9],n[l.$e]());else if(null==s?void 0:s.dayInterval){var h=Math.floor((n.getTime()-o.getTime())/864e5);d=T(s.dayInterval,0,h)}return c>=0&&d>=0}return!1}function S(e,t){var r=(0,a.Gh)(t)?t:"";return e?"appInsightsThrottle"+r+"-"+e:null}function E(e){try{if(!e)return new Date;var t=new Date(e);if(!isNaN(t.getDate()))return t}catch(e){}return null}function b(e,t,r){try{return(0,u._M)(e,t,(0,i.EHq)(JSON[l.Jj](r)))}catch(e){}return!1}function T(e,t,r){return e<=0?1:r>=t&&(r-t)%e==0?Math.floor((r-t)/e)+1:-1}function _(e,t,r,n){(0,o.ZP)(t,n||1,e,r)}function k(e){try{var t=h[e];if(!t){var r=S(e,p);t=function(e,t,r){try{var n={date:E(),count:0};if(e){var i=JSON.parse(e);return{date:E(i[l.C9])||n[l.C9],count:i[l.F2]||n[l.F2],preTriggerDate:i.preTriggerDate?E(i[l.Jm]):void 0}}return b(t,r,n),n}catch(e){}return null}((0,u.Se)(n,r),n,r),h[e]=t}return h[e]}catch(e){}return null}function P(e){var t=f[e];if((0,i.hXl)(t)){t=!1;var r=k(e);r&&(t=function(e){try{if(e){var t=new Date;return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e[l.$e]()===t[l.$e]()}}catch(e){}return!1}(r[l.Jm])),f[e]=t}return f[e]}function R(e){return g=g||{},(0,i.hXl)(g[e])&&(g[e]=[]),g[e]}n=(0,o.y0)(e),f={},h={},g={},d={},A(109),p=(0,a.Gh)(t)?t:"",e.addUnloadHook((0,s.a)(e.config,function(e){var t=e.cfg;r=(0,u.BW)();var n=t.throttleMgrCfg||{};(0,i.zav)(n,function(e,t){A(parseInt(e),t)})})),m._getDbgPlgTargets=function(){return[g]},m.getConfig=function(){return d},m.canThrottle=function(e){var t=k(e);return C(I(e),r,t)},m.isTriggered=function(e){return P(e)},m.isReady=function(){return v},m.flush=function(e){try{var t=R(e);if(t&&t[l.oI]>0){var r=t.slice(0);return g[e]=[],(0,i.Iuo)(r,function(e){w(e.msgID,e[l.pM],e.severity,!1)}),!0}}catch(e){}return!1},m.flushAll=function(){try{if(g){var e=!0;return(0,i.zav)(g,function(t){var r=m.flush(parseInt(t));e=e&&r}),e}}catch(e){}return!1},m.onReadyState=function(e,t){return void 0===t&&(t=!0),(v=!!(0,i.hXl)(e)||e)&&t?m.flushAll():null},m.sendMessage=function(e,t,r){return w(e,t,r,!0)}},h=r(4484),f=r(2910),p=r(5025),g=r(1062),m=r(3072),v=r(5397),y=r(5014),w=r(1448),I=r(1365),A=r(2445),C=r(4164),S=r(7358),E=r(9762),b=function(){function e(){}return e.getConfig=function(e,t,r,n){var o;return void 0===n&&(n=!1),o=r&&e[l.up]&&e[l.up][r]&&!(0,i.hXl)(e[l.up][r][t])?e[l.up][r][t]:e[t],(0,i.hXl)(o)?n:o},e}(),T=r(8596),_=r(7975);function k(e,t,r,n,o,s){var c;r=(0,_.Rr)(n,r)||p.R2,((0,i.hXl)(e)||(0,i.hXl)(t)||(0,i.hXl)(r))&&(0,i.$8)("Input doesn't contain all required fields");var u="";e[p.ks]&&(u=e[p.ks],delete e[p.ks]);var d=((c={})[l.RS]=r,c.time=(0,a._u)(new Date),c.iKey=u,c.ext=s||{},c.tags=[],c.data={},c.baseType=t,c.baseData=e,c);return(0,i.hXl)(o)||(0,i.zav)(o,function(e,t){d.data[e]=t}),d}var P=function(){function e(){}return e.create=k,e}(),R=r(1575),O=r(7374),M=r(87),N=r(7292),D=r(1864);function x(e){var t=null;if((0,i.Tnt)(Event))t=new Event(e);else{var r=(0,i.YEm)();r&&r.createEvent&&(t=r.createEvent("Event")).initEvent(e,!0,!0)}return t}var L=r(9354),U=r(7952),q="AppInsightsPropertiesPlugin",F="AppInsightsChannelPlugin",H="ApplicationInsightsAnalytics"},836:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});var n=r(269),i=r(6182),o=r(3775);function a(){var e=[];return{add:function(t){t&&e[i.y5](t)},run:function(t,r){(0,n.Iuo)(e,function(e){try{e(t,r)}catch(e){(0,o.ZP)(t[i.e4](),2,73,"Unexpected error calling unload handler - "+(0,n.mmD)(e))}}),e=[]}}}},855:(e,t,r)=>{var n=r(6585);e.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var i=n(e);if(void 0===i)return;return Math.floor(r+i/1e3)}return"number"==typeof e?r+e:void 0}},856:(e,t,r)=>{"use strict";r.d(t,{v:()=>p});var n=r(8279),i=r(8205),o=r(269),a=r(6182),s=r(7847),c=r(3775),u=r(7292),l=r(3673),d="",h="&NoResponseBody=true",f="POST",p=function(){function e(){var t,r,p,g,m,v,y,w,I,A,C,S,E,b,T=0;(0,n.A)(e,this,function(e,n){var _=!0;function k(e,t){(0,c.ZP)(p,2,26,"Failed to send telemetry.",{message:e}),R(t,400,{})}function P(e){k("No endpoint url is provided for the batch",e)}function R(e,t,r,n){try{e&&e(t,r,n)}catch(e){}}function O(e,t){var r=(0,o.w3n)(),n=e[a.Vq];if(!n)return P(t),!0;n=e[a.Vq]+(E?h:d);var i=e[a.Cd],s=g?i:new Blob([i],{type:"text/plain;charset=UTF-8"});return r.sendBeacon(n,s)}function M(e,t,r){var n=e[a.Cd];try{if(n)if(O(e,t))R(t,200,{},d);else{var i=m&&m.beaconOnRetry;i&&(0,o.Tnt)(i)?i(e,t,O):(w&&w[a.L](e,t,!0),(0,c.ZP)(p,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(e){g&&(0,c.OG)(p,"Failed to send telemetry using sendBeacon API. Ex:"+(0,o.mmD)(e)),R(t,g?0:400,{},d)}}function N(e,r,n){var s,c,u,h=e[a.c1]||{};!n&&t&&(s=(0,i.Qo)(function(e,t){c=e,u=t})),g&&n&&e.disableXhrSync&&(n=!1);var p=e[a.Vq];if(!p)return P(r),void(c&&c(!1));var v=(0,l.H$)(f,p,_,!0,n,e[a.do]);function y(t){var n=m&&m.xhrOnComplete;if(n&&(0,o.Tnt)(n))n(t,r,e);else{var i=(0,l.Lo)(t);R(r,t[a.cV],(0,l.w3)(t,g),i)}}return g||v[a.yy]("Content-type","application/json"),(0,o.Iuo)((0,o.cGk)(h),function(e){v[a.yy](e,h[e])}),v.onreadystatechange=function(){g||(y(v),4===v.readyState&&c&&c(!0))},v.onload=function(){g&&y(v)},v.onerror=function(e){R(r,g?v[a.cV]:400,(0,l.w3)(v,g),g?d:(0,l.r4)(v)),u&&u(e)},v.ontimeout=function(){R(r,g?v[a.cV]:500,(0,l.w3)(v,g),g?d:(0,l.r4)(v)),c&&c(!1)},v.send(e[a.Cd]),s}function D(e,r,n){var c,u,l,p,v=e[a.Vq],w=e[a.Cd],I=g?w:new Blob([w],{type:"application/json"}),A=new Headers,C=w[a.oI],S=!1,k=!1,O=e[a.c1]||{},M=((c={method:f,body:I})[s.x]=!0,c);e.headers&&(0,o.cGk)(e.headers)[a.oI]>0&&((0,o.Iuo)((0,o.cGk)(O),function(e){A.append(e,O[e])}),M[a.c1]=A),y?M.credentials=y:_&&g&&(M.credentials="include"),n&&(M.keepalive=!0,T+=C,g?2===e._sendReason&&(S=!0,E&&(v+=h)):S=!0);var N=new Request(v,M);try{N[s.x]=!0}catch(e){}if(!n&&t&&(u=(0,i.Qo)(function(e,t){l=e,p=t})),!v)return P(r),void(l&&l(!1));function D(e){R(r,g?0:400,{},g?d:e)}function x(e,t,n){var i=e[a.cV],s=m.fetchOnComplete;s&&(0,o.Tnt)(s)?s(e,r,n||d,t):R(r,i,{},n||d)}try{(0,i.Dv)(fetch(g?v:N,g?M:null),function(t){if(n&&(T-=C,C=0),!k)if(k=!0,t.rejected)D(t.reason&&t.reason[a.pM]),p&&p(t.reason);else{var r=t[a.pF];try{g||r.ok?g&&!r.body?(x(r,null,d),l&&l(!0)):(0,i.Dv)(r.text(),function(t){x(r,e,t[a.pF]),l&&l(!0)}):(D(r.statusText),l&&l(!1))}catch(e){D((0,o.mmD)(e)),p&&p(e)}}})}catch(e){k||(D((0,o.mmD)(e)),p&&p(e))}return S&&!k&&(k=!0,R(r,200,{}),l&&l(!0)),g&&!k&&e[a.do]>0&&b&&b.set(function(){k||(k=!0,R(r,500,{}),l&&l(!0))},e[a.do]),u}function x(e,t,r){var n=(0,o.zkX)(),i=new XDomainRequest,s=e[a.Cd];i.onload=function(){var r=(0,l.Lo)(i),n=m&&m.xdrOnComplete;n&&(0,o.Tnt)(n)?n(i,t,e):R(t,200,{},r)},i.onerror=function(){R(t,400,{},g?d:(0,l.HU)(i))},i.ontimeout=function(){R(t,500,{})},i.onprogress=function(){};var u=n&&n.location&&n.location[a.Qg]||"",h=e[a.Vq];if(h){if(!g&&0!==h.lastIndexOf(u,0)){var v="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";return(0,c.ZP)(p,2,40,". "+v),void k(v,t)}var y=g?h:h[a.W7](/^(https?:)/,"");i.open(f,y),e[a.do]&&(i[a.do]=e[a.do]),i.send(s),g&&r?b&&b.set(function(){i.send(s)},0):i.send(s)}else P(t)}function L(){T=0,r=!1,t=!1,p=null,g=null,m=null,v=null,y=null,w=null,I=!1,A=!1,C=!1,S=!1,E=!1,b=null}L(),e[a.mE]=function(t,n){p=n,r&&(0,c.ZP)(p,1,28,"Sender is already initialized"),e.SetConfig(t),r=!0},e._getDbgPlgTargets=function(){return[r,g,v,t]},e.SetConfig=function(e){try{if(m=e.senderOnCompleteCallBack||{},v=!!e.disableCredentials,y=e.fetchCredentials,g=!!e.isOneDs,t=!!e.enableSendPromise,I=!!e.disableXhr,A=!!e.disableBeacon,C=!!e.disableBeaconSync,b=e.timeWrapper,E=!!e.addNoResponse,S=!!e.disableFetchKeepAlive,w={sendPOST:N},g||(_=!1),v){var r=(0,u.g$)();r&&r.protocol&&"file:"===r.protocol[a.OL]()&&(_=!1)}return!0}catch(e){}return!1},e.getSyncFetchPayload=function(){return T},e.getSenderInst=function(e,t){return e&&e[a.oI]?function(e,t){for(var r,n=0,i=null,o=0;null==i&&o<e[a.oI];)n=e[o],I||1!==n?2!==n||!(0,u.R7)(t)||t&&S?3!==n||!(0,u.Uf)()||(t?C:A)||(i=M):i=D:(0,u.PV)()?i=x:(0,u.xk)()&&(i=N),o++;return i?((r={_transport:n,_isSync:t})[a.L]=i,r):null}(e,t):null},e.getFallbackInst=function(){return w},e[a.tn]=function(e,t){L()}})}return e.__ieDyn=1,e}()},857:e=>{"use strict";e.exports=require("os")},909:(e,t,r)=>{const n=r(3908);e.exports=(e,t,r)=>{const i=new n(e,r),o=new n(t,r);return i.compare(o)||i.compareBuild(o)}},937:(e,t,r)=>{"use strict";r.d(t,{S:()=>i,_0:()=>a,hj:()=>o,m5:()=>n});var n="",i="https://browser.events.data.microsoft.com/OneCollector/1.0/",o="version",a="properties"},956:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ActiveStatus:()=>k.f,AppInsightsCore:()=>p,BaseTelemetryPlugin:()=>b.s,DiagnosticLogger:()=>c.wq,EventLatency:()=>v,EventPersistence:()=>w,EventPropertyType:()=>y,EventsDiscardedReason:()=>_.x,FullVersionString:()=>d.xE,InternalAppInsightsCore:()=>u._,LoggingSeverity:()=>S,MinChannelPriorty:()=>C,NotificationManager:()=>E.h,PerfEvent:()=>a.Q6,PerfManager:()=>a.NS,ProcessTelemetryContext:()=>T.W0,SenderPostManager:()=>H.v,TraceLevel:()=>I,Undefined:()=>D.bA,ValueKind:()=>m,ValueSanitizer:()=>A,Version:()=>d.Rx,_InternalLogMessage:()=>c.WD,__getRegisteredEvents:()=>P.El,_appendHeader:()=>R.LU,_getAllResponseHeaders:()=>R.w3,_logInternalMessage:()=>c.Oc,_testHookMaxUnloadHooksCb:()=>z.d,_throwInternal:()=>c.ZP,_warnToConsole:()=>c.OG,addEventHandler:()=>P.So,addEventListeners:()=>P.lQ,addPageHideEventListener:()=>P.Fc,addPageShowEventListener:()=>P.oS,addPageUnloadEventListener:()=>P.ee,areCookiesSupported:()=>x.gi,arrForEach:()=>o.Iuo,arrIndexOf:()=>o.rDm,arrMap:()=>o.W$7,arrReduce:()=>o.KTd,attachEvent:()=>P.Q3,blockDynamicConversion:()=>F.V9,convertAllHeadersToMap:()=>R.IL,cookieAvailable:()=>x.gi,createCookieMgr:()=>x.xN,createDynamicConfig:()=>s.e,createEnumStyle:()=>g.H,createGuid:()=>d.gj,createProcessTelemetryContext:()=>T.i8,createTraceParent:()=>q.wk,createUniqueNamespace:()=>L.Z,createUnloadHandlerContainer:()=>U.P,dateNow:()=>o.f0d,detachEvent:()=>P.Ym,disallowsSameSiteNone:()=>x.It,doPerf:()=>a.r2,dumpObj:()=>o.mmD,eventOff:()=>P.ML,eventOn:()=>P.mB,extend:()=>d.X$,findW3cTraceParent:()=>q.ef,forceDynamicConversion:()=>F.Hf,formatErrorMessageXdr:()=>R.HU,formatErrorMessageXhr:()=>R.r4,formatTraceParent:()=>q.L0,generateW3CId:()=>O.cL,getCommonSchemaMetaData:()=>d.Go,getConsole:()=>N.U5,getCookieValue:()=>d.UM,getCrypto:()=>N.MY,getDocument:()=>o.YEm,getDynamicConfigHandler:()=>F.QA,getExceptionName:()=>R.lL,getFieldValueType:()=>d.cq,getGlobal:()=>o.mS$,getGlobalInst:()=>o.zS2,getHistory:()=>o.JKf,getIEVersion:()=>N.L0,getISOString:()=>R._u,getJSON:()=>N.hm,getLocation:()=>N.g$,getMsCrypto:()=>N.iN,getNavigator:()=>o.w3n,getPerformance:()=>o.FJj,getResponseText:()=>R.Lo,getSetValue:()=>R.c2,getTenantId:()=>d.EO,getTime:()=>d.WB,getWindow:()=>o.zkX,hasDocument:()=>o.Wtk,hasHistory:()=>o.twz,hasJSON:()=>N.Z,hasNavigator:()=>o.w9M,hasOwnProperty:()=>o.v0u,hasWindow:()=>o.Vdv,isArray:()=>o.cyL,isArrayValid:()=>d.wJ,isBeaconsSupported:()=>N.Uf,isBoolean:()=>o.Lmq,isChromium:()=>d.F2,isDate:()=>o.$PY,isDocumentObjectAvailable:()=>d.g8,isError:()=>o.bJ7,isFetchSupported:()=>N.R7,isFunction:()=>o.Tnt,isGreaterThanZero:()=>d.ei,isIE:()=>N.lT,isLatency:()=>d.Hh,isNotTruthy:()=>o.woc,isNullOrUndefined:()=>o.hXl,isNumber:()=>o.EtT,isObject:()=>o.Gvm,isReactNative:()=>N.lV,isSampledFlag:()=>q.N7,isString:()=>o.KgX,isTruthy:()=>o.zzB,isTypeof:()=>o.Edw,isUint8ArrayAvailable:()=>d.h3,isUndefined:()=>o.b07,isValidSpanId:()=>q.wN,isValidTraceId:()=>q.hX,isValidTraceParent:()=>q.mJ,isValueAssigned:()=>d.yD,isValueKind:()=>d.m0,isWindowObjectAvailable:()=>d.P$,isXhrSupported:()=>N.xk,mergeEvtNamespace:()=>P.Hm,newGuid:()=>O.aq,newId:()=>M.Si,normalizeJsName:()=>R.cH,objDefineAccessors:()=>o.raO,objForEachKey:()=>o.zav,objFreeze:()=>o.N6t,objKeys:()=>o.cGk,objSeal:()=>o.jsL,onConfigChange:()=>s.a,openXhr:()=>d.H$,optimizeObject:()=>R.hW,parseResponse:()=>B.x,parseTraceParent:()=>q.ZI,perfNow:()=>o.UUD,prependTransports:()=>R.jL,proxyAssign:()=>R.qz,proxyFunctionAs:()=>R.RF,proxyFunctions:()=>R.o$,random32:()=>M.VN,randomValue:()=>M.Z1,removeEventHandler:()=>P.zh,removeEventListeners:()=>P.Wg,removePageHideEventListener:()=>P.sq,removePageShowEventListener:()=>P.vF,removePageUnloadEventListener:()=>P.Ds,safeGetCookieMgr:()=>x.um,safeGetLogger:()=>c.y0,sanitizeProperty:()=>d.TC,setEnableEnvMocks:()=>N.cU,setProcessTelemetryTimings:()=>d.u9,setValue:()=>R.KY,strContains:()=>R.Ju,strEndsWith:()=>o.Cv9,strFunction:()=>D.hW,strObject:()=>D._1,strPrototype:()=>D.vR,strStartsWith:()=>o.tGl,strTrim:()=>o.EHq,strUndefined:()=>D.bA,throwError:()=>o.$8,toISOString:()=>R._u,useXDomainRequest:()=>N.PV});var n=r(659),i=r(8279),o=r(269),a=r(8156),s=r(9749),c=r(3775),u=r(2774),l=r(937),d=r(4822),h=r(1739),f=(0,o.ZHX)({endpointUrl:l.S,propertyStorageOverride:{isVal:function(e){return!e||e.getProperty&&e.setProperty||(0,o.$8)("Invalid property storage override passed."),!0}}}),p=function(e){function t(){var r=e.call(this)||this;return(0,i.A)(t,r,function(e,t){e[h.mE]=function(r,n,i,u){(0,a.r2)(e,function(){return"AppInsightsCore.initialize"},function(){try{t[h.mE]((0,s.e)(r,f,i||e[h.Uw],!1).cfg,n,i,u)}catch(t){var a=e[h.Uw],l=(0,o.mmD)(t);-1!==l[h.Sj]("channels")&&(l+="\n - Channels must be provided through config.channels only!"),(0,c.ZP)(a,1,514,"SDK Initialization Failed - no telemetry will be sent: "+l)}},function(){return{config:r,extensions:n,logger:i,notificationManager:u}})},e.track=function(r){(0,a.r2)(e,function(){return"AppInsightsCore.track"},function(){var n=r;if(n){n[h.dg]=n[h.dg]||{},n[h.dg].trackStart=(0,d.WB)(),(0,d.Hh)(n.latency)||(n.latency=1);var i=n.ext=n.ext||{};i.sdk=i.sdk||{},i.sdk.ver=d.xE;var o=n.baseData=n.baseData||{};o[l._0]=o[l._0]||{};var a=o[l._0];a[l.hj]=a[l.hj]||e.pluginVersionString||l.m5}t.track(n)},function(){return{item:r}},!r.sync)},e[h.h4]=function(e){return t[h.h4](e||"InternalLog")}}),r}return(0,n.qU)(t,e),t.__ieDyn=1,t}(u._),g=r(4282),m=(0,g.H)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),v=(0,g.H)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),y=(0,g.H)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),w=(0,g.H)({Normal:1,Critical:2}),I=(0,g.H)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),A=function(){function e(e){var t=this,r={},n=[],i=[];function a(e,t){var a,s=r[e];if(s&&(a=s[t]),!a&&null!==a){if((0,o.KgX)(e)&&(0,o.KgX)(t))if(i[h.oI]>0){for(var c=0;c<i[h.oI];c++)if(i[c][h.hF](e,t)){a={canHandle:!0,fieldHandler:i[c]};break}}else 0===n[h.oI]&&(a={canHandle:!0});if(!a&&null!==a)for(a=null,c=0;c<n[h.oI];c++)if(n[c][h.hF](e,t)){a={canHandle:!0,handler:n[c],fieldHandler:null};break}s||(s=r[e]={}),s[t]=a}return a}function s(e,t,r,n,i,a){if(e.handler)return e.handler.property(t,r,i,a);if(!(0,o.hXl)(i[h.QV])){if(!(4096&~n&&(0,d.m0)(i[h.QV])))return null;i[h.pF]=i[h.pF].toString()}return u(e.fieldHandler,t,r,n,i)}function c(e,t,r){return(0,d.yD)(r)?{value:r}:null}function u(e,r,n,i,a){if(a&&e){var s=e.getSanitizer(r,n,i,a[h.QV],a.propertyType);if(s)if(4===i){var l={},f=a[h.pF];(0,o.zav)(f,function(t,i){var o=r+"."+n;if((0,d.yD)(i)){var a=c(0,0,i);(a=u(e,o,t,(0,d.cq)(i),a))&&(l[t]=a[h.pF])}}),a[h.pF]=l}else{var p={path:r,name:n,type:i,prop:a,sanitizer:t};a=s.call(t,p)}}return a}e&&i.push(e),t.clearCache=function(){r={}},t.addSanitizer=function(e){e&&((0,o.Nq2)(n,e)||n.push(e),r={})},t.addFieldSanitizer=function(e){e&&((0,o.Nq2)(i,e)||i.push(e),r={})},t[h.Rl]=function(e){if(e){var t=(0,o.rDm)(n,e);-1!==t&&(n.splice(t,1),r={}),(0,o.Iuo)(n,function(t){t&&t[h.Rl]&&t[h.Rl](e)})}},t[h.Mr]=function(e){if(e){var t=(0,o.rDm)(i,e);-1!==t&&(i.splice(t,1),r={}),(0,o.Iuo)(n,function(t){t&&t[h.Mr]&&t[h.Mr](e)})}},t.isEmpty=function(){return(0,o.R3R)(n)+(0,o.R3R)(i)===0},t[h.hF]=function(e,t){var r=a(e,t);return!!r&&r[h.nw]},t[h.pF]=function(e,t,r,n){var i=a(e,t);if(i&&i[h.nw]){if(!i||!i[h.nw])return null;if(i.handler)return i.handler[h.pF](e,t,r,n);if(!(0,o.KgX)(t)||(0,o.hXl)(r)||r===l.m5)return null;var u=null,f=(0,d.cq)(r);if(8192&~f)1!==f&&2!==f&&3!==f&&4096&~f?4===f&&(u=c(0,0,n?JSON.stringify(r):r)):u=c(0,0,r);else{var p=-8193&f;if(u=r,!(0,d.yD)(u[h.pF])||1!==p&&2!==p&&3!==p&&4096&~p)return null}if(u)return s(i,e,t,f,u,n)}return null},t.property=function(e,t,r,n){var i=a(e,t);if(!i||!i[h.nw])return null;if(!(0,o.KgX)(t)||(0,o.hXl)(r)||!(0,d.yD)(r[h.pF]))return null;var c=(0,d.cq)(r[h.pF]);return 0===c?null:s(i,e,t,c,r,n)}}return e.getFieldType=d.cq,e}(),C=100,S=(0,g.H)({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),E=r(1356),b=r(8257),T=r(2317),_=r(3662),k=r(4875),P=r(6149),R=r(3673),O=r(9882),M=r(6535),N=r(7292),D=r(5664),x=r(5034),L=r(4276),U=r(836),q=r(1864),F=r(9147),H=r(856),B=r(1190),z=r(8969)},991:(e,t,r)=>{"use strict";r.d(t,{q:()=>c});var n=r(269),i=r(6182);function o(e){return e&&(0,n.Gvm)(e)&&(e.isVal||e.fb||(0,n.KhI)(e,"v")||(0,n.KhI)(e,"mrg")||(0,n.KhI)(e,"ref")||e.set)}function a(e,t,r){var o,a=r.dfVal||n.O9V;if(t&&r.fb){var s=r.fb;(0,n.cyL)(s)||(s=[s]);for(var c=0;c<s[i.oI];c++){var u=s[c],l=t[u];if(a(l)?o=l:e&&(a(l=e.cfg[u])&&(o=l),e.set(e.cfg,(0,n.oJg)(u),l)),a(o))break}}return!a(o)&&a(r.v)&&(o=r.v),o}function s(e,t,r){var c,u=r;return r&&o(r)&&(u=a(e,t,r)),u&&(o(u)&&(u=s(e,t,u)),(0,n.cyL)(u)?(c=[])[i.oI]=u[i.oI]:(0,n.QdQ)(u)&&(c={}),c&&((0,n.zav)(u,function(r,n){n&&o(n)&&(n=s(e,t,n)),c[r]=n}),u=c)),u}function c(e,t,r,u){var l,d,h,f,p,g,m,v,y=u;o(y)?(l=y.isVal,d=y.set,g=y[i.XW],m=y[i.JQ],f=y.mrg,!(p=y.ref)&&(0,n.b07)(p)&&(p=!!f),h=a(e,t,y)):h=u,m&&e[i.JQ](t,r);var w=!0,I=t[r];!I&&(0,n.hXl)(I)||(v=I,w=!1,l&&v!==h&&!l(v)&&(v=h,w=!0),d&&(w=(v=d(v,h,t))===h)),w?v=h?s(e,t,h):h:((0,n.QdQ)(v)||(0,n.cyL)(h))&&f&&h&&((0,n.QdQ)(h)||(0,n.cyL)(h))&&(0,n.zav)(h,function(t,r){c(e,v,t,r)}),e.set(t,r,v),p&&e.ref(t,r),g&&e[i.XW](t,r)}},996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},1039:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CachedPublicClientApplicationManager=void 0;const n=r(1398),i=r(9917),o=r(8911),a=r(6942),s=r(8261);class c{_env;_pcasSecretStorage;_accountAccess;_secretStorage;_logger;_telemetryReporter;_pcas=new Map;_pcaDisposables=new Map;_disposable;_onDidAccountsChangeEmitter=new n.EventEmitter;onDidAccountsChange=this._onDidAccountsChangeEmitter.event;constructor(e,t,r,i,o,a,s){this._env=e,this._pcasSecretStorage=t,this._accountAccess=r,this._secretStorage=i,this._logger=o,this._telemetryReporter=a,this._disposable=n.Disposable.from(...s,this._registerSecretStorageHandler(),this._onDidAccountsChangeEmitter)}static async create(e,t,r,n){const i=await u.create(e,n.name),a=await i.getOldValue(),s=await o.ScopedAccountAccess.create(e,n.name,t,a),l=new c(n,i,s,e,t,r,[i,s]);return await l.initialize(),l}_registerSecretStorageHandler(){return this._pcasSecretStorage.onDidChange(()=>this._handleSecretStorageChange())}async initialize(){let e;this._logger.debug("[initialize] Initializing PublicClientApplicationManager");try{e=await this._pcasSecretStorage.get()}catch(e){this._logger.error("[initialize] Error initializing PublicClientApplicationManager:",e),await this._pcasSecretStorage.delete()}if(!e)return;const t=new Array;for(const r of e)try{t.push(this._doCreatePublicClientApplication(r))}catch(e){this._logger.error("[initialize] Error intitializing PCA:",r)}const r=await Promise.allSettled(t);let n=!1;for(const e of r)if("rejected"===e.status)this._logger.error("[initialize] Error getting PCA:",e.reason);else if(!e.value.accounts.length){n=!0;const t=e.value.clientId;this._pcaDisposables.get(t)?.dispose(),this._pcaDisposables.delete(t),this._pcas.delete(t),this._logger.debug(`[initialize] [${t}] PCA disposed because it's empty.`)}n&&await this._storePublicClientApplications(),this._logger.debug("[initialize] PublicClientApplicationManager initialized")}dispose(){this._disposable.dispose(),n.Disposable.from(...this._pcaDisposables.values()).dispose()}async getOrCreate(e,t){let r=this._pcas.get(e);if(r?this._logger.debug(`[getOrCreate] [${e}] PublicClientApplicationManager cache hit`):(this._logger.debug(`[getOrCreate] [${e}] PublicClientApplicationManager cache miss, creating new PCA...`),r=await this._doCreatePublicClientApplication(e),await this._storePublicClientApplications(),this._logger.debug(`[getOrCreate] [${e}] PCA created.`)),t?.refreshTokensToMigrate?.length){this._logger.debug(`[getOrCreate] [${e}] Migrating refresh tokens to PCA...`);const n=new URL(t.tenant,this._env.activeDirectoryEndpointUrl).toString();let i=s.DEFAULT_REDIRECT_URI;r.isBrokerAvailable&&"darwin"===process.platform&&(i=a.Config.macOSBrokerRedirectUri);for(const o of t.refreshTokensToMigrate)try{const t=await r.acquireTokenByRefreshToken({refreshToken:o,forceCache:!0,scopes:[],authority:n,redirectUri:i});t?.account&&this._logger.debug(`[getOrCreate] [${e}] Refresh token migrated to PCA.`)}catch(t){this._logger.error(`[getOrCreate] [${e}] Error migrating refresh token:`,t)}}return r}async _doCreatePublicClientApplication(e){const t=await i.CachedPublicClientApplication.create(e,this._secretStorage,this._accountAccess,this._logger,this._telemetryReporter);this._pcas.set(e,t);const r=n.Disposable.from(t,t.onDidAccountsChange(e=>this._onDidAccountsChangeEmitter.fire(e)),t.onDidRemoveLastAccount(()=>{r.dispose(),this._pcaDisposables.delete(e),this._pcas.delete(e),this._logger.debug(`[_doCreatePublicClientApplication] [${e}] PCA disposed. Firing off storing of PCAs...`),this._storePublicClientApplications()}));return this._pcaDisposables.set(e,r),t.accounts.length>0&&this._onDidAccountsChangeEmitter.fire({added:t.accounts,changed:[],deleted:[]}),t}getAll(){return Array.from(this._pcas.values())}async _handleSecretStorageChange(){let e;this._logger.debug("[_handleSecretStorageChange] Handling PCAs secret storage change...");try{e=await this._pcasSecretStorage.get()}catch(e){return void await this._storePublicClientApplications()}if(!e)return this._logger.debug("[_handleSecretStorageChange] PCAs deleted in secret storage. Disposing all..."),n.Disposable.from(...this._pcaDisposables.values()).dispose(),this._pcas.clear(),this._pcaDisposables.clear(),void this._logger.debug("[_handleSecretStorageChange] Finished PCAs secret storage change.");const t=new Set(e);for(const e of this._pcas.keys())t.delete(e)||this._logger.debug(`[_handleSecretStorageChange] PCA was deleted in another window: ${e}`);for(const e of t)try{this._logger.debug(`[_handleSecretStorageChange] [${e}] Creating new PCA that was created in another window...`),await this._doCreatePublicClientApplication(e),this._logger.debug(`[_handleSecretStorageChange] [${e}] PCA created.`)}catch(t){this._logger.error(`Failed to create new PublicClientApplication: ${e}`);continue}this._logger.debug("[_handleSecretStorageChange] Finished handling PCAs secret storage change.")}_storePublicClientApplications(){return this._pcasSecretStorage.store(Array.from(this._pcas.keys()))}}t.CachedPublicClientApplicationManager=c;class u{_secretStorage;_cloudName;_disposable;_onDidChangeEmitter=new n.EventEmitter;onDidChange=this._onDidChangeEmitter.event;_oldKey;_key;constructor(e,t){this._secretStorage=e,this._cloudName=t,this._oldKey=`publicClientApplications-${this._cloudName}`,this._key=`publicClients-${this._cloudName}`,this._disposable=n.Disposable.from(this._onDidChangeEmitter,this._secretStorage.onDidChange(e=>{e.key===this._key&&this._onDidChangeEmitter.fire()}))}static async create(e,t){const r=new u(e,t);return await r.initialize(),r}async initialize(){const e=await this.getOldValue();if(!e)return;const t=await this.get()??[];for(const{clientId:r}of e)t.includes(r)||t.push(r);await this.store(t)}async get(){const e=await this._secretStorage.get(this._key);if(e)return JSON.parse(e)}async getOldValue(){const e=await this._secretStorage.get(this._oldKey);if(!e)return;const t=[];for(const r of JSON.parse(e)){const e=JSON.parse(r);e.clientId&&e.authority&&t.push(e)}return t}store(e){return this._secretStorage.store(this._key,JSON.stringify(e))}delete(){return this._secretStorage.delete(this._key)}dispose(){this._disposable.dispose()}}},1045:(e,t,r)=>{"use strict";var n=r(181).Buffer,i=r(181).SlowBuffer;function o(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}e.exports=o,o.install=function(){n.prototype.equal=i.prototype.equal=function(e){return o(this,e)}};var a=n.prototype.equal,s=i.prototype.equal;o.restore=function(){n.prototype.equal=a,i.prototype.equal=s}},1062:(e,t,r)=>{"use strict";r.d(t,{L:()=>s});var n=r(3673),i=r(5025),o=r(5130),a=r(7975),s=function(e,t,r){var s=this,c=this;c.ver=1,c.sampleRate=100,c.tags={},c[o.RS]=(0,a.Rr)(e,r)||i.R2,c.data=t,c.time=(0,n._u)(new Date),c.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===s.sampleRate?4:1},tags:1,data:1}}},1123:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),i=t.test(r);return n&&i&&(e=+e,r=+r),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},1170:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const a=o(r(5692)),s=o(r(857)),c=o(r(1398)),u=r(5396),l=r(2468),d=r(6548),h=r(2396),f=r(8393);function p(){return{sendPOST:(e,t)=>{const r={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{const n=a.request(e.urlString,r,e=>{e.on("data",function(r){t(e.statusCode??200,e.headers,r.toString())}),e.on("error",function(){t(0,{})})});n.write(e.data,e=>{e&&t(0,{})}),n.end()}catch{t(0,{})}}}}class g extends d.BaseTelemetryReporter{constructor(e,t){let r=e=>(0,l.appInsightsClientFactory)(e,c.env.machineId,c.env.sessionId,p(),t);f.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(r=e=>(0,u.oneDataSystemClientFactory)(e,c,p()));const n={release:s.release(),platform:s.platform(),architecture:s.arch()},i=new h.BaseTelemetrySender(e,r);if(e&&0===e.indexOf("AIF-"))throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(i,c,{additionalCommonProperties:f.TelemetryUtil.getAdditionalCommonProperties(n)})}}t.default=g},1190:(e,t,r)=>{"use strict";r.d(t,{x:()=>s});var n=r(269),i=r(6182),o=r(3775),a=r(7292);function s(e,t){try{if(e&&""!==e){var r=(0,a.hm)().parse(e);if(r&&r[i.cp]&&r[i.cp]>=r.itemsAccepted&&r.itemsReceived-r.itemsAccepted===r.errors[i.oI])return r}}catch(r){(0,o.ZP)(t,1,43,"Cannot parse the response. "+(r[i.RS]||(0,n.mmD)(r)),{response:e})}return null}},1261:(e,t,r)=>{const n=r(3908),i=r(8311),o=r(5580);e.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let a=null;i.forEach(e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":a&&!o(t,a)||(a=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}),!a||r&&!o(r,a)||(r=a)}return r&&e.test(r)?r:null}},1356:(e,t,r)=>{"use strict";r.d(t,{h:()=>h});var n=r(8279),i=r(8205),o=r(269),a=r(9749),s=r(6182),c=r(6492),u={perfEvtsSendAll:!1};function l(e){e.h=null;var t=e.cb;e.cb=[],(0,o.Iuo)(t,function(e){(0,o.gBW)(e.fn,[e.arg])})}function d(e,t,r,n){(0,o.Iuo)(e,function(e){e&&e[t]&&(r?(r.cb[s.y5]({fn:n,arg:e}),r.h=r.h||(0,o.dRz)(l,0,r)):(0,o.gBW)(n,[e]))})}var h=function(){function e(t){var r,l;this.listeners=[];var h=[],f={h:null,cb:[]},p=(0,a.e)(t,u);l=p[s.x6](function(e){r=!!e.cfg.perfEvtsSendAll}),(0,n.A)(e,this,function(e){(0,o.vF1)(e,"listeners",{g:function(){return h}}),e[s.vR]=function(e){h[s.y5](e)},e[s.h3]=function(e){for(var t=(0,o.rDm)(h,e);t>-1;)h[s.Ic](t,1),t=(0,o.rDm)(h,e)},e[c.fc]=function(e){d(h,c.fc,f,function(t){t[c.fc](e)})},e[c.Yp]=function(e,t){d(h,c.Yp,f,function(r){r[c.Yp](e,t)})},e[c.dI]=function(e,t){d(h,c.dI,t?f:null,function(r){r[c.dI](e,t)})},e[c.l0]=function(e){e&&(!r&&e[s.Zu]()||d(h,c.l0,null,function(t){e[s.tI]?(0,o.dRz)(function(){return t[c.l0](e)},0):t[c.l0](e)}))},e[c.s4]=function(e){e&&e[s.oI]&&d(h,c.s4,f,function(t){t[c.s4](e)})},e[c.Vj]=function(e){e&&e[s.Cd]&&d(h,c.Vj,f,function(t){t[c.Vj](e)})},e[c.Ev]=function(e,t){if(e>0){var r=t||0;d(h,c.Ev,f,function(t){t[c.Ev](e,r)})}},e[s.M5]=function(e){var t,r=function(){l&&l.rm(),l=null,h=[],f.h&&f.h[s._w](),f.h=null,f.cb=[]};if(d(h,"unload",null,function(r){var n=r[s.M5](e);n&&(t||(t=[]),t[s.y5](n))}),t)return(0,i.Qo)(function(e){return(0,i.Dv)((0,i.Xf)(t),function(){r(),e()})});r()}})}return e.__ieDyn=1,e}()},1365:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(87),i=r(2318),o=r(5130),a=r(7975),s=function(){function e(e,t,r,s,c,u,l,d,h,f,p,g){void 0===h&&(h="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var m=this;m.ver=2,m.id=t,m[o.qd]=(0,n.bb)(c),m.success=u,m.resultCode=l+"",m.type=(0,a.Rr)(e,h);var v=(0,i._U)(e,r,d,s);m.data=(0,a.pJ)(e,s)||v.data,m.target=(0,a.Rr)(e,v.target),f&&(m.target="".concat(m.target," | ").concat(f)),m[o.RS]=(0,a.Rr)(e,v[o.RS]),m[o.$y]=(0,a.xP)(e,p),m[o.XA]=(0,a.Vj)(e,g)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}()},1398:e=>{"use strict";e.exports=require("vscode")},1448:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});var n=r(5025),i=r(87),o=r(5130),a=r(7975),s=function(){function e(e,t,r,s,c,u,l){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var d=this;d.ver=2,d.id=(0,a.HQ)(e,l),d.url=(0,a.pJ)(e,r),d[o.RS]=(0,a.Rr)(e,t)||n.R2,isNaN(s)||(d[o.qd]=(0,i.bb)(s)),d[o.$y]=(0,a.xP)(e,c),d[o.XA]=(0,a.Vj)(e,u)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}()},1525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){function o(e,o,a,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof o&&(o=(0,i.default)(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(o),c.set(e,o.length),c=r(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,a){s=s||0;for(let e=0;e<16;++e)a[s+e]=c[e];return a}return(0,n.default)(c)}try{o.name=e}catch(e){}return o.DNS=a,o.URL=s,o},t.URL=t.DNS=void 0;var n=o(r(2298)),i=o(r(2356));function o(e){return e&&e.__esModule?e:{default:e}}const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=a;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=s},1575:(e,t,r)=>{"use strict";r.d(t,{F:()=>i,O:()=>o});var n=r(8596),i={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},o=new n.o},1691:(e,t,r)=>{const n=r(1741),i=r(3726),o=r(8980),a=r(7260),s=r(855),c=r(7019),u=r(4977),l=r(5747),{KeyObject:d,createSecretKey:h,createPublicKey:f}=r(6982),p=["RS256","RS384","RS512"],g=["ES256","ES384","ES512"],m=["RS256","RS384","RS512"],v=["HS256","HS384","HS512"];u&&(p.splice(p.length,0,"PS256","PS384","PS512"),m.splice(m.length,0,"PS256","PS384","PS512")),e.exports=function(e,t,r,u){let y;if("function"!=typeof r||u||(u=r,r={}),r||(r={}),r=Object.assign({},r),y=u||function(e,t){if(e)throw e;return t},r.clockTimestamp&&"number"!=typeof r.clockTimestamp)return y(new n("clockTimestamp must be a number"));if(void 0!==r.nonce&&("string"!=typeof r.nonce||""===r.nonce.trim()))return y(new n("nonce must be a non-empty string"));if(void 0!==r.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof r.allowInvalidAsymmetricKeyTypes)return y(new n("allowInvalidAsymmetricKeyTypes must be a boolean"));const w=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return y(new n("jwt must be provided"));if("string"!=typeof e)return y(new n("jwt must be a string"));const I=e.split(".");if(3!==I.length)return y(new n("jwt malformed"));let A;try{A=a(e,{complete:!0})}catch(e){return y(e)}if(!A)return y(new n("invalid token"));const C=A.header;let S;if("function"==typeof t){if(!u)return y(new n("verify must be called asynchronous if secret or public key is provided as a callback"));S=t}else S=function(e,r){return r(null,t)};return S(C,function(t,a){if(t)return y(new n("error in secret or public key callback: "+t.message));const u=""!==I[2].trim();if(!u&&a)return y(new n("jwt signature is required"));if(u&&!a)return y(new n("secret or public key must be provided"));if(!u&&!r.algorithms)return y(new n('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=a&&!(a instanceof d))try{a=f(a)}catch(e){try{a=h("string"==typeof a?Buffer.from(a):a)}catch(e){return y(new n("secretOrPublicKey is not valid key material"))}}if(r.algorithms||("secret"===a.type?r.algorithms=v:["rsa","rsa-pss"].includes(a.asymmetricKeyType)?r.algorithms=m:"ec"===a.asymmetricKeyType?r.algorithms=g:r.algorithms=p),-1===r.algorithms.indexOf(A.header.alg))return y(new n("invalid algorithm"));if(C.alg.startsWith("HS")&&"secret"!==a.type)return y(new n(`secretOrPublicKey must be a symmetric key when using ${C.alg}`));if(/^(?:RS|PS|ES)/.test(C.alg)&&"public"!==a.type)return y(new n(`secretOrPublicKey must be an asymmetric key when using ${C.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{c(C.alg,a)}catch(e){return y(e)}let S;try{S=l.verify(e,A.header.alg,a)}catch(e){return y(e)}if(!S)return y(new n("invalid signature"));const E=A.payload;if(void 0!==E.nbf&&!r.ignoreNotBefore){if("number"!=typeof E.nbf)return y(new n("invalid nbf value"));if(E.nbf>w+(r.clockTolerance||0))return y(new i("jwt not active",new Date(1e3*E.nbf)))}if(void 0!==E.exp&&!r.ignoreExpiration){if("number"!=typeof E.exp)return y(new n("invalid exp value"));if(w>=E.exp+(r.clockTolerance||0))return y(new o("jwt expired",new Date(1e3*E.exp)))}if(r.audience){const e=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(E.aud)?E.aud:[E.aud]).some(function(t){return e.some(function(e){return e instanceof RegExp?e.test(t):e===t})}))return y(new n("jwt audience invalid. expected: "+e.join(" or ")))}if(r.issuer&&("string"==typeof r.issuer&&E.iss!==r.issuer||Array.isArray(r.issuer)&&-1===r.issuer.indexOf(E.iss)))return y(new n("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&E.sub!==r.subject)return y(new n("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&E.jti!==r.jwtid)return y(new n("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&E.nonce!==r.nonce)return y(new n("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if("number"!=typeof E.iat)return y(new n("iat required when maxAge is specified"));const e=s(r.maxAge,E.iat);if(void 0===e)return y(new n('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(w>=e+(r.clockTolerance||0))return y(new o("maxAge exceeded",new Date(1e3*e)))}if(!0===r.complete){const e=A.signature;return y(null,{header:C,payload:E,signature:e})}return y(null,E)})}},1729:(e,t,r)=>{const n=r(144);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},1739:(e,t,r)=>{"use strict";r.d(t,{Jg:()=>d,Mr:()=>p,QV:()=>u,Rl:()=>f,Sj:()=>o,Uw:()=>i,dg:()=>a,h4:()=>s,hF:()=>h,mE:()=>n,nw:()=>g,oI:()=>l,pF:()=>c});var n="initialize",i="logger",o="indexOf",a="timings",s="pollInternalLogs",c="value",u="kind",l="length",d="processTelemetryStart",h="handleField",f="rmSanitizer",p="rmFieldSanitizer",g="canHandle"},1741:e=>{var t=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};(t.prototype=Object.create(Error.prototype)).constructor=t,e.exports=t},1763:(e,t,r)=>{const n=r(560);e.exports=(e,t)=>n(e,t,!0)},1832:(e,t,r)=>{const n=r(144);e.exports=(e,t)=>{const r=n(e,null,!0),i=n(t,null,!0),o=r.compare(i);if(0===o)return null;const a=o>0,s=a?r:i,c=a?i:r,u=!!s.prerelease.length;if(c.prerelease.length&&!u)return c.patch||c.minor?s.patch?"patch":s.minor?"minor":"major":"major";const l=u?"pre":"";return r.major!==i.major?l+"major":r.minor!==i.minor?l+"minor":r.patch!==i.patch?l+"patch":"prerelease"}},1864:(e,t,r)=>{"use strict";r.d(t,{L0:()=>S,N7:()=>C,V5:()=>b,ZI:()=>y,ef:()=>E,hX:()=>w,mJ:()=>A,wN:()=>I,wk:()=>v});var n=r(269),i=r(6182),o=r(9882),a=r(7292),s=r(6492),c=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,u="00",l="ff",d="00000000000000000000000000000000",h="0000000000000000",f=1;function p(e,t,r){return!(!e||e[i.oI]!==t||e===r||!e.match(/^[\da-f]*$/i))}function g(e,t,r){return p(e,t)?e:r}function m(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[i.oI]<2;)t="0"+t;return t}function v(e,t,r,a){var s;return(s={})[i.s]=p(a,2,l)?a:u,s[i.P5]=w(e)?e:(0,o.cL)(),s[i.wi]=I(t)?t:(0,n.ZWZ)((0,o.cL)(),16),s.traceFlags=r>=0&&r<=255?r:1,s}function y(e,t){var r;if(!e)return null;if((0,n.cyL)(e)&&(e=e[0]||""),!e||!(0,n.KgX)(e)||e[i.oI]>8192)return null;if(-1!==e.indexOf(",")){var o=e[i.sY](",");e=o[t>0&&o[i.oI]>t?t:0]}var a=c.exec((0,n.EHq)(e));return a&&a[1]!==l&&a[2]!==d&&a[3]!==h?((r={version:(a[1]||s.m5)[i.OL](),traceId:(a[2]||s.m5)[i.OL](),spanId:(a[3]||s.m5)[i.OL]()})[i.Rr]=parseInt(a[4],16),r):null}function w(e){return p(e,32,d)}function I(e){return p(e,16,h)}function A(e){return!!(e&&p(e[i.s],2,l)&&p(e[i.P5],32,d)&&p(e[i.wi],16,h)&&p(m(e[i.Rr]),2))}function C(e){return!!A(e)&&(e[i.Rr]&f)===f}function S(e){if(e){var t=m(e[i.Rr]);p(t,2)||(t="01");var r=e[i.s]||u;return"00"!==r&&"ff"!==r&&(r=u),"".concat(r.toLowerCase(),"-").concat(g(e.traceId,32,d).toLowerCase(),"-").concat(g(e.spanId,16,h).toLowerCase(),"-").concat(t.toLowerCase())}return""}function E(e){var t="traceparent",r=y((0,a.$Z)(t),e);return r||(r=y((0,a.Iu)(t),e)),r}function b(e){var t=e.getElementsByTagName("script"),r=[];return(0,n.Iuo)(t,function(e){var t=e[i.NA]("src");if(t){var n=e[i.NA]("crossorigin"),o=!0===e.hasAttribute("async"),a=!0===e.hasAttribute("defer"),s=e[i.NA]("referrerpolicy"),c={url:t};n&&(c.crossOrigin=n),o&&(c.async=o),a&&(c.defer=a),s&&(c.referrerPolicy=s),r[i.y5](c)}}),r}},1977:(e,t,r)=>{const n=r(9589);e.exports=n.satisfies(process.version,">=15.7.0")},2010:(e,t,r)=>{"use strict";var n=r(2861).Buffer,i=r(3527);function o(e){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function a(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=128&&--n,n}e.exports={derToJose:function(e,t){e=o(e);var r=i(t),a=r+1,s=e.length,c=0;if(48!==e[c++])throw new Error('Could not find expected "seq"');var u=e[c++];if(129===u&&(u=e[c++]),s-c<u)throw new Error('"seq" specified length of "'+u+'", only "'+(s-c)+'" remaining');if(2!==e[c++])throw new Error('Could not find expected "int" for "r"');var l=e[c++];if(s-c-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(s-c-2)+'" available');if(a<l)throw new Error('"r" specified length of "'+l+'", max of "'+a+'" is acceptable');var d=c;if(c+=l,2!==e[c++])throw new Error('Could not find expected "int" for "s"');var h=e[c++];if(s-c!==h)throw new Error('"s" specified length of "'+h+'", expected "'+(s-c)+'"');if(a<h)throw new Error('"s" specified length of "'+h+'", max of "'+a+'" is acceptable');var f=c;if((c+=h)!==s)throw new Error('Expected to consume entire buffer, but "'+(s-c)+'" bytes remain');var p=r-l,g=r-h,m=n.allocUnsafe(p+l+g+h);for(c=0;c<p;++c)m[c]=0;e.copy(m,c,d+Math.max(-p,0),d+l);for(var v=c=r;c<v+g;++c)m[c]=0;return e.copy(m,c,f+Math.max(-g,0),f+h),(m=m.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=o(e);var r=i(t),s=e.length;if(s!==2*r)throw new TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+s+'"');var c=a(e,0,r),u=a(e,r,e.length),l=r-c,d=r-u,h=2+l+1+1+d,f=h<128,p=n.allocUnsafe((f?2:3)+h),g=0;return p[g++]=48,f?p[g++]=h:(p[g++]=129,p[g++]=255&h),p[g++]=2,p[g++]=l,c<0?(p[g++]=0,g+=e.copy(p,g,0,r)):g+=e.copy(p,g,c,r),p[g++]=2,p[g++]=d,u<0?(p[g++]=0,e.copy(p,g,r)):e.copy(p,g,r+u),p}}},2038:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeferredPromise=t.IntervalTimer=t.SequencerByKey=void 0,t.raceCancellationAndTimeoutError=function(e,t,r){return function(e,t){return new Promise((r,i)=>{const o=t.onCancellationRequested(()=>{o.dispose(),i(new n.CancellationError)});e.then(r,i).finally(()=>o.dispose())})}(function(e,t){return new Promise((r,i)=>{const o=setTimeout(()=>{i(new n.CancellationError)},t);e.then(r,i).finally(()=>clearTimeout(o))})}(e,r),t)},t.toPromise=function(e){return new Promise(t=>function(e){return(t,r=null,n)=>{let i,o=!1;return i=e(e=>{if(!o)return i?i.dispose():o=!0,t.call(r,e)},null,n),o&&i.dispose(),i}}(e)(t))};const n=r(1398);t.SequencerByKey=class{promiseMap=new Map;queue(e,t){const r=(this.promiseMap.get(e)??Promise.resolve()).catch(()=>{}).then(t).finally(()=>{this.promiseMap.get(e)===r&&this.promiseMap.delete(e)});return this.promiseMap.set(e,r),r}};class i extends n.Disposable{_token;constructor(){super(()=>this.cancel()),this._token=-1}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}t.IntervalTimer=i,t.DeferredPromise=class{completeCallback;errorCallback;outcome;get isRejected(){return 1===this.outcome?.outcome}get isResolved(){return 0===this.outcome?.outcome}get isSettled(){return!!this.outcome}get value(){return 0===this.outcome?.outcome?this.outcome?.value:void 0}p;constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new n.CancellationError)}}},2107:(e,t,r)=>{"use strict";Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return n.default}});i(r(8610)),i(r(3208));var n=i(r(4061));i(r(3358)),i(r(6348)),i(r(51)),i(r(129)),i(r(2298)),i(r(2356));function i(e){return e&&e.__esModule?e:{default:e}}},2111:(e,t,r)=>{const n=r(4641),i=r(3999),o=r(5580),a=r(4089),s=r(7059),c=r(5200);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return i(e,r,u);case">":return o(e,r,u);case">=":return a(e,r,u);case"<":return s(e,r,u);case"<=":return c(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},2203:e=>{"use strict";e.exports=require("stream")},2298:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(129))&&n.__esModule?n:{default:n};const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).substr(1));t.default=function(e,t=0){const r=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!(0,i.default)(r))throw TypeError("Stringified UUID is invalid");return r}},2317:(e,t,r)=>{"use strict";r.d(t,{PV:()=>I,W0:()=>A,i8:()=>v,nU:()=>w,tS:()=>y});var n=r(269),i=r(991),o=r(9749),a=r(6182),s=r(3775),c=r(3673),u=r(6492),l=r(8156),d=r(380),h="TelemetryPluginChain",f="_hasRun",p="_getTelCtx",g=0;function m(e,t,r,c){var l=null,d=[];t||(t=(0,o.e)({},null,r[a.Uw])),null!==c&&(l=c?function(e,t,r){for(;e;){if(e[a.AP]()===r)return e;e=e[a.uR]()}return I([r],t.config||{},t)}(e,r,c):e);var h={_next:function(){var e=l;if(l=e?e[a.uR]():null,!e){var t=d;t&&t[a.oI]>0&&((0,n.Iuo)(t,function(e){try{e.func.call(e.self,e.args)}catch(e){(0,s.ZP)(r[a.Uw],2,73,"Unexpected Exception during onComplete - "+(0,n.mmD)(e))}}),d=[])}return e},ctx:{core:function(){return r},diagLog:function(){return(0,s.y0)(r,t.cfg)},getCfg:function(){return t.cfg},getExtCfg:function(e,r){var o=f(e,!0);return r&&(0,n.zav)(r,function(e,r){if((0,n.hXl)(o[e])){var a=t.cfg[e];!a&&(0,n.hXl)(a)||(o[e]=a)}(0,i.q)(t,o,e,r)}),t[a.h0](o,r)},getConfig:function(e,r,i){void 0===i&&(i=!1);var o,a=f(e,!1),s=t.cfg;return!a||!a[r]&&(0,n.hXl)(a[r])?!s[r]&&(0,n.hXl)(s[r])||(o=s[r]):o=a[r],o||!(0,n.hXl)(o)?o:i},hasNext:function(){return!!l},getNext:function(){return l},setNext:function(e){l=e},iterate:function(e){for(var t;t=h._next();){var r=t[a.AP]();r&&e(r)}},onComplete:function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];e&&d[a.y5]({func:e,self:(0,n.b07)(t)?h.ctx:t,args:r})}}};function f(e,r){var n=null,i=t.cfg;if(i&&e){var o=i[u.Bw];!o&&r&&(o={}),i[u.Bw]=o,(o=t.ref(i,u.Bw))&&(!(n=o[e])&&r&&(n={}),o[e]=n,n=t.ref(o,e))}return n}return h}function v(e,t,r,i){var s=(0,o.e)(t),c=m(e,s,r,i),l=c.ctx;return l[a.$5]=function(e){var t=c._next();return t&&t[u.qT](e,l),!t},l[a.$o]=function(e,t){return void 0===e&&(e=null),(0,n.cyL)(e)&&(e=I(e,s.cfg,r,t)),v(e||l[a.uR](),s.cfg,r,t)},l}function y(e,t,r){var i=(0,o.e)(t.config),s=m(e,i,t,r),c=s.ctx;return c[a.$5]=function(e){var t=s._next();return t&&t[a.M5](c,e),!t},c[a.$o]=function(e,r){return void 0===e&&(e=null),(0,n.cyL)(e)&&(e=I(e,i.cfg,t,r)),y(e||c[a.uR](),t,r)},c}function w(e,t,r){var i=(0,o.e)(t.config),s=m(e,i,t,r).ctx;return s[a.$5]=function(e){return s.iterate(function(t){(0,n.Tnt)(t[a.HC])&&t[a.HC](s,e)})},s[a.$o]=function(e,r){return void 0===e&&(e=null),(0,n.cyL)(e)&&(e=I(e,i.cfg,t,r)),w(e||s[a.uR](),t,r)},s}function I(e,t,r,i){var o=null,c=!i;if((0,n.cyL)(e)&&e[a.oI]>0){var m=null;(0,n.Iuo)(e,function(e){if(c||i!==e||(c=!0),c&&e&&(0,n.Tnt)(e[u.qT])){var y=function(e,t,r){var i,o=null,c=(0,n.Tnt)(e[u.qT]),m=(0,n.Tnt)(e[a.YH]),y={getPlugin:function(){return e},getNext:function(){return o},processTelemetry:function(i,s){w(s=s||function(){var i;return e&&(0,n.Tnt)(e[p])&&(i=e[p]()),i||(i=v(y,t,r)),i}(),function(t){if(!e||!c)return!1;var r=(0,d.Cr)(e);return!r[a.Ik]&&!r[u.Hr]&&(m&&e[a.YH](o),e[u.qT](i,t),!0)},"processTelemetry",function(){return{item:i}},!i.sync)||s[a.$5](i)},unload:function(t,r){w(t,function(){var n=!1;if(e){var i=(0,d.Cr)(e),o=e[u.eT]||i[u.eT];!e||o&&o!==t.core()||i[a.Ik]||(i[u.eT]=null,i[a.Ik]=!0,i[a.tZ]=!1,e[a.Ik]&&!0===e[a.Ik](t,r)&&(n=!0))}return n},"unload",function(){},r[a.tI])||t[a.$5](r)},update:function(t,r){w(t,function(){var n=!1;if(e){var i=(0,d.Cr)(e),o=e[u.eT]||i[u.eT];!e||o&&o!==t.core()||i[a.Ik]||e[a.HC]&&!0===e[a.HC](t,r)&&(n=!0)}return n},"update",function(){},!1)||t[a.$5](r)},_id:i=e?e[a.Ju]+"-"+e[u.Vo]+"-"+g++:"Unknown-0-"+g++,_setNext:function(e){o=e}};function w(t,r,c,d,p){var g=!1,m=e?e[a.Ju]:h,v=t[f];return v||(v=t[f]={}),t.setNext(o),e&&(0,l.r2)(t[u.eT](),function(){return m+":"+c},function(){v[i]=!0;try{var e=o?o._id:u.m5;e&&(v[e]=!1),g=r(t)}catch(e){var l=!o||v[o._id];l&&(g=!0),o&&l||(0,s.ZP)(t[a.e4](),1,73,"Plugin ["+m+"] failed during "+c+" - "+(0,n.mmD)(e)+", run flags: "+(0,n.mmD)(v))}},d,p),g}return(0,n.N6t)(y)}(e,t,r);o||(o=y),m&&m._setNext(y),m=y}})}return i&&!o?I([i],t,r):o}var A=function(e,t,r,i){var o=v(e,t,r,i);(0,c.o$)(this,o,(0,n.cGk)(o))}},2318:(e,t,r)=>{"use strict";r.d(t,{Ft:()=>A,Qu:()=>h,Rs:()=>g,Wt:()=>f,_U:()=>y,jj:()=>I,lt:()=>w,mD:()=>v,mp:()=>p,pg:()=>m});var n=r(269),i=r(1864),o=r(5025),a=r(2910),s=r(7975),c=r(9354),u=r(5130),l=[o._G+o.wc,"https://breeze.aimon.applicationinsights.io"+o.wc,"https://dc-int.services.visualstudio.com"+o.wc],d="cid-v1:";function h(e){return-1!==(0,n.rDm)(l,e[u.OL]())}function f(e){d=e}function p(){return d}function g(e,t,r){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e[u.Ol])for(var i=0;i<e.correlationHeaderExcludePatterns[u.oI];i++)if(e[u.Ol][i].test(t))return!1;var o=(0,c.cM)(t).host[u.OL]();if(!o||-1===(0,n.HzD)(o,":443")&&-1===(0,n.HzD)(o,":80")||(o=((0,c.M0)(t,!0)||"")[u.OL]()),(!e||!e.enableCorsCorrelation)&&o&&o!==r)return!1;var a,s=e&&e.correlationHeaderDomains;if(s&&((0,n.Iuo)(s,function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));a=a||t.test(o)}),!a))return!1;var l=e&&e.correlationHeaderExcludedDomains;if(!l||0===l[u.oI])return!0;for(i=0;i<l[u.oI];i++)if(new RegExp(l[i].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(o))return!1;return o&&o[u.oI]>0}function m(e){if(e){var t=v(e,a.a[1]);if(t&&t!==d)return t}}function v(e,t){if(e)for(var r=e[u.sY](","),n=0;n<r[u.oI];++n){var i=r[n][u.sY]("=");if(2===i[u.oI]&&i[0]===t)return i[1]}}function y(e,t,r,n){var i,o=n,a=n;if(t&&t[u.oI]>0){var l=(0,c.cM)(t);if(i=l.host,!o)if(null!=l[u.Ue]){var d=0===l.pathname[u.oI]?"/":l[u.Ue];"/"!==d.charAt(0)&&(d="/"+d),a=l[u.Ue],o=(0,s.Rr)(e,r?r+" "+d:d)}else o=(0,s.Rr)(e,t)}else i=n,o=n;return{target:i,name:o,data:a}}function w(){var e=(0,n.FJj)();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return(0,n.f0d)()}function I(e,t){var r=null;return 0===e||0===t||(0,n.hXl)(e)||(0,n.hXl)(t)||(r=t-e),r}function A(e,t){var r=e||{};return{getName:function(){return r[u.RS]},setName:function(e){t&&t.setName(e),r[u.RS]=e},getTraceId:function(){return r.traceID},setTraceId:function(e){t&&t.setTraceId(e),(0,i.hX)(e)&&(r.traceID=e)},getSpanId:function(){return r.parentID},setSpanId:function(e){t&&t.setSpanId(e),(0,i.wN)(e)&&(r.parentID=e)},getTraceFlags:function(){return r.traceFlags},setTraceFlags:function(e){t&&t.setTraceFlags(e),r.traceFlags=e}}}},2356:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(129))&&n.__esModule?n:{default:n};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}},2396:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetrySender=void 0,function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"}(r||(r={})),t.BaseTelemetrySender=class{constructor(e,t){this._instantiationStatus=r.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}sendEventData(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):this._instantiationStatus!==r.INSTANTIATED&&this._eventQueue.push({eventName:e,data:t})}sendErrorData(e,t){if(!this._telemetryClient)return void(this._instantiationStatus!==r.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:t}));const n={stack:e.stack,message:e.message,name:e.name};if(t){const e=t.properties||t;t.properties={...e,...n}}else t={properties:n};this._telemetryClient.logEvent("unhandlederror",t)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:t})=>this.sendEventData(e,t)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:t})=>this.sendErrorData(e,t)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===r.NOT_INSTANTIATED&&(this._instantiationStatus=r.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=r.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=r.INSTANTIATED}))}}},2445:(e,t,r)=>{"use strict";r.d(t,{C:()=>a});var n=r(5025),i=r(5130),o=r(7975),a=function(){function e(e,t,r,a,s){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var c=this;c.ver=2,t=t||n.R2,c[i.pM]=(0,o.Vk)(e,t),c[i.$y]=(0,o.xP)(e,a),c[i.XA]=(0,o.Vj)(e,s),r&&(c[i.Ur]=r)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}()},2468:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.appInsightsClientFactory=void 0;const a=r(740),s=r(8393);t.appInsightsClientFactory=async(e,t,n,i,c)=>{let u;try{const t=await Promise.resolve().then(()=>o(r(5927))),n={};if(i){const e={alwaysUseXhrOverride:!0,httpXHROverride:i};n[a.BreezeChannelIdentifier]=e}let s;e.startsWith("InstrumentationKey=")||(s=e);const c=s?{instrumentationKey:s}:{connectionString:e};u=new t.ApplicationInsights({...c,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:n})}catch(e){return Promise.reject(e)}return{logEvent:(e,r)=>{const i={...r?.properties,...r?.measurements};c?.length&&s.TelemetryUtil.applyReplacements(i,c),u?.track({name:e,data:i,baseType:"EventData",ext:{user:{id:t,authId:t},app:{sesId:n}},baseData:{name:e,properties:r?.properties,measurements:r?.measurements}})},flush:async()=>{u?.flush(!1)},dispose:async()=>new Promise(e=>{u?.unload(!0,()=>{e(),u=void 0},1e3)})}}},2475:(e,t,r)=>{"use strict";r.d(t,{DD:()=>c,Lx:()=>s,NU:()=>a});var n=r(269),i=r(6182);function o(e,t,r){return!e&&(0,n.hXl)(e)?t:(0,n.Lmq)(e)?e:"true"===(0,n.oJg)(e)[i.OL]()}function a(e){return{mrg:!0,v:e}}function s(e,t,r){return{fb:r,isVal:e,v:t}}function c(e,t){return{fb:t,set:o,v:!!e}}},2525:(e,t,r)=>{const n=r(7638),i=r(560);e.exports=(e,t,r)=>{const o=[];let a=null,s=null;const c=e.sort((e,t)=>i(e,t,r));for(const e of c)n(e,t,r)?(s=e,a||(a=e)):(s&&o.push([a,s]),s=null,a=null);a&&o.push([a,null]);const u=[];for(const[e,t]of o)e===t?u.push(e):t||e!==c[0]?t?e===c[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const l=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return l.length<d.length?l:t}},2774:(e,t,r)=>{"use strict";r.d(t,{_:()=>N});var n,i=r(659),o=r(8279),a=r(8205),s=r(269),c=r(9749),u=r(4875),l=r(6182),d=r(4013),h=r(7847),f=r(5034),p=r(4276),g=r(7867),m=r(3775),v=r(3673),y=r(6492),w=r(1356),I=r(8156),A=r(2317),C=r(380),S=function(e){function t(){var r,n,i=e.call(this)||this;function a(){r=0,n=[]}return i.identifier="TelemetryInitializerPlugin",i.priority=199,a(),(0,o.A)(t,i,function(e,t){e.addTelemetryInitializer=function(e){return function(e,t,r){var n={id:t,fn:r};return(0,s.Yny)(e,n),{remove:function(){(0,s.Iuo)(e,function(t,r){if(t.id===n.id)return e[l.Ic](r,1),-1})}}}(n,r++,e)},e[y.qT]=function(t,r){(function(e,t,r){for(var n=!1,i=e[l.oI],o=0;o<i;++o){var a=e[o];if(a)try{if(!1===a.fn[l.y9](null,[t])){n=!0;break}}catch(e){(0,m.ZP)(r,2,64,"Telemetry initializer failed: "+(0,v.lL)(e),{exception:(0,s.mmD)(e)},!0)}}return!n})(n,t,r?r[l.e4]():e[l.e4]())&&e[l.$5](t,r)},e[l.tn]=function(){a()}}),i}return(0,i.qU)(t,e),t.__ieDyn=1,t}(r(8257).s),E=r(836),b=r(8969),T="Plugins must provide initialize method",_="SDK is still unloading...",k=(0,s.ZHX)(((n={cookieCfg:{}})[y.jy]={rdOnly:!0,ref:!0,v:[]},n[y.LZ]={rdOnly:!0,ref:!0,v:[]},n[y.Bw]={ref:!0,v:{}},n[y.Yd]=y.HP,n.loggingLevelConsole=0,n.diagnosticLogInterval=y.HP,n));function P(e,t){return new I.NS(t)}function R(e,t){var r=!1;return(0,s.Iuo)(t,function(t){if(t===e)return r=!0,-1}),r}function O(e,t,r,n){r&&(0,s.zav)(r,function(r,i){n&&(0,s.QdQ)(i)&&(0,s.QdQ)(t[r])&&O(e,t[r],i,n),n&&(0,s.QdQ)(i)&&(0,s.QdQ)(t[r])?O(e,t[r],i,n):e.set(t,r,i)})}function M(e,t){var r=null,n=-1;return(0,s.Iuo)(e,function(e,i){if(e.w===t)return r=e,n=i,-1}),{i:n,l:r}}var N=function(){function e(){var t,r,n,N,D,x,L,U,q,F,H,B,z,j,$,V,K,G,W,X,Y,Q,J,Z,ee,te,re,ne,ie,oe,ae,se;(0,o.A)(e,this,function(e){function o(){ie=!0,(0,s.hXl)(Y)?(te=u.f[l.Yq],(0,m.ZP)(n,1,112,"ikey can't be resolved from promises")):te=u.f.ACTIVE,ce()}function ce(){r&&(e.releaseQueue(),e[l.h4]())}function ue(e){return oe&&oe[l.XM]||se||(e||n&&n.queue[l.oI]>0)&&(ae||(ae=!0,Ce(t[l.x6](function(e){var t=e.cfg.diagnosticLogInterval;t&&t>0||(t=1e4);var r=!1;oe&&(r=oe[l.XM],oe[l._w]()),(oe=(0,s.AHH)(ve,t)).unref(),oe[l.XM]=r}))),oe[l.XM]=!0),oe}function le(){var e={};Z=[];var t=function(t){t&&(0,s.Iuo)(t,function(t){if(t[l.Ju]&&t[l.s]&&!e[t.identifier]){var r=t[l.Ju]+"="+t[l.s];Z[l.y5](r),e[t.identifier]=t}})};t(B),H&&(0,s.Iuo)(H,function(e){t(e)}),t(F)}function de(){r=!1,(t=(0,c.e)({},k,e[l.Uw])).cfg[l.Bl]=1,(0,s.vF1)(e,"config",{g:function(){return t.cfg},s:function(t){e.updateCfg(t,!1)}}),(0,s.vF1)(e,"pluginVersionStringArr",{g:function(){return Z||le(),Z}}),(0,s.vF1)(e,"pluginVersionString",{g:function(){return ee||(Z||le(),ee=Z.join(";")),ee||y.m5}}),(0,s.vF1)(e,"logger",{g:function(){return n||(n=new m.wq(t.cfg),t[l.Uw]=n),n},s:function(e){t[l.Uw]=e,n!==e&&((0,d.K)(n,!1),n=e)}}),e[l.Uw]=new m.wq(t.cfg),J=[];var i=e.config[y.jy]||[];i.splice(0,i[l.oI]),(0,s.Yny)(i,J),j=new S,N=[],(0,d.K)(D,!1),D=null,x=null,L=null,(0,d.K)(U,!1),U=null,q=null,F=[],H=null,B=null,z=!1,$=null,V=(0,p.Z)("AIBaseCore",!0),K=(0,E.P)(),X=null,Y=null,G=(0,b.w)(),Q=[],ee=null,Z=null,se=!1,oe=null,ae=!1,te=0,re=null,ne=null,ie=!1}function he(){var r=(0,A.i8)(ge(),t.cfg,e);return r[l.by](ue),r}function fe(t){var r=function(e,t,r){var n,i=[],o=[],a={};return(0,s.Iuo)(r,function(r){((0,s.hXl)(r)||(0,s.hXl)(r[l.mE]))&&(0,s.$8)(T);var n=r[y.Vo],c=r[l.Ju];r&&n&&((0,s.hXl)(a[n])?a[n]=c:(0,m.OG)(e,"Two extensions have same priority #"+n+" - "+a[n]+", "+c)),!n||n<t?i[l.y5](r):o[l.y5](r)}),(n={})[y.eT]=i,n[y.LZ]=o,n}(e[l.Uw],h.i,F);q=null,ee=null,Z=null,B=(H||[])[0]||[],B=(0,C.Xc)((0,s.Yny)(B,r[y.LZ]));var n=(0,s.Yny)((0,C.Xc)(r[y.eT]),B);J=(0,s.N6t)(n);var i=e.config[y.jy]||[];i.splice(0,i[l.oI]),(0,s.Yny)(i,J);var o=he();B&&B[l.oI]>0&&(0,C.pI)(o[l.$o](B),n),(0,C.pI)(o,n),t&&we(t)}function pe(e){var t=null,r=null,n=[];return(0,s.Iuo)(J,function(t){if(t[l.Ju]===e&&t!==j)return r=t,-1;t.getChannel&&n[l.y5](t)}),!r&&n[l.oI]>0&&(0,s.Iuo)(n,function(t){if(!(r=t.getChannel(e)))return-1}),r&&(t={plugin:r,setEnabled:function(e){(0,C.Cr)(r)[y.Hr]=!e},isEnabled:function(){var e=(0,C.Cr)(r);return!e[l.Ik]&&!e[y.Hr]},remove:function(e,t){var n;void 0===e&&(e=!0);var i=[r],o=((n={reason:1})[l.tI]=e,n);me(i,o,function(e){e&&fe({reason:32,removed:i}),t&&t(e)})}}),t}function ge(){if(!q){var r=(J||[]).slice();-1===(0,s.rDm)(r,j)&&r[l.y5](j),q=(0,A.PV)((0,C.Xc)(r),t.cfg,e)}return q}function me(r,n,i){if(r&&r[l.oI]>0){var o=(0,A.PV)(r,t.cfg,e),a=(0,A.tS)(o,e);a[l.by](function(){var e=!1,t=[];(0,s.Iuo)(F,function(n,i){R(n,r)?e=!0:t[l.y5](n)}),F=t,ee=null,Z=null;var n=[];H&&((0,s.Iuo)(H,function(t,i){var o=[];(0,s.Iuo)(t,function(t){R(t,r)?e=!0:o[l.y5](t)}),n[l.y5](o)}),H=n),i&&i(e),ue()}),a[l.$5](n)}else i(!1)}function ve(){if(n&&n.queue){var t=n.queue.slice(0);n.queue[l.oI]=0,(0,s.Iuo)(t,function(t){var r,n=((r={})[l.RS]=$||"InternalMessageId: "+t[l.JR],r[l.FI]=Y,r[l.fA]=(0,v._u)(new Date),r.baseType=m.WD.dataType,r.baseData={message:t[l.pM]},r);e.track(n)})}}function ye(e,t,r,n){var i=1,o=!1,a=null;function c(){i--,o&&0===i&&(a&&a[l._w](),a=null,t&&t(o),t=null)}return n=n||5e3,B&&B[l.oI]>0&&he()[l.$o](B).iterate(function(t){if(t.flush){i++;var o=!1;t.flush(e,function(){o=!0,c()},r)||o||(e&&null==a?a=(0,s.dRz)(function(){a=null,c()},n):c())}}),o=!0,c(),!0}function we(t){var r=(0,A.nU)(ge(),e);r[l.by](ue),e._updateHook&&!0===e._updateHook(r,t)||r[l.$5](t)}function Ie(t){var r=e[l.Uw];r?((0,m.ZP)(r,2,73,t),ue()):(0,s.$8)(t)}function Ae(t){var r=e[l.RF]();r&&r[y.Yp]([t],2)}function Ce(e){G.add(e)}de(),e._getDbgPlgTargets=function(){return[J,N]},e[l.tZ]=function(){return r},e.activeStatus=function(){return te},e._setPendingStatus=function(){te=3},e[l.mE]=function(d,h,f,p){var w;z&&(0,s.$8)(_),e[l.tZ]()&&(0,s.$8)("Core cannot be initialized more than once"),t=(0,c.e)(d,k,f||e[l.Uw],!1),d=t.cfg,Ce(t[l.x6](function(e){var t=e.cfg;if(3!==te){ne=t.initInMemoMaxSize||100;var i=t[l.sl],c=t.endpointUrl;if((0,s.hXl)(i)){Y=null,te=u.f[l.Yq];var h="Please provide instrumentation key";r?((0,m.ZP)(n,1,100,h),ce()):(0,s.$8)(h)}else{var f=[];if((0,s.$XS)(i)?(f[l.y5](i),Y=null):Y=i,(0,s.$XS)(c)?(f[l.y5](c),re=null):re=c,f[l.oI]){ie=!1,te=3;var p=(0,v.Gh)(t.initTimeOut)?t.initTimeOut:5e4,g=(0,a.lh)(f);(0,s.dRz)(function(){ie||o()},p),(0,a.Dv)(g,function(e){try{if(ie)return;if(!e.rejected){var t=e[l.pF];if(t&&t[l.oI]){var r=t[0];if(Y=r&&r[l.pF],t[l.oI]>1){var n=t[1];re=n&&n[l.pF]}}Y&&(d[l.sl]=Y,d.endpointUrl=re)}o()}catch(e){ie||o()}})}else o();var w=e.ref(e.cfg,y.Bw);(0,s.zav)(w,function(t){e.ref(w,t)})}}})),W=function(e,t,r,n){return t.add(e[l.x6](function(e){var t=e.cfg.disableDbgExt;!0===t&&n&&(r[l.h3](n),n=null),r&&!n&&!0!==t&&(n=(0,g.M)(e.cfg),r[l.vR](n))})),n}(t,G,(D=p)&&e[l.RF](),W),Ce(t[l.x6](function(t){if(t.cfg.enablePerfMgr){var r=t.cfg[y.Yd];w===r&&w||(r||(r=P),(0,v.c2)(t.cfg,y.Yd,r),w=r,L=null),x||L||!(0,s.Tnt)(r)||(L=r(e,e[l.RF]()))}else L=null,w=null})),e[l.Uw]=f;var I=d[y.jy];if((F=[])[l.y5].apply(F,(0,i.vz)((0,i.vz)([],h,!1),I,!1)),H=d[y.LZ],fe(null),B&&0!==B[l.oI]||(0,s.$8)("No "+y.LZ+" available"),H&&H[l.oI]>1){var A=e[l.AP]("TeeChannelController");A&&A.plugin||(0,m.ZP)(n,1,28,"TeeChannel required")}!function(e,t,r){(0,s.Iuo)(t,function(t){var n=(0,c.a)(e,t.w,r);delete t.w,t.rm=function(){n.rm()}})}(d,Q,n),Q=null,r=!0,te===u.f.ACTIVE&&ce()},e.getChannels=function(){var e=[];return B&&(0,s.Iuo)(B,function(t){e[l.y5](t)}),(0,s.N6t)(e)},e.track=function(t){(0,I.r2)(e[y.kI](),function(){return"AppInsightsCore:track"},function(){null===t&&(Ae(t),(0,s.$8)("Invalid telemetry item")),!t[l.RS]&&(0,s.hXl)(t[l.RS])&&(Ae(t),(0,s.$8)("telemetry name required")),t[l.FI]=t[l.FI]||Y,t[l.fA]=t[l.fA]||(0,v._u)(new Date),t.ver=t.ver||"4.0",!z&&e[l.tZ]()&&te===u.f.ACTIVE?he()[l.$5](t):te!==u.f[l.Yq]&&N[l.oI]<=ne&&N[l.y5](t)},function(){return{item:t}},!t.sync)},e[l.DI]=he,e[l.RF]=function(){return D||(D=new w.h(t.cfg),e._notificationManager=D),D},e[l.vR]=function(t){e.getNotifyMgr()[l.vR](t)},e[l.h3]=function(e){D&&D[l.h3](e)},e.getCookieMgr=function(){return U||(U=(0,f.xN)(t.cfg,e[l.Uw])),U},e.setCookieMgr=function(e){U!==e&&((0,d.K)(U,!1),U=e)},e[y.kI]=function(){return x||L||(0,I.Z4)()},e.setPerfMgr=function(e){x=e},e.eventCnt=function(){return N[l.oI]},e.releaseQueue=function(){if(r&&N[l.oI]>0){var e=N;N=[],2===te?(0,s.Iuo)(e,function(e){e[l.FI]=e[l.FI]||Y,he()[l.$5](e)}):(0,m.ZP)(n,2,20,"core init status is not active")}},e[l.h4]=function(e){return $=e||null,se=!1,oe&&oe[l._w](),ue(!0)},e[l.Di]=function(){se=!0,oe&&oe[l._w](),ve()},(0,v.o$)(e,function(){return j},["addTelemetryInitializer"]),e[l.M5]=function(t,i,o){var c;void 0===t&&(t=!0),r||(0,s.$8)("SDK is not initialized"),z&&(0,s.$8)(_);var u,h=((c={reason:50})[l.tI]=t,c.flushComplete=!1,c);t&&!i&&(u=(0,a.Qo)(function(e){i=e}));var f=(0,A.tS)(ge(),e);function p(t){h.flushComplete=t,z=!0,K.run(f,h),e[l.Di](),f[l.$5](h)}return f[l.by](function(){G.run(e[l.Uw]),(0,d.k)([U,D,n],t,function(){de(),i&&i(h)})},e),ve(),ye(t,p,6,o)||p(!1),u},e[l.AP]=pe,e.addPlugin=function(e,t,r,n){if(!e)return n&&n(!1),void Ie(T);var i=pe(e[l.Ju]);if(i&&!t)return n&&n(!1),void Ie("Plugin ["+e[l.Ju]+"] is already loaded!");var o={reason:16};function a(t){F[l.y5](e),o.added=[e],fe(o),n&&n(!0)}if(i){var s=[i.plugin];me(s,{reason:2,isAsync:!!r},function(e){e?(o.removed=s,o.reason|=32,a()):n&&n(!1)})}else a()},e.updateCfg=function(r,n){var i;if(void 0===n&&(n=!0),e[l.tZ]()){i={reason:1,cfg:t.cfg,oldCfg:(0,s.zwS)({},t.cfg),newConfig:(0,s.zwS)({},r),merge:n},r=i.newConfig;var o=t.cfg;r[y.jy]=o[y.jy],r[y.LZ]=o[y.LZ]}t._block(function(e){var t=e.cfg;O(e,t,r,n),n||(0,s.zav)(t,function(n){(0,s.KhI)(r,n)||e.set(t,n,y.HP)}),e[l.h0](t,k)},!0),t[l.zs](),i&&we(i)},e.evtNamespace=function(){return V},e.flush=ye,e.getTraceCtx=function(e){return X||(X=(0,C.u7)()),X},e.setTraceCtx=function(e){X=e||null},e.addUnloadHook=Ce,(0,v.RF)(e,"addUnloadCb",function(){return K},"add"),e.onCfgChange=function(n){var i,o,a,u;return r?i=(0,c.a)(t.cfg,n,e[l.Uw]):((u=M(o=Q,a=n).l)||(u={w:a,rm:function(){var e=M(o,a);-1!==e.i&&o[l.Ic](e.i,1)}},o[l.y5](u)),i=u),function(e){return(0,s.vF1)({rm:function(){e.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(e)+">"}})}(i)},e.getWParam=function(){return(0,s.Wtk)()||t.cfg.enableWParam?0:-1}})}return e.__ieDyn=1,e}()},2851:(e,t,r)=>{var n=r(181).Buffer;e.exports=function(e){return"string"==typeof e?e:"number"==typeof e||n.isBuffer(e)?e.toString():JSON.stringify(e)}},2861:(e,t,r)=>{var n=r(181),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},2910:(e,t,r)=>{"use strict";r.d(t,{a:()=>n});var n=(0,r(4282).o)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})},2938:(e,t,r)=>{const n=r(3908);e.exports=(e,t)=>new n(e,t).major},3007:(e,t,r)=>{const n=r(3908);e.exports=(e,t,r,i,o)=>{"string"==typeof r&&(o=i,i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i,o).version}catch(e){return null}}},3072:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});var n=r(5025),i=r(5130),o=r(7975),a=function(){function e(e,t,r,a){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var s=this;s.ver=2,s[i.RS]=(0,o.Rr)(e,t)||n.R2,s[i.$y]=(0,o.xP)(e,r),s[i.XA]=(0,o.Vj)(e,a)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}()},3178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UriHandlerLoopbackClient=void 0;const n=r(1398),i=r(2038);t.UriHandlerLoopbackClient=class{_uriHandler;_redirectUri;_callbackUri;_logger;constructor(e,t,r,n){this._uriHandler=e,this._redirectUri=t,this._callbackUri=r,this._logger=n}async listenForAuthCode(){const e=await(0,i.toPromise)(this._uriHandler.event);this._logger.debug(`Received URL event. Authority: ${e.authority}`);const t=new URL(e.toString(!0));return{code:t.searchParams.get("code")??void 0,state:t.searchParams.get("state")??void 0,error:t.searchParams.get("error")??void 0,error_description:t.searchParams.get("error_description")??void 0,error_uri:t.searchParams.get("error_uri")??void 0}}getRedirectUri(){return this._redirectUri}closeServer(){}async openBrowser(e){const t=n.Uri.parse(e+`&state=${encodeURI(this._callbackUri.toString(!0))}`);await n.env.openExternal(t)}}},3208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(1525)),i=o(r(8435));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v3",48,i.default);t.default=a},3358:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(1525)),i=o(r(622));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v5",80,i.default);t.default=a},3387:(e,t,r)=>{var n=r(2861).Buffer,i=r(8948),o=r(8789),a=r(2203),s=r(2851),c=r(9023);function u(e,t){return n.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(e){var t=e.header,r=e.payload,n=e.secret||e.privateKey,i=e.encoding,a=o(t.alg),l=function(e,t,r){r=r||"utf8";var n=u(s(e),"binary"),i=u(s(t),r);return c.format("%s.%s",n,i)}(t,r,i),d=a.sign(l,n);return c.format("%s.%s",l,d)}function d(e){var t=e.secret||e.privateKey||e.key,r=new i(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new i(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}c.inherits(d,a),d.prototype.sign=function(){try{var e=l({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},d.sign=l,e.exports=d},3527:e=>{"use strict";function t(e){return(e/8|0)+(e%8==0?0:1)}var r={ES256:t(256),ES384:t(384),ES512:t(521)};e.exports=function(e){var t=r[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}},3639:e=>{var t=Object.prototype.toString;e.exports=function(e){return"number"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Number]"==t.call(e)}},3662:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});var n=r(4282),i=(0,n.H)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5});(0,n.H)({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})},3673:(e,t,r)=>{"use strict";r.d(t,{CP:()=>S,Gh:()=>l,H$:()=>O,HU:()=>b,IL:()=>M,Ju:()=>h,KY:()=>g,LU:()=>N,Lo:()=>E,RF:()=>w,SZ:()=>A,_u:()=>f,c2:()=>m,cH:()=>d,hW:()=>C,jL:()=>_,lL:()=>p,o$:()=>I,qz:()=>y,r4:()=>T,w3:()=>U});var n=r(269),i=r(5664),o=r(6182),a=r(6492),s=/-([a-z])/g,c=/([^\w\d_$])/g,u=/^(\d+[\w\d_$])/;function l(e){return!(0,n.hXl)(e)}function d(e){var t=e;return t&&(0,n.KgX)(t)&&(t=(t=(t=t[o.W7](s,function(e,t){return t.toUpperCase()}))[o.W7](c,"_"))[o.W7](u,function(e,t){return"_"+t})),t}function h(e,t){return!(!e||!t)&&-1!==(0,n.HzD)(e,t)}function f(e){return e&&e.toISOString()||""}function p(e){return(0,n.bJ7)(e)?e[o.RS]:a.m5}function g(e,t,r,n,i){var o=r;return e&&((o=e[t])===r||i&&!i(o)||n&&!n(r)||(o=r,e[t]=o)),o}function m(e,t,r){var i;return e?!(i=e[t])&&(0,n.hXl)(i)&&(i=(0,n.b07)(r)?{}:r,e[t]=i):i=(0,n.b07)(r)?{}:r,i}function v(e,t){var r=null,i=null;return(0,n.Tnt)(e)?r=e:i=e,function(){var e=arguments;if(r&&(i=r()),i)return i[t][o.y9](i,e)}}function y(e,t,r){if(e&&t&&(0,n.Gvm)(e)&&(0,n.Gvm)(t)){var i=function(i){if((0,n.KgX)(i)){var o=t[i];(0,n.Tnt)(o)?r&&!r(i,!0,t,e)||(e[i]=v(t,i)):r&&!r(i,!1,t,e)||((0,n.KhI)(e,i)&&delete e[i],(0,n.vF1)(e,i,{g:function(){return t[i]},s:function(e){t[i]=e}}))}};for(var o in t)i(o)}return e}function w(e,t,r,i,o){e&&t&&r&&(!1!==o||(0,n.b07)(e[t]))&&(e[t]=v(r,i))}function I(e,t,r,i){return e&&t&&(0,n.Gvm)(e)&&(0,n.cyL)(r)&&(0,n.Iuo)(r,function(r){(0,n.KgX)(r)&&w(e,r,t,r,i)}),e}function A(e){return function(){var t=this;e&&(0,n.zav)(e,function(e,r){t[e]=r})}}function C(e){return e&&n.vE3&&(e=(0,i.s6)((0,n.vE3)({},e))),e}function S(e,t,r,i,a,s){var c=arguments,u=c[0]||{},l=c[o.oI],d=!1,h=1;for(l>0&&(0,n.Lmq)(u)&&(d=u,u=c[h]||{},h++),(0,n.Gvm)(u)||(u={});h<l;h++){var f=c[h],p=(0,n.cyL)(f),g=(0,n.Gvm)(f);for(var m in f)if(p&&m in f||g&&(0,n.KhI)(f,m)){var v=f[m],y=void 0;if(d&&v&&((y=(0,n.cyL)(v))||(0,n.QdQ)(v))){var w=u[m];y?(0,n.cyL)(w)||(w=[]):(0,n.QdQ)(w)||(w={}),v=S(d,w,v)}void 0!==v&&(u[m]=v)}}return u}function E(e){try{return e.responseText}catch(e){}return null}function b(e,t){return e?"XDomainRequest,Response:"+E(e)||0:t}function T(e,t){return e?"XMLHttpRequest,Status:"+e[o.cV]+",Response:"+E(e)||0:t}function _(e,t){return t&&((0,n.EtT)(t)?e=[t].concat(e):(0,n.cyL)(t)&&(e=t.concat(e))),e}Object.getPrototypeOf;var k="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",P="withCredentials",R="timeout";function O(e,t,r,n,i,o){function a(e,t,r){try{e[t]=r}catch(e){}}void 0===n&&(n=!1),void 0===i&&(i=!1);var s=new XMLHttpRequest;return n&&a(s,k,n),r&&a(s,P,r),s.open(e,t,!i),r&&a(s,P,r),!i&&o&&a(s,R,o),s}function M(e){var t={};if((0,n.KgX)(e)){var r=(0,n.EHq)(e)[o.sY](/[\r\n]+/);(0,n.Iuo)(r,function(e){if(e){var r=e.indexOf(": ");if(-1!==r){var i=(0,n.EHq)(e.substring(0,r))[o.OL](),a=(0,n.EHq)(e.substring(r+1));t[i]=a}else t[(0,n.EHq)(e)]=1}})}return t}function N(e,t,r){if(!e[r]&&t&&t[o.Az]){var i=t[o.Az](r);i&&(e[r]=(0,n.EHq)(i))}return e}var D="kill-duration",x="kill-duration-seconds",L="time-delta-millis";function U(e,t){var r={};return e[o.wJ]?r=M(e[o.wJ]()):t&&(r=N(r,e,L),r=N(r,e,D),r=N(r,e,x)),r}},3726:(e,t,r)=>{var n=r(1741),i=function(e,t){n.call(this,e),this.name="NotBeforeError",this.date=t};(i.prototype=Object.create(n.prototype)).constructor=i,e.exports=i},3775:(e,t,r)=>{"use strict";r.d(t,{OG:()=>A,Oc:()=>C,WD:()=>m,ZP:()=>I,wq:()=>y,y0:()=>v});var n,i=r(8279),o=r(269),a=r(9749),s=r(6182),c=r(7867),u=r(7292),l=r(6492),d="warnToConsole",h={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},f=((n={})[0]=null,n[1]="errorToConsole",n[2]=d,n[3]="debugToConsole",n);function p(e){return e?'"'+e[s.W7](/\"/g,l.m5)+'"':l.m5}function g(e,t){var r=(0,u.U5)();if(r){var n="log";r[e]&&(n=e),(0,o.Tnt)(r[n])&&r[n](t)}}var m=function(){function e(e,t,r,n){void 0===r&&(r=!1);var i=this;i[s.JR]=e,i[s.pM]=(r?"AI: ":"AI (Internal): ")+e;var o=l.m5;(0,u.Z)()&&(o=(0,u.hm)().stringify(n));var a=(t?" message:"+p(t):l.m5)+(n?" props:"+p(o):l.m5);i[s.pM]+=a}return e.dataType="MessageData",e}();function v(e,t){return(e||{})[s.Uw]||new y(t)}var y=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var r,n,u,l,p,v=0,y={};(0,i.A)(e,this,function(e){function i(t,r){if(!(v>=u)){var i=!0,o="AITR_"+r[s.JR];if(y[o]?i=!1:y[o]=!0,i&&(t<=n&&(e.queue[s.y5](r),v++,w(1===t?"error":"warn",r)),v===u)){var a="Internal events throttle limit per PageView reached for this app.",c=new m(23,a,!1);e.queue[s.y5](c),1===t?e.errorToConsole(a):e[s.on](a)}}}function w(e,r){var n=(0,c.$)(t||{});n&&n[s.e4]&&n[s.e4](e,r)}p=function(t){return(0,a.a)((0,a.e)(t,h,e).cfg,function(e){var t=e.cfg;r=t[s.Bl],n=t.loggingLevelTelemetry,u=t.maxMessageLimit,l=t.enableDebug})}(t||{}),e.consoleLoggingLevel=function(){return r},e[s.ih]=function(t,n,a,c,u){void 0===u&&(u=!1);var h=new m(n,a,u,c);if(l)throw(0,o.mmD)(h);var p=f[t]||d;if((0,o.b07)(h[s.pM]))w("throw"+(1===t?"Critical":"Warning"),h);else{if(u){var g=+h[s.JR];!y[g]&&r>=t&&(e[p](h[s.pM]),y[g]=!0)}else r>=t&&e[p](h[s.pM]);i(t,h)}},e.debugToConsole=function(e){g("debug",e),w("warning",e)},e[s.on]=function(e){g("warn",e),w("warning",e)},e.errorToConsole=function(e){g("error",e),w("error",e)},e.resetInternalMessageCount=function(){v=0,y={}},e[s.sx]=i,e[s.M5]=function(e){p&&p.rm(),p=null}})}return e.__ieDyn=1,e}();function w(e){return e||new y}function I(e,t,r,n,i,o){void 0===o&&(o=!1),w(e)[s.ih](t,r,n,i,o)}function A(e,t){w(e)[s.on](t)}function C(e,t,r){w(e)[s.sx](t,r)}},3826:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DataProtectionScope:()=>P,Environment:()=>D,FilePersistence:()=>b,FilePersistenceWithDataProtection:()=>R,KeychainPersistence:()=>M,LibSecretPersistence:()=>N,NativeBrokerPlugin:()=>yt,PersistenceCachePlugin:()=>y,PersistenceCreator:()=>x});var n=r(9896);const i=require("process"),o="EEXIST",a="ENOENT",s="Dummy data to verify underlying persistence mechanism",c="HOME",u="LOGNAME",l="USER",d="LNAME",h="USERNAME",f="LOCALAPPDATA",p="unknown_error";class g extends Error{constructor(e,t){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,g.prototype),this.errorCode=e,this.errorMessage=t,this.name="PersistenceError"}static createFileSystemError(e,t){return new g(e,t)}static createLibSecretError(e){return new g("GnomeKeyringError",e)}static createKeychainPersistenceError(e){return new g("KeychainError",e)}static createFilePersistenceWithDPAPIError(e){return new g("DPAPIEncryptedFileError",e)}static createCrossPlatformLockError(e){return new g("CrossPlatformLockError",e)}static createCachePersistenceError(e){return new g("CachePersistenceError",e)}static createNotSupportedError(e){return new g("NotSupportedError",e)}static createPersistenceNotVerifiedError(e){return new g("PersistenceNotVerifiedError",e)}static createPersistenceNotValidatedError(e){return new g("PersistenceNotValidatedError",e)}}const m=e=>!!e&&"object"==typeof e&&e.hasOwnProperty("code");class v{constructor(e,t,r){this.lockFilePath=e,this.retryNumber=r?r.retryNumber:500,this.retryDelay=r?r.retryDelay:100,this.logger=t}async lock(){for(let e=0;e<this.retryNumber;e++)try{return this.logger.info(`Pid ${i.pid} trying to acquire lock`),this.lockFileHandle=await n.promises.open(this.lockFilePath,"wx+"),this.logger.info(`Pid ${i.pid} acquired lock`),void await this.lockFileHandle.write(i.pid.toString())}catch(e){if(!m(e))throw e;if(e.code!==o&&"EPERM"!==e.code)throw this.logger.error(`${i.pid} was not able to acquire lock. Ran into error: ${e.message}`),g.createCrossPlatformLockError(e.message);this.logger.info(e.message),await this.sleep(this.retryDelay)}throw this.logger.error(`${i.pid} was not able to acquire lock. Exceeded amount of retries set in the options`),g.createCrossPlatformLockError("Not able to acquire lock. Exceeded amount of retries set in options")}async unlock(){try{this.lockFileHandle?(await n.promises.unlink(this.lockFilePath),await this.lockFileHandle.close(),this.logger.info("lockfile deleted")):this.logger.warning("lockfile handle does not exist, so lockfile could not be deleted")}catch(e){if(!m(e))throw e;if(e.code!==a)throw this.logger.error(`${i.pid} was not able to release lock. Ran into error: ${e.message}`),g.createCrossPlatformLockError(e.message);this.logger.info("Tried to unlock but lockfile does not exist")}}sleep(e){return new Promise(t=>{setTimeout(t,e)})}}class y{constructor(e,t){this.persistence=e,this.logger=e.getLogger(),this.lockFilePath=`${this.persistence.getFilePath()}.lockfile`,this.crossPlatformLock=new v(this.lockFilePath,this.logger,t),this.lastSync=0,this.currentCache=null}async beforeCacheAccess(e){if(this.logger.info("Executing before cache access"),await this.persistence.reloadNecessary(this.lastSync)||null===this.currentCache)try{this.logger.info(`Reload necessary. Last sync time: ${this.lastSync}`),await this.crossPlatformLock.lock(),this.currentCache=await this.persistence.load(),this.lastSync=(new Date).getTime(),this.currentCache?e.tokenCache.deserialize(this.currentCache):this.logger.info("Cache empty."),this.logger.info(`Last sync time updated to: ${this.lastSync}`)}finally{e.cacheHasChanged?this.logger.info(`Pid ${i.pid} beforeCacheAccess did not release lock`):(await this.crossPlatformLock.unlock(),this.logger.info(`Pid ${i.pid} released lock`))}else e.cacheHasChanged&&(this.logger.verbose("Cache context has changed"),await this.crossPlatformLock.lock())}async afterCacheAccess(e){this.logger.info("Executing after cache access");try{e.cacheHasChanged?(this.logger.info("Msal in-memory cache has changed. Writing changes to persistence"),this.currentCache=e.tokenCache.serialize(),await this.persistence.save(this.currentCache)):this.logger.info("Msal in-memory cache has not changed. Did not write to persistence")}finally{await this.crossPlatformLock.unlock(),this.logger.info(`Pid ${i.pid} afterCacheAccess released lock`)}}}var w=r(6928);class I{async verifyPersistence(){const e=await this.createForPersistenceValidation();try{await e.save(s);const t=await e.load();if(!t)throw g.createCachePersistenceError("Persistence check failed. Data was written but it could not be read. Possible cause: on Linux, LibSecret is installed but D-Bus isn't running                     because it cannot be started over SSH.");if(t!==s)throw g.createCachePersistenceError(`Persistence check failed. Data written ${s} is different                     from data read ${t}`);return await e.delete(),!0}catch(e){throw g.createCachePersistenceError(`Verifing persistence failed with the error: ${e}`)}}}const A="",C={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"};var S;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(S||(S={}));class E{constructor(e,t,r){this.level=S.Info;const n=e||E.createDefaultLoggerOptions();this.localCallback=n.loggerCallback||(()=>{}),this.piiLoggingEnabled=n.piiLoggingEnabled||!1,this.level="number"==typeof n.logLevel?n.logLevel:S.Info,this.correlationId=n.correlationId||A,this.packageName=t||A,this.packageVersion=r||A}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:S.Info}}clone(e,t,r){return new E({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const r=`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${S[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,r,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:S.Error,containsPii:!1,correlationId:t||A})}errorPii(e,t){this.logMessage(e,{logLevel:S.Error,containsPii:!0,correlationId:t||A})}warning(e,t){this.logMessage(e,{logLevel:S.Warning,containsPii:!1,correlationId:t||A})}warningPii(e,t){this.logMessage(e,{logLevel:S.Warning,containsPii:!0,correlationId:t||A})}info(e,t){this.logMessage(e,{logLevel:S.Info,containsPii:!1,correlationId:t||A})}infoPii(e,t){this.logMessage(e,{logLevel:S.Info,containsPii:!0,correlationId:t||A})}verbose(e,t){this.logMessage(e,{logLevel:S.Verbose,containsPii:!1,correlationId:t||A})}verbosePii(e,t){this.logMessage(e,{logLevel:S.Verbose,containsPii:!0,correlationId:t||A})}trace(e,t){this.logMessage(e,{logLevel:S.Trace,containsPii:!1,correlationId:t||A})}tracePii(e,t){this.logMessage(e,{logLevel:S.Trace,containsPii:!0,correlationId:t||A})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}class b extends I{constructor(e,t){super(),this.logger=new E(t||b.createDefaultLoggerOptions()),this.filePath=e}static async create(e,t){const r=new b(e,t);return await r.createCacheFile(),r}async save(e){try{await n.promises.writeFile(this.getFilePath(),e,"utf-8")}catch(e){throw m(e)?g.createFileSystemError(e.code||p,e.message):e}}async saveBuffer(e){try{await n.promises.writeFile(this.getFilePath(),e)}catch(e){throw m(e)?g.createFileSystemError(e.code||p,e.message):e}}async load(){try{return await n.promises.readFile(this.getFilePath(),"utf-8")}catch(e){throw m(e)?g.createFileSystemError(e.code||p,e.message):e}}async loadBuffer(){try{return await n.promises.readFile(this.getFilePath())}catch(e){throw m(e)?g.createFileSystemError(e.code||p,e.message):e}}async delete(){try{return await n.promises.unlink(this.getFilePath()),!0}catch(e){if(m(e)){if(e.code===a)return this.logger.warning("Cache file does not exist, so it could not be deleted"),!1;throw g.createFileSystemError(e.code||p,e.message)}throw e}}getFilePath(){return this.filePath}async reloadNecessary(e){return e<await this.timeLastModified()}getLogger(){return this.logger}createForPersistenceValidation(){const e=`${(0,w.dirname)(this.filePath)}/test.cache`;return b.create(e)}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:S.Info}}async timeLastModified(){try{return(await n.promises.stat(this.filePath)).mtime.getTime()}catch(e){if(m(e)){if(e.code===a)return this.logger.verbose("Cache file does not exist"),0;throw g.createFileSystemError(e.code||p,e.message)}throw e}}async createCacheFile(){await this.createFileDirectory();const e=await n.promises.open(this.filePath,"a");await e.close(),this.logger.info(`File created at ${this.filePath}`)}async createFileDirectory(){try{await n.promises.mkdir((0,w.dirname)(this.filePath),{recursive:!0})}catch(e){if(!m(e))throw e;if(e.code!==o)throw g.createFileSystemError(e.code||p,e.message);this.logger.info(`Directory ${(0,w.dirname)(this.filePath)}  already exists`)}}}const T=require("module");class _{constructor(e){this.errorMessage=e}protectData(){throw new Error(this.errorMessage)}unprotectData(){throw new Error(this.errorMessage)}}let k;if("win32"!==process.platform)k=new _("Dpapi is not supported on this platform");else{const e="undefined"!=typeof require?require:(0,T.createRequire)("file:///D:/a/_work/1/s/extensions/microsoft-authentication/node_modules/@azure/msal-node-extensions/dist/Dpapi.mjs");try{k=e(`../bin/${process.arch}/dpapi`)}catch(e){k=new _("Dpapi bindings unavailable")}}const P={CurrentUser:"CurrentUser",LocalMachine:"LocalMachine"};class R extends I{constructor(e,t,r){super(),this.scope=t,this.optionalEntropy=r?Buffer.from(r,"utf-8"):null,this.filePersistence=e}static async create(e,t,r,n){const i=await b.create(e,n);return new R(i,t,r)}async save(e){try{const t=k.protectData(Buffer.from(e,"utf-8"),this.optionalEntropy,this.scope.toString());await this.filePersistence.saveBuffer(t)}catch(e){throw m(e)?g.createFilePersistenceWithDPAPIError(e.message):e}}async load(){try{const e=await this.filePersistence.loadBuffer();return void 0!==e&&e&&0!==e.length?k.unprotectData(e,this.optionalEntropy,this.scope.toString()).toString():(this.filePersistence.getLogger().info("Encrypted contents loaded from file were null or empty"),null)}catch(e){throw m(e)?g.createFilePersistenceWithDPAPIError(e.message):e}}async delete(){return this.filePersistence.delete()}async reloadNecessary(e){return this.filePersistence.reloadNecessary(e)}getFilePath(){return this.filePersistence.getFilePath()}getLogger(){return this.filePersistence.getLogger()}createForPersistenceValidation(){const e=`${(0,w.dirname)(this.filePersistence.getFilePath())}/test.cache`;return R.create(e,P.CurrentUser)}}var O=r(9008);class M extends I{constructor(e,t,r){super(),this.filePersistence=e,this.serviceName=t,this.accountName=r}static async create(e,t,r,n){const i=await b.create(e,n);return new M(i,t,r)}async save(e){try{await O.setPassword(this.serviceName,this.accountName,e)}catch(e){throw m(e)?g.createKeychainPersistenceError(e.message):e}await this.filePersistence.save("{}")}async load(){try{return await O.getPassword(this.serviceName,this.accountName)}catch(e){throw m(e)?g.createKeychainPersistenceError(e.message):e}}async delete(){try{return await this.filePersistence.delete(),await O.deletePassword(this.serviceName,this.accountName)}catch(e){throw m(e)?g.createKeychainPersistenceError(e.message):e}}async reloadNecessary(e){return this.filePersistence.reloadNecessary(e)}getFilePath(){return this.filePersistence.getFilePath()}getLogger(){return this.filePersistence.getLogger()}createForPersistenceValidation(){const e=`${(0,w.dirname)(this.filePersistence.getFilePath())}/test.cache`;return M.create(e,"persistenceValidationServiceName","persistencValidationAccountName")}}class N extends I{constructor(e,t,r){super(),this.filePersistence=e,this.serviceName=t,this.accountName=r}static async create(e,t,r,n){const i=await b.create(e,n);return new N(i,t,r)}async save(e){try{await O.setPassword(this.serviceName,this.accountName,e)}catch(e){throw m(e)?g.createLibSecretError(e.message):e}await this.filePersistence.save("{}")}async load(){try{return await O.getPassword(this.serviceName,this.accountName)}catch(e){throw m(e)?g.createLibSecretError(e.message):e}}async delete(){try{return await this.filePersistence.delete(),await O.deletePassword(this.serviceName,this.accountName)}catch(e){throw m(e)?g.createLibSecretError(e.message):e}}async reloadNecessary(e){return this.filePersistence.reloadNecessary(e)}getFilePath(){return this.filePersistence.getFilePath()}getLogger(){return this.filePersistence.getLogger()}createForPersistenceValidation(){const e=`${(0,w.dirname)(this.filePersistence.getFilePath())}/test.cache`;return N.create(e,"persistenceValidationServiceName","persistencValidationAccountName")}}class D{static get homeEnvVar(){return this.getEnvironmentVariable(c)}static get lognameEnvVar(){return this.getEnvironmentVariable(u)}static get userEnvVar(){return this.getEnvironmentVariable(l)}static get lnameEnvVar(){return this.getEnvironmentVariable(d)}static get usernameEnvVar(){return this.getEnvironmentVariable(h)}static getEnvironmentVariable(e){return process.env[e]||""}static getEnvironmentPlatform(){return process.platform}static isWindowsPlatform(){return"win32"===this.getEnvironmentPlatform()}static isLinuxPlatform(){return"linux"===this.getEnvironmentPlatform()}static isMacPlatform(){return"darwin"===this.getEnvironmentPlatform()}static isLinuxRootUser(){return"function"==typeof process.getuid&&0===process.getuid()}static getUserRootDirectory(){return this.isWindowsPlatform()?this.getUserHomeDirOnWindows():this.getUserHomeDirOnUnix()}static getUserHomeDirOnWindows(){return this.getEnvironmentVariable(f)}static getUserHomeDirOnUnix(){if(this.isWindowsPlatform())throw g.createNotSupportedError("Getting the user home directory for unix is not supported in windows");if(this.homeEnvVar)return this.homeEnvVar;let e=null;if(this.lognameEnvVar?e=this.lognameEnvVar:this.userEnvVar?e=this.userEnvVar:this.lnameEnvVar?e=this.lnameEnvVar:this.usernameEnvVar&&(e=this.usernameEnvVar),this.isMacPlatform())return e?w.join("/Users",e):null;if(this.isLinuxPlatform())return this.isLinuxRootUser()?"/root":e?w.join("/home",e):null;throw g.createNotSupportedError("Getting the user home directory for unix is not supported in windows")}}class x{static async createPersistence(e){let t;if(D.isWindowsPlatform()){if(!e.cachePath||!e.dataProtectionScope)throw g.createPersistenceNotValidatedError("Cache path and/or data protection scope not provided for the FilePersistenceWithDataProtection cache plugin");t=await R.create(e.cachePath,P.CurrentUser,void 0,e.loggerOptions)}else if(D.isMacPlatform()){if(!e.cachePath||!e.serviceName||!e.accountName)throw g.createPersistenceNotValidatedError("Cache path, service name and/or account name not provided for the KeychainPersistence cache plugin");t=await M.create(e.cachePath,e.serviceName,e.accountName,e.loggerOptions)}else{if(!D.isLinuxPlatform())throw g.createNotSupportedError("The current environment is not supported by msal-node-extensions yet.");if(!e.cachePath||!e.serviceName||!e.accountName)throw g.createPersistenceNotValidatedError("Cache path, service name and/or account name not provided for the LibSecretPersistence cache plugin");t=await N.create(e.cachePath,e.serviceName,e.accountName,e.loggerOptions)}return await t.verifyPersistence().catch(async r=>{if(D.isLinuxPlatform()&&e.usePlaintextFileOnLinux){if(!e.cachePath)throw g.createPersistenceNotValidatedError("Cache path not provided for the FilePersistence cache plugin");if(t=await b.create(e.cachePath,e.loggerOptions),await t.verifyPersistence())return t;throw g.createPersistenceNotVerifiedError("Persistence could not be verified")}throw r}),t}}var L,U,q=new Map([["win32",new Set(["x64","ia32"])],["darwin",new Set(["arm64","x64"])],["linux",new Set(["x64"])]]);!function(e){e[e.Unexpected=0]="Unexpected",e[e.Reserved=1]="Reserved",e[e.InteractionRequired=2]="InteractionRequired",e[e.NoNetwork=3]="NoNetwork",e[e.NetworkTemporarilyUnavailable=4]="NetworkTemporarilyUnavailable",e[e.ServerTemporarilyUnavailable=5]="ServerTemporarilyUnavailable",e[e.ApiContractViolation=6]="ApiContractViolation",e[e.UserCanceled=7]="UserCanceled",e[e.ApplicationCanceled=8]="ApplicationCanceled",e[e.IncorrectConfiguration=9]="IncorrectConfiguration",e[e.InsufficientBuffer=10]="InsufficientBuffer",e[e.AuthorityUntrusted=11]="AuthorityUntrusted",e[e.UserSwitched=12]="UserSwitched",e[e.AccountUnusable=13]="AccountUnusable",e[e.UserDataRemovalRequired=14]="UserDataRemovalRequired",e[e.KeyNotFound=15]="KeyNotFound",e[e.AccountNotFound=16]="AccountNotFound"}(L||(L={})),function(e){e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error",e[e.Fatal=6]="Fatal"}(U||(U={}));var F={errorCode:0,errorStatus:L.Unexpected,errorContext:"Platform and/or architecture combination is unsupported. Supported: Windows (x64, ia32), macOS (arm64). Unsupported: Windows (arm64), macOS (x64) and Linux.",errorTag:0},H={errorCode:0,errorStatus:L.Unexpected,errorContext:"Binaries could not be loaded. This is unexpected.",errorTag:0};function B(){var e,t=q.get(process.platform);return null!==(e=null==t?void 0:t.has(process.arch))&&void 0!==e&&e?H:F}var z,j=function(){function e(){}return e.prototype.CreateAuthParameters=function(){throw B()},e.prototype.SetRedirectUri=function(){throw B()},e.prototype.SetRequestedScopes=function(){throw B()},e.prototype.SetDecodedClaims=function(){throw B()},e.prototype.SetAccessTokenToRenew=function(){throw B()},e.prototype.SetPopParams=function(){throw B()},e.prototype.SetAdditionalParameter=function(){throw B()},e}(),$=function(){function e(){this.AuthParameters=j,this.StartupError=B()}return e.prototype.ReadAccountByIdAsync=function(){throw B()},e.prototype.SignInAsync=function(){throw B()},e.prototype.SignInSilentlyAsync=function(){throw B()},e.prototype.SignInInteractivelyAsync=function(){throw B()},e.prototype.AcquireTokenSilentlyAsync=function(){throw B()},e.prototype.AcquireTokenInteractivelyAsync=function(){throw B()},e.prototype.SignOutSilentlyAsync=function(){throw B()},e.prototype.RegisterLogger=function(){throw B()},e.prototype.DiscoverAccountsAsync=function(){throw B()},e}();try{z=r(7247)}catch(e){z=new $}const V="@azure/msal-node-extensions",K="1.5.25";class G extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,G.prototype),this.errorCode=e||A,this.errorMessage=t||A,this.subError=r||A,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}const W="client_info_decoding_error",X="client_info_empty_error",Y="token_parsing_error",Q="null_or_empty_token",J="endpoints_resolution_error",Z="network_error",ee="openid_config_error",te="hash_not_deserialized",re="invalid_state",ne="state_mismatch",ie="state_not_found",oe="nonce_mismatch",ae="auth_time_not_found",se="max_age_transpired",ce="multiple_matching_tokens",ue="multiple_matching_accounts",le="multiple_matching_appMetadata",de="request_cannot_be_made",he="cannot_remove_empty_scope",fe="cannot_append_scopeset",pe="empty_input_scopeset",ge="device_code_polling_cancelled",me="device_code_expired",ve="device_code_unknown_error",ye="no_account_in_silent_request",we="invalid_cache_record",Ie="invalid_cache_environment",Ae="no_account_found",Ce="no_crypto_object",Se="unexpected_credential_type",Ee="invalid_assertion",be="invalid_client_credential",Te="token_refresh_required",_e="user_timeout_reached",ke="token_claims_cnf_required_for_signedjwt",Pe="authorization_code_missing_from_server_response",Re="binding_key_not_removed",Oe="end_session_endpoint_not_supported",Me="key_id_missing",Ne="no_network_connectivity",De="user_canceled",xe="missing_tenant_id_error",Le="method_not_implemented",Ue="nested_app_auth_bridge_disabled",qe="platform_broker_error",Fe={[W]:"The client info could not be parsed/decoded correctly",[X]:"The client info was empty",[Y]:"Token cannot be parsed",[Q]:"The token is null or empty",[J]:"Endpoints cannot be resolved",[Z]:"Network request failed",[ee]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[te]:"The hash parameters could not be deserialized",[re]:"State was not the expected format",[ne]:"State mismatch error",[ie]:"State not found",[oe]:"Nonce mismatch error",[ae]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[se]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[ce]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[ue]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[le]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[de]:"Token request cannot be made without authorization code or refresh token.",[he]:"Cannot remove null or empty scope from ScopeSet",[fe]:"Cannot append ScopeSet",[pe]:"Empty input ScopeSet cannot be processed",[ge]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[me]:"Device code is expired.",[ve]:"Device code stopped polling for unknown reasons.",[ye]:"Please pass an account object, silent flow is not supported without account information",[we]:"Cache record object was null or undefined.",[Ie]:"Invalid environment when attempting to create cache entry",[Ae]:"No account found in cache for given key.",[Ce]:"No crypto object detected.",[Se]:"Unexpected credential type.",[Ee]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[be]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Te]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[_e]:"User defined timeout for device code polling reached",[ke]:"Cannot generate a POP jwt if the token_claims are not populated",[Pe]:"Server response does not contain an authorization code to proceed",[Re]:"Could not remove the credential's binding key from storage.",[Oe]:"The provided authority does not support logout",[Me]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Ne]:"No network connectivity. Check your internet connection.",[De]:"User cancelled the flow.",[xe]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Le]:"This method has not been implemented",[Ue]:"The nested app auth bridge is disabled",[qe]:"An error occurred in the native broker. See the platformBrokerError property for details."};class He extends G{constructor(e,t){super(e,t?`${Fe[e]}: ${t}`:Fe[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,He.prototype)}}function Be(e,t){return new He(e,t)}class ze{constructor(e,t){this.cacheOutcome="0",this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||A,this.wrapperVer=e.wrapperVer||A,this.telemetryCacheKey=C.CACHE_KEY+"-"+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${C.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);const n=t.join(C.VALUE_SEPARATOR),i=[e,this.getRegionDiscoveryFields()].join(C.VALUE_SEPARATOR);return[C.SCHEMA_VERSION,i,n].join(C.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=ze.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(C.VALUE_SEPARATOR),n=e.errors.slice(0,t).join(C.VALUE_SEPARATOR),i=e.errors.length,o=[i,t<i?C.OVERFLOW_TRUE:C.OVERFLOW_FALSE].join(C.VALUE_SEPARATOR);return[C.SCHEMA_VERSION,e.cacheHits,r,n,o].join(C.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=C.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof G?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(C.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=ze.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const r={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,n=0;const i=e.errors.length;for(t=0;t<i;t++){const i=e.failedRequests[2*t]||A,o=e.failedRequests[2*t+1]||A,a=e.errors[t]||A;if(n+=i.toString().length+o.toString().length+a.length+3,!(n<C.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||A),e.push(this.regionSource||A),e.push(this.regionOutcome||A),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return function(e){const{skus:t,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=e,a=new Map([[0,[r,n]],[2,[i,o]]]);let s=[];if(t?.length){if(s=t.split(","),s.length<4)return t}else s=Array.from({length:4},()=>"|");return a.forEach((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){const{skuArr:t,index:r,skuName:n,skuVersion:i}=e;r>=t.length||(t[r]=[n,i].join("|"))}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})}),s.join(",")}(e)}}class je extends G{constructor(e,t,r,n){const i=function(e){if(0===e)return"UNTAG";const t="abcdefghijklmnopqrstuvwxyz0123456789****************************";let r="*****";return r=[t[e>>24&63],t[e>>18&63],t[e>>12&63],t[e>>6&63],t[63&e]].join(""),r}(n);super(e,t?`${t} (Error Code: ${r}, Tag: ${i})`:`(Error Code: ${r}, Tag: ${i})`),this.name="PlatformBrokerError",this.statusCode=r,this.tag=i,Object.setPrototypeOf(this,je.prototype)}}const $e="redirect_uri_empty",Ve="claims_request_parsing_error",Ke="authority_uri_insecure",Ge="url_parse_error",We="empty_url_error",Xe="empty_input_scopes_error",Ye="invalid_claims",Qe="token_request_empty",Je="logout_request_empty",Ze="invalid_code_challenge_method",et="pkce_params_missing",tt="invalid_cloud_discovery_metadata",rt="invalid_authority_metadata",nt="untrusted_authority",it="missing_ssh_jwk",ot="missing_ssh_kid",at="missing_nonce_authentication_header",st="invalid_authentication_header",ct="cannot_set_OIDCOptions",ut="cannot_allow_platform_broker",lt="authority_mismatch",dt="invalid_request_method_for_EAR",ht="invalid_authorize_post_body_parameters",ft={[$e]:"A redirect URI is required for all calls, and none has been set.",[Ve]:"Could not parse the given claims request object.",[Ke]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Ge]:"URL could not be parsed into appropriate segments.",[We]:"URL was empty or null.",[Xe]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Ye]:"Given claims parameter must be a stringified JSON object.",[Qe]:"Token request was empty and not found in cache.",[Je]:"The logout request was null or undefined.",[Ze]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[et]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[tt]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[rt]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[nt]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[it]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[ot]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[at]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[st]:"Invalid authentication header provided",[ct]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[ut]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[lt]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[ht]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[dt]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class pt extends G{constructor(e){super(e,ft[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,pt.prototype)}}class gt extends G{constructor(e,t,r,n,i){super(e,t,r),this.name="ServerError",this.errorNo=n,this.status=i,Object.setPrototypeOf(this,gt.prototype)}}class mt extends G{constructor(e,t,r,n,i,o,a,s){super(e,t,r),Object.setPrototypeOf(this,mt.prototype),this.timestamp=n||A,this.traceId=i||A,this.correlationId=o||A,this.claims=a||A,this.name="InteractionRequiredAuthError",this.errorNo=s}}const vt="x-client-xtra-sku";class yt{constructor(){this.logger=new E({loggerCallback:()=>{},piiLoggingEnabled:!1},V,K),this.isBrokerAvailable=!z.StartupError}setLogger(e){this.logger=new E(e,V,K);const t=(e,t,r)=>{switch(t){case U.Trace:case U.Debug:r?this.logger.tracePii(e):this.logger.trace(e);break;case U.Info:r?this.logger.infoPii(e):this.logger.info(e);break;case U.Warning:r?this.logger.warningPii(e):this.logger.warning(e);break;case U.Error:case U.Fatal:r?this.logger.errorPii(e):this.logger.error(e);break;default:r?this.logger.infoPii(e):this.logger.info(e)}};try{z.RegisterLogger(t,e.piiLoggingEnabled||!1)}catch(e){const t=this.wrapError(e);if(t)throw t}}async getAccountById(e,t){this.logger.trace("NativeBrokerPlugin - getAccountById called",t);const r=await this.readAccountById(e,t);return this.generateAccountInfo(r.account)}async getAllAccounts(e,t){return this.logger.trace("NativeBrokerPlugin - getAllAccounts called",t),new Promise((r,n)=>{const i=e=>{try{e.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void n(t)}const t=[];e.accounts.forEach(e=>{t.push(this.generateAccountInfo(e))}),r(t)};try{z.DiscoverAccountsAsync(e,t,i)}catch(e){const t=this.wrapError(e);t&&n(t)}})}async acquireTokenSilent(e){this.logger.trace("NativeBrokerPlugin - acquireTokenSilent called",e.correlationId);const t=e;t.redirectUri||(t.redirectUri=this.chooseRedirectUriByPlatform(t),this.logger.info("NativeBrokerPlugin - No Redirect URI provided, using default",t.correlationId));const r=this.generateRequestParameters(t),n=await this.getAccount(t);return new Promise((e,i)=>{const o=r=>{try{r.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void i(t)}const n=this.getAuthenticationResult(t,r);e(n)};try{n?z.AcquireTokenSilentlyAsync(r,t.correlationId,n,o):z.SignInSilentlyAsync(r,t.correlationId,o)}catch(e){const t=this.wrapError(e);t&&i(t)}})}async acquireTokenInteractive(e,t){this.logger.trace("NativeBrokerPlugin - acquireTokenInteractive called",e.correlationId);const r=e;r.redirectUri||(r.redirectUri=this.chooseRedirectUriByPlatform(r),this.logger.info("NativeBrokerPlugin - No Redirect URI provided, using default",r.correlationId));const n=this.generateRequestParameters(r),i=await this.getAccount(r),o=t||Buffer.from([0]);return new Promise((e,t)=>{const a=n=>{try{n.CheckError()}catch(e){const r=this.wrapError(e);if(r)return void t(r)}const i=this.getAuthenticationResult(r,n);e(i)};try{switch(r.prompt){case"login":case"select_account":case"create":this.logger.info("Calling native interop SignInInteractively API",r.correlationId);const e=r.loginHint||A;z.SignInInteractivelyAsync(o,n,r.correlationId,e,a);break;case"none":i?(this.logger.info("Calling native interop AcquireTokenSilently API",r.correlationId),z.AcquireTokenSilentlyAsync(n,r.correlationId,i,a)):(this.logger.info("Calling native interop SignInSilently API",r.correlationId),z.SignInSilentlyAsync(n,r.correlationId,a));break;default:if(i)this.logger.info("Calling native interop AcquireTokenInteractively API",r.correlationId),z.AcquireTokenInteractivelyAsync(o,n,r.correlationId,i,a);else{this.logger.info("Calling native interop SignIn API",r.correlationId);const e=r.loginHint||A;z.SignInAsync(o,n,r.correlationId,e,a)}}}catch(e){const r=this.wrapError(e);r&&t(r)}})}async signOut(e){this.logger.trace("NativeBrokerPlugin - signOut called",e.correlationId);const t=await this.getAccount(e);if(!t)throw Be(Ae);return new Promise((r,n)=>{const i=e=>{try{e.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void n(t)}r()};try{z.SignOutSilentlyAsync(e.clientId,e.correlationId,t,i)}catch(e){const t=this.wrapError(e);t&&n(t)}})}async getAccount(e){return e.accountId?(await this.readAccountById(e.accountId,e.correlationId)).account:null}async readAccountById(e,t){return this.logger.trace("NativeBrokerPlugin - readAccountById called",t),new Promise((r,n)=>{const i=e=>{try{e.CheckError()}catch(e){const t=this.wrapError(e);if(t)return void n(t)}r(e)};try{z.ReadAccountByIdAsync(e,t,i)}catch(e){const t=this.wrapError(e);t&&n(t)}})}generateRequestParameters(e){this.logger.trace("NativeBrokerPlugin - generateRequestParameters called",e.correlationId);const t=new z.AuthParameters;try{if(t.CreateAuthParameters(e.clientId,e.authority),t.SetRedirectUri(e.redirectUri),t.SetRequestedScopes(e.scopes.join(" ")),e.claims&&t.SetDecodedClaims(e.claims),"pop"===e.authenticationScheme){if(!e.resourceRequestMethod||!e.resourceRequestUri)throw new Error("Authentication Scheme set to POP but one or more of the following parameters are missing: resourceRequestMethod, resourceRequestUri");const r=new URL(e.resourceRequestUri);t.SetPopParams(e.resourceRequestMethod,r.host,r.pathname,e.shrNonce||"")}e.extraParameters&&Object.entries(e.extraParameters).forEach(([e,r])=>{t.SetAdditionalParameter(e,r)});const r=e.extraParameters&&e.extraParameters[vt]?.length?e.extraParameters[vt]:"";t.SetAdditionalParameter(vt,ze.makeExtraSkuString({skus:r,extensionName:"msal.node.ext",extensionVersion:K}))}catch(e){const t=this.wrapError(e);if(t)throw t}return t}chooseRedirectUriByPlatform(e){let t;switch(this.logger.trace("NativeBrokerPlugin - chooseRedirectUriByPlatform called",e.correlationId),process.platform){case"darwin":t="msauth.com.msauth.unsignedapp://auth";break;case"win32":t=`ms-appx-web://Microsoft.AAD.BrokerPlugin/${e.clientId}`;break;default:t="https://login.microsoftonline.com/common/oauth2/nativeclient"}return t}getAuthenticationResult(e,t){this.logger.trace("NativeBrokerPlugin - getAuthenticationResult called",e.correlationId);let r,n=!1;try{n=!!JSON.parse(t.telemetryData).is_cache}catch(t){this.logger.error("NativeBrokerPlugin: getAuthenticationResult - Error parsing telemetry data. Could not determine if response came from cache.",e.correlationId)}try{r=JSON.parse(t.idToken)}catch(e){throw new Error("Unable to parse idToken claims")}const i=this.generateAccountInfo(t.account,r);let o,a;var s;return t.isPopAuthorization?(o=t.authorizationHeader.split(" ")[1],a="pop"):(o=t.accessToken,a="Bearer"),{authority:e.authority,uniqueId:r.oid||r.sub||"",tenantId:r.tid||"",scopes:t.grantedScopes.split(" "),account:i,idToken:t.rawIdToken,idTokenClaims:r,accessToken:o,fromCache:n,expiresOn:(s=t.expiresOn,s?new Date(1e3*Number(s)):new Date),tokenType:a,correlationId:e.correlationId,fromNativeBroker:!0}}generateAccountInfo(e,t){return this.logger.trace("NativeBrokerPlugin - generateAccountInfo called"),{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,name:e.displayName,idTokenClaims:t,nativeAccountId:e.accountId}}isMsalRuntimeError(e){return e.hasOwnProperty("errorCode")||e.hasOwnProperty("errorStatus")||e.hasOwnProperty("errorContext")||e.hasOwnProperty("errorTag")}wrapError(e){if(e&&"object"==typeof e&&this.isMsalRuntimeError(e)){const{errorCode:t,errorStatus:r,errorContext:n,errorTag:i}=e,o=new je(L[r],n,t,i);let a;switch(r){case L.InteractionRequired:case L.AccountUnusable:a=new mt("interaction_required",o.message);break;case L.NoNetwork:case L.NetworkTemporarilyUnavailable:a=Be(Ne);break;case L.ServerTemporarilyUnavailable:a=new gt("server_unavailable",n);break;case L.UserCanceled:a=Be(De);break;case L.AuthorityUntrusted:a=function(e){return new pt(e)}(nt);break;case L.UserSwitched:return null;case L.AccountNotFound:a=Be(Ae);break;default:a=Be(qe)}return a.platformBrokerError=o,a}throw e}}},3874:(e,t,r)=>{const n=r(8311);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},3904:(e,t,r)=>{const n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new l(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=o(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=i;const o=r(8587),{safeRe:a,t:s}=r(9718),c=r(2111),u=r(7272),l=r(3908),d=r(8311)},3908:(e,t,r)=>{const n=r(7272),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(6874),{safeRe:a,t:s}=r(9718),c=r(8587),{compareIdentifiers:u}=r(1123);class l{constructor(e,t){if(t=c(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?a[s.LOOSE]:a[s.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return u(r,i)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(n("build compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return u(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=l},3927:(e,t,r)=>{const n=r(909);e.exports=(e,t)=>e.sort((e,r)=>n(e,r,t))},3999:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>0!==n(e,t,r)},4013:(e,t,r)=>{"use strict";r.d(t,{K:()=>a,k:()=>s});var n=r(8205),i=r(269),o=r(6182);function a(e,t){if(e&&e[o.M5])return e[o.M5](t)}function s(e,t,r){var o;return r||(o=(0,n.Qo)(function(e){r=e})),e&&(0,i.R3R)(e)>0?(0,n.Dv)(a(e[0],t),function(){s((0,i.KVm)(e,1),t,r)}):r(),o}},4040:(e,t,r)=>{e.exports={decode:r(7260),verify:r(1691),sign:r(7651),JsonWebTokenError:r(1741),NotBeforeError:r(3726),TokenExpiredError:r(8980)}},4061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(9614)),i=o(r(2298));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,r){const o=(e=e||{}).random||(e.rng||n.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return(0,i.default)(o)}},4089:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(e,t,r)>=0},4164:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var n=r(5025),i=r(5130),o=r(7975),a=function(){function e(e,t,r,a,s,c,u){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var l=this;l.ver=2,l.url=(0,o.pJ)(e,r),l[i.RS]=(0,o.Rr)(e,t)||n.R2,l[i.$y]=(0,o.xP)(e,s),l[i.XA]=(0,o.Vj)(e,c),u&&(l.domProcessing=u.domProcessing,l[i.qd]=u[i.qd],l.networkConnect=u.networkConnect,l.perfTotal=u.perfTotal,l[i.fd]=u[i.fd],l.sentRequest=u.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}()},4276:(e,t,r)=>{"use strict";r.d(t,{T:()=>f,Z:()=>h});var n=r(269),i=r(6182),o=r(3673),a=r(6492),s=r(6535),c="3.3.4",u="."+(0,s.Si)(6),l=0;function d(e){return 1===e[i.re]||9===e[i.re]||!+e[i.re]}function h(e,t){return void 0===t&&(t=!1),(0,o.cH)(e+l+++(t?"."+c:a.m5)+u)}function f(e){var t={id:h("_aiData-"+(e||a.m5)+"."+c),accept:function(e){return d(e)},get:function(e,r,i,a){var s=e[t.id];return s?s[(0,o.cH)(r)]:(a&&(s=function(e,t){var r=t[e.id];if(!r){r={};try{d(t)&&(0,n.vF1)(t,e.id,{e:!1,v:r})}catch(e){}}return r}(t,e),s[(0,o.cH)(r)]=i),i)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},4277:(e,t,r)=>{const n=r(909);e.exports=(e,t)=>e.sort((e,r)=>n(r,e,t))},4282:(e,t,r)=>{"use strict";r.d(t,{H:()=>i,o:()=>o});var n=r(269),i=n.WSA,o=n.fn0},4413:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64Encode=function(e){return Buffer.from(e,"binary").toString("base64")},t.base64Decode=function(e){return Buffer.from(e,"base64").toString("utf8")}},4484:(e,t,r)=>{"use strict";r.d(t,{F:()=>u,H:()=>c});var n=r(269),i=r(5025),o=r(5130),a=";",s="=";function c(e){if(!e)return{};var t=e[o.sY](a),r=(0,n.KTd)(t,function(e,t){var r=t[o.sY](s);if(2===r[o.oI]){var n=r[0][o.OL](),i=r[1];e[n]=i}return e},{});if((0,n.cGk)(r)[o.oI]>0){if(r.endpointsuffix){var c=r.location?r.location+".":"";r[o.zV]=r[o.zV]||"https://"+c+"dc."+r.endpointsuffix}r[o.zV]=r[o.zV]||i._G,(0,n.Cv9)(r[o.zV],"/")&&(r[o.zV]=r[o.zV].slice(0,-1))}return r}var u={parse:c}},4493:(e,t,r)=>{const n=r(3908);e.exports=(e,t)=>new n(e,t).patch},4623:(e,t,r)=>{const n=r(9589);e.exports=n.satisfies(process.version,">=16.9.0")},4641:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>0===n(e,t,r)},4658:(e,t,r)=>{"use strict";r.d(t,{AN:()=>A,BW:()=>v,Dt:()=>E,Nu:()=>p,Se:()=>y,T9:()=>C,_M:()=>w,iw:()=>m,tm:()=>I,v7:()=>b,vH:()=>S,vh:()=>g});var n=r(269),i=r(3775),o=r(3673),a=r(7374),s=r(5130),c=void 0,u=void 0,l="";function d(){return v()?h(a.eL.LocalStorage):null}function h(e){try{if((0,n.hXl)((0,n.mS$)()))return null;var t=(new Date)[s.xE](),r=(0,n.zS2)(e===a.eL.LocalStorage?"localStorage":"sessionStorage"),i=l+t;r.setItem(i,t);var o=r.getItem(i)!==t;if(r[s.AZ](i),!o)return r}catch(e){}return null}function f(){return A()?h(a.eL.SessionStorage):null}function p(){c=!1,u=!1}function g(e){l=e||""}function m(){c=v(!0),u=A(!0)}function v(e){return(e||void 0===c)&&(c=!!h(a.eL.LocalStorage)),c}function y(e,t){var r=d();if(null!==r)try{return r.getItem(t)}catch(t){c=!1,(0,i.ZP)(e,2,1,"Browser failed read of local storage. "+(0,o.lL)(t),{exception:(0,n.mmD)(t)})}return null}function w(e,t,r){var a=d();if(null!==a)try{return a.setItem(t,r),!0}catch(t){c=!1,(0,i.ZP)(e,2,3,"Browser failed write to local storage. "+(0,o.lL)(t),{exception:(0,n.mmD)(t)})}return!1}function I(e,t){var r=d();if(null!==r)try{return r[s.AZ](t),!0}catch(t){c=!1,(0,i.ZP)(e,2,5,"Browser failed removal of local storage item. "+(0,o.lL)(t),{exception:(0,n.mmD)(t)})}return!1}function A(e){return(e||void 0===u)&&(u=!!h(a.eL.SessionStorage)),u}function C(){var e=[];return A()&&(0,n.zav)((0,n.zS2)("sessionStorage"),function(t){e[s.y5](t)}),e}function S(e,t){var r=f();if(null!==r)try{return r.getItem(t)}catch(t){u=!1,(0,i.ZP)(e,2,2,"Browser failed read of session storage. "+(0,o.lL)(t),{exception:(0,n.mmD)(t)})}return null}function E(e,t,r){var a=f();if(null!==a)try{return a.setItem(t,r),!0}catch(t){u=!1,(0,i.ZP)(e,2,4,"Browser failed write to session storage. "+(0,o.lL)(t),{exception:(0,n.mmD)(t)})}return!1}function b(e,t){var r=f();if(null!==r)try{return r[s.AZ](t),!0}catch(t){u=!1,(0,i.ZP)(e,2,6,"Browser failed removal of session storage item. "+(0,o.lL)(t),{exception:(0,n.mmD)(t)})}return!1}},4822:(e,t,r)=>{"use strict";r.d(t,{EO:()=>A,F2:()=>D,Go:()=>b,H$:()=>x,Hh:()=>S,P$:()=>w,Rx:()=>l,TC:()=>E,UM:()=>T,WB:()=>P,X$:()=>k,cq:()=>N,ei:()=>L,g8:()=>y,gj:()=>_,h3:()=>C,m0:()=>R,u9:()=>M,wJ:()=>O,xE:()=>d,yD:()=>I});var n,i=r(269),o=r(7292),a=r(9882),s=r(5664),c=r(937),u=r(1739),l="4.3.4",d="1DS-Web-JS-"+l,h=s.Wy.hasOwnProperty,f="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",p="withCredentials",g="timeout",m=((n={})[0]=0,n[2]=6,n[1]=1,n[3]=7,n[4098]=6,n[4097]=1,n[4099]=7,n),v=null,y=(0,i.Wtk)(),w=(0,i.Vdv)();function I(e){return!(e===c.m5||(0,i.hXl)(e))}function A(e){if(e){var t=(0,i.HzD)(e,"-");if(t>-1)return(0,i.ZWZ)(e,t)}return c.m5}function C(){return null===v&&(v=!(0,i.b07)(Uint8Array)&&!function(){var e=(0,i.w3n)();if(!(0,i.b07)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t[u.Sj]("safari")>=0||t[u.Sj]("firefox")>=0)&&t[u.Sj]("chrome")<0)return!0}return!1}()&&!(0,o.lV)()),v}function S(e){return!!(e&&(0,i.EtT)(e)&&e>=1&&e<=4)}function E(e,t,r){if(!t&&!I(t)||"string"!=typeof e)return null;var n=typeof t;if("string"===n||"number"===n||"boolean"===n||(0,i.cyL)(t))t={value:t};else if("object"!==n||h.call(t,"value")){if((0,i.hXl)(t[u.pF])||t[u.pF]===c.m5||!(0,i.KgX)(t[u.pF])&&!(0,i.EtT)(t[u.pF])&&!(0,i.Lmq)(t[u.pF])&&!(0,i.cyL)(t[u.pF]))return null}else t={value:r?JSON.stringify(t):t};if((0,i.cyL)(t[u.pF])&&!O(t[u.pF]))return null;if(!(0,i.hXl)(t[u.QV])){if((0,i.cyL)(t[u.pF])||!R(t[u.QV]))return null;t[u.pF]=t[u.pF].toString()}return t}function b(e,t,r){var n=-1;if(!(0,i.b07)(e))if(t>0&&(32===t?n=8192:t<=13&&(n=t<<5)),function(e){return e>=0&&e<=9}(r))-1===n&&(n=0),n|=r;else{var o=m[N(e)]||-1;-1!==n&&-1!==o?n|=o:6===o&&(n=o)}return n}function T(e,t,r){var n;return void 0===r&&(r=!0),e&&(n=e.get(t),r&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||c.m5}function _(e){void 0===e&&(e="D");var t=(0,a.aq)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,c.m5)),t}function k(e,t,r,n,o){var a={},s=!1,c=0,l=arguments[u.oI],d=arguments;for((0,i.Lmq)(d[0])&&(s=d[0],c++);c<l;c++)e=d[c],(0,i.zav)(e,function(e,t){s&&t&&(0,i.Gvm)(t)?(0,i.cyL)(t)?(a[e]=a[e]||[],(0,i.Iuo)(t,function(t,r){t&&(0,i.Gvm)(t)?a[e][r]=k(!0,a[e][r],t):a[e][r]=t})):a[e]=k(!0,a[e],t):a[e]=t});return a}var P=i.UUD;function R(e){return 0===e||e>0&&e<=13||32===e}function O(e){return e[u.oI]>0}function M(e,t){var r=e;r[u.dg]=r[u.dg]||{},r[u.dg][u.Jg]=r[u.dg][u.Jg]||{},r[u.dg][u.Jg][t]=P()}function N(e){var t=0;if(null!=e){var r=typeof e;"string"===r?t=1:"number"===r?t=2:"boolean"===r?t=3:r===s._1&&(t=4,(0,i.cyL)(e)?(t=4096,e[u.oI]>0&&(t|=N(e[0]))):h.call(e,"value")&&(t=8192|N(e[u.pF])))}return t}function D(){return!!(0,i.zS2)("chrome")}function x(e,t,r,n,i,o){function a(e,t,r){try{e[t]=r}catch(e){}}void 0===n&&(n=!1),void 0===i&&(i=!1);var s=new XMLHttpRequest;return n&&a(s,f,n),r&&a(s,p,r),s.open(e,t,!i),r&&a(s,p,r),!i&&o&&a(s,g,o),s}function L(e){return e>0}},4875:(e,t,r)=>{"use strict";r.d(t,{f:()=>n});var n=(0,r(4282).H)({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2})},4977:(e,t,r)=>{var n=r(9589);e.exports=n.satisfies(process.version,"^6.12.0 || >=8.0.0")},5014:(e,t,r)=>{"use strict";r.d(t,{J:()=>s});var n=r(5025),i=r(5130),o=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},a=r(7975),s=function(){function e(e,t,r,s,c,u,l,d,h){this.aiDataContract={ver:1,metrics:1,properties:0};var f=this;f.ver=2;var p=new o;p[i.F2]=s>0?s:void 0,p.max=isNaN(u)||null===u?void 0:u,p.min=isNaN(c)||null===c?void 0:c,p[i.RS]=(0,a.Rr)(e,t)||n.R2,p.value=r,p.stdDev=isNaN(l)||null===l?void 0:l,f.metrics=[p],f[i.$y]=(0,a.xP)(e,d),f[i.XA]=(0,a.Vj)(e,h)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}()},5025:(e,t,r)=>{"use strict";r.d(t,{R2:()=>u,_G:()=>s,jp:()=>o,ks:()=>l,tU:()=>i,wc:()=>c,xF:()=>n,ym:()=>a});var n="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",i="sampleRate",o="ProcessLegacy",a="http.method",s="https://dc.services.visualstudio.com",c="/v2/track",u="not_specified",l="iKey"},5032:(e,t,r)=>{const n=r(8311),i=r(3904),{ANY:o}=i,a=r(7638),s=r(560),c=[new i(">=0.0.0-0")],u=[new i(">=0.0.0")],l=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=r.includePrerelease?c:u}if(1===t.length&&t[0].semver===o){if(r.includePrerelease)return!0;t=u}const n=new Set;let i,l,f,p,g,m,v;for(const t of e)">"===t.operator||">="===t.operator?i=d(i,t,r):"<"===t.operator||"<="===t.operator?l=h(l,t,r):n.add(t.semver);if(n.size>1)return null;if(i&&l){if(f=s(i.semver,l.semver,r),f>0)return null;if(0===f&&(">="!==i.operator||"<="!==l.operator))return null}for(const e of n){if(i&&!a(e,String(i),r))return null;if(l&&!a(e,String(l),r))return null;for(const n of t)if(!a(e,String(n),r))return!1;return!0}let y=!(!l||r.includePrerelease||!l.semver.prerelease.length)&&l.semver,w=!(!i||r.includePrerelease||!i.semver.prerelease.length)&&i.semver;y&&1===y.prerelease.length&&"<"===l.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,i)if(w&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===w.major&&e.semver.minor===w.minor&&e.semver.patch===w.patch&&(w=!1),">"===e.operator||">="===e.operator){if(p=d(i,e,r),p===e&&p!==i)return!1}else if(">="===i.operator&&!a(i.semver,String(e),r))return!1;if(l)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(g=h(l,e,r),g===e&&g!==l)return!1}else if("<="===l.operator&&!a(l.semver,String(e),r))return!1;if(!e.operator&&(l||i)&&0!==f)return!1}return!(i&&m&&!l&&0!==f||l&&v&&!i&&0!==f||w||y)},d=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;e:for(const n of e.set){for(const e of t.set){const t=l(n,e,r);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},5034:(e,t,r)=>{"use strict";r.d(t,{It:()=>F,gi:()=>N,um:()=>O,xN:()=>M});var n,i,o,a=r(269),s=r(2475),c=r(9749),u=r(6182),l=r(3775),d=r(7292),h=r(3673),f=r(6492),p="toGMTString",g="toUTCString",m="cookie",v="expires",y="isCookieUseDisabled",w="disableCookiesUsage",I="_ckMgr",A=null,C=null,S=null,E={},b={},T=((n={cookieCfg:(0,s.NU)((i={},i[f.Fk]={fb:"cookieDomain",dfVal:h.Gh},i.path={fb:"cookiePath",dfVal:h.Gh},i.enabled=f.HP,i.ignoreCookies=f.HP,i.blockedCookies=f.HP,i)),cookieDomain:f.HP,cookiePath:f.HP})[w]=f.HP,n);function _(){!o&&(o=(0,a.nRs)(function(){return(0,a.YEm)()}))}function k(e){return!e||e.isEnabled()}function P(e,t){return!!(t&&e&&(0,a.cyL)(e.ignoreCookies))&&-1!==(0,a.rDm)(e.ignoreCookies,t)}function R(e,t){var r=t[u.XM];if((0,a.hXl)(r)){var n=void 0;(0,a.b07)(e[y])||(n=!e[y]),(0,a.b07)(e[w])||(n=!e[w]),r=n}return r}function O(e,t){var r;if(e)r=e.getCookieMgr();else if(t){var n=t.cookieCfg;r=n&&n[I]?n[I]:M(t)}return r||(r=function(e,t){var r=M[I]||b[I];return r||(r=M[I]=M(e,t),b[I]=r),r}(t,(e||{})[u.Uw])),r}function M(e,t){var r,n,i,o,s,l,m,y,w;e=(0,c.e)(e||b,null,t).cfg,s=(0,c.a)(e,function(t){t[u.h0](t.cfg,T),n=t.ref(t.cfg,"cookieCfg"),i=n[f.QW]||"/",o=n[f.Fk],l=!1!==R(e,n),m=n.getCookie||U,y=n.setCookie||q,w=n.delCookie||q},t);var A=((r={isEnabled:function(){var r=!1!==R(e,n)&&l&&N(t),i=b[I];return r&&i&&A!==i&&(r=k(i)),r},setEnabled:function(e){l=!1!==e,n[u.XM]=e},set:function(e,t,r,s,c){var l=!1;if(k(A)&&!function(e,t){return!!(t&&e&&(0,a.cyL)(e.blockedCookies)&&-1!==(0,a.rDm)(e.blockedCookies,t))||P(e,t)}(n,e)){var m={},w=(0,a.EHq)(t||f.m5),I=(0,a.HzD)(w,";");if(-1!==I&&(w=(0,a.EHq)((0,a.ZWZ)(t,I)),m=D((0,a.P0f)(t,I+1))),(0,h.KY)(m,f.Fk,s||o,a.zzB,a.b07),!(0,a.hXl)(r)){var S=(0,d.lT)();if((0,a.b07)(m[v])){var E=(0,a.f0d)()+1e3*r;if(E>0){var b=new Date;b.setTime(E),(0,h.KY)(m,v,x(b,S?p:g)||x(b,S?p:g)||f.m5,a.zzB)}}S||(0,h.KY)(m,"max-age",f.m5+r,null,a.b07)}var T=(0,d.g$)();T&&"https:"===T[u.Qg]&&((0,h.KY)(m,"secure",null,null,a.b07),null===C&&(C=!F(((0,a.w3n)()||{})[u.tX])),C&&(0,h.KY)(m,"SameSite","None",null,a.b07)),(0,h.KY)(m,f.QW,c||i,null,a.b07),y(e,L(w,m)),l=!0}return l},get:function(e){var t=f.m5;return k(A)&&!P(n,e)&&(t=m(e)),t},del:function(e,t){var r=!1;return k(A)&&(r=A.purge(e,t)),r},purge:function(e,r){var n,i=!1;if(N(t)){var o=((n={})[f.QW]=r||"/",n[v]="Thu, 01 Jan 1970 00:00:01 GMT",n);(0,d.lT)()||(o["max-age"]="0"),w(e,L(f.m5,o)),i=!0}return i}})[u.M5]=function(e){s&&s.rm(),s=null},r);return A[I]=A,A}function N(e){if(null===A){A=!1,!o&&_();try{var t=o.v||{};A=void 0!==t[m]}catch(t){(0,l.ZP)(e,2,68,"Cannot access document.cookie - "+(0,h.lL)(t),{exception:(0,a.mmD)(t)})}}return A}function D(e){var t={};if(e&&e[u.oI]){var r=(0,a.EHq)(e)[u.sY](";");(0,a.Iuo)(r,function(e){if(e=(0,a.EHq)(e||f.m5)){var r=(0,a.HzD)(e,"=");-1===r?t[e]=null:t[(0,a.EHq)((0,a.ZWZ)(e,r))]=(0,a.EHq)((0,a.P0f)(e,r+1))}})}return t}function x(e,t){return(0,a.Tnt)(e[t])?e[t]():null}function L(e,t){var r=e||f.m5;return(0,a.zav)(t,function(e,t){r+="; "+e+((0,a.hXl)(t)?f.m5:"="+t)}),r}function U(e){var t=f.m5;if(!o&&_(),o.v){var r=o.v[m]||f.m5;S!==r&&(E=D(r),S=r),t=(0,a.EHq)(E[e]||f.m5)}return t}function q(e,t){!o&&_(),o.v&&(o.v[m]=e+"="+t)}function F(e){return!(!(0,a.KgX)(e)||!(0,h.Ju)(e,"CPU iPhone OS 12")&&!(0,h.Ju)(e,"iPad; CPU OS 12")&&!((0,h.Ju)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,h.Ju)(e,"Version/")&&(0,h.Ju)(e,"Safari"))&&(!(0,h.Ju)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,a.Cv9)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,h.Ju)(e,"Chrome/5")&&!(0,h.Ju)(e,"Chrome/6")&&(!(0,h.Ju)(e,"UnrealEngine")||(0,h.Ju)(e,"Chrome"))&&!(0,h.Ju)(e,"UCBrowser/12")&&!(0,h.Ju)(e,"UCBrowser/11"))}},5130:(e,t,r)=>{"use strict";r.d(t,{$e:()=>y,$y:()=>b,AZ:()=>u,Av:()=>L,C9:()=>v,Cx:()=>p,F2:()=>h,Fq:()=>R,IE:()=>D,J$:()=>_,Jj:()=>w,Jm:()=>f,OK:()=>S,OL:()=>o,Ol:()=>A,QE:()=>N,RS:()=>l,Ue:()=>I,Ur:()=>P,XA:()=>T,fd:()=>H,h_:()=>q,i9:()=>m,lW:()=>x,lx:()=>U,oI:()=>i,on:()=>E,pM:()=>d,qd:()=>F,qg:()=>k,r1:()=>O,sY:()=>n,up:()=>C,vu:()=>M,xE:()=>s,y5:()=>c,zV:()=>a,zw:()=>g});var n="split",i="length",o="toLowerCase",a="ingestionendpoint",s="toString",c="push",u="removeItem",l="name",d="message",h="count",f="preTriggerDate",p="disabled",g="interval",m="daysOfMonth",v="date",y="getUTCDate",w="stringify",I="pathname",A="correlationHeaderExcludePatterns",C="extensionConfig",S="exceptions",E="parsedStack",b="properties",T="measurements",_="sizeInBytes",k="typeName",P="severityLevel",R="problemGroup",O="isManual",M="CreateFromInterface",N="assembly",D="fileName",x="hasFullStack",L="level",U="method",q="line",F="duration",H="receivedResponse"},5200:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(e,t,r)<=0},5342:(e,t,r)=>{const n=r(7075);e.exports=(e,t,r)=>n(e,t,"<",r)},5396:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.oneDataSystemClientFactory=void 0,t.oneDataSystemClientFactory=async(e,t,n)=>{let i=await(async(e,t,n)=>{const i=await Promise.resolve().then(()=>o(r(956))),a=await Promise.resolve().then(()=>o(r(8916))),s=new i.AppInsightsCore,c=new a.PostChannel,u={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[c]]};if(n){u.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:n};u.extensionConfig[c.identifier]=e}const l=t.workspace.getConfiguration("telemetry").get("internalTesting");return s.initialize(u,[]),s.addTelemetryInitializer(e=>{e.ext=e.ext??{},e.ext.web=e.ext.web??{},e.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',l&&(e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)}),s})(e,t,n);return{logEvent:(e,t)=>{try{i?.track({name:e,baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:async()=>{try{return new Promise((e,t)=>{i?i.flush(!0,e=>{e||t("Failed to flush app 1DS!")}):e()})}catch(e){throw new Error("Failed to flush 1DS!\n"+e.message)}},dispose:async()=>new Promise(e=>{i?i.unload(!1,()=>{e(),i=void 0},1e3):e()})}}},5397:(e,t,r)=>{"use strict";r.d(t,{WJ:()=>A});var n=r(659),i=r(269),o=r(5025),a=r(5130),s=r(7975),c="error",u="stack",l="stackDetails",d="errorSrc",h="message",f="description";function p(e,t){var r=e;return r&&!(0,i.KgX)(r)&&(JSON&&JSON[a.Jj]?(r=JSON[a.Jj](e),!t||r&&"{}"!==r||(r=(0,i.Tnt)(e[a.xE])?e[a.xE]():""+e)):r=e+" - (Missing JSON.stringify)"),r||""}function g(e,t){var r=e;return e&&(r&&!(0,i.KgX)(r)&&(r=e[h]||e[f]||r),r&&!(0,i.KgX)(r)&&(r=p(r,!0)),e.filename&&(r=r+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(0,i.HzD)(r||"",t)&&(r=t+": "+r),r||""}function m(e){return e&&e.src&&(0,i.KgX)(e.src)&&e.obj&&(0,i.cyL)(e.obj)}function v(e){var t=e||"";(0,i.KgX)(t)||(t=(0,i.KgX)(t[u])?t[u]:""+t);var r=t[a.sY]("\n");return{src:t,obj:r}}function y(e){var t=null;if(e)try{if(e[u])t=v(e[u]);else if(e[c]&&e[c][u])t=v(e[c][u]);else if(e.exception&&e.exception[u])t=v(e.exception[u]);else if(m(e))t=e;else if(m(e[l]))t=e[l];else if((0,i.zkX)()&&(0,i.zkX)().opera&&e[h])t=function(e){for(var t=[],r=e[a.sY]("\n"),n=0;n<r[a.oI];n++){var i=r[n];r[n+1]&&(i+="@"+r[n+1],n++),t[a.y5](i)}return{src:e,obj:t}}(e[a.pM]);else if(e.reason&&e.reason[u])t=v(e.reason[u]);else if((0,i.KgX)(e))t=v(e);else{var r=e[h]||e[f]||"";(0,i.KgX)(e[d])&&(r&&(r+="\n"),r+=" from "+e[d]),r&&(t=v(r))}}catch(e){t=v(e)}return t||{src:"",obj:null}}function w(e){var t="";if(e&&!(t=e.typeName||e[a.RS]||""))try{var r=/function (.{1,200})\(/.exec(e.constructor[a.xE]());t=r&&r[a.oI]>1?r[1]:""}catch(e){}return t}function I(e){if(e)try{if(!(0,i.KgX)(e)){var t=w(e),r=p(e,!1);return r&&"{}"!==r||(e[c]&&(t=w(e=e[c])),r=p(e,!0)),0!==(0,i.HzD)(r,t)&&"String"!==t?t+":"+r:r}}catch(e){}return""+(e||"")}var A=function(){function e(e,t,r,n,o,c){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var u=this;u.ver=2,function(e){try{if((0,i.Gvm)(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(e){}return!1}(t)?(u[a.OK]=t[a.OK]||[],u[a.$y]=t[a.$y],u[a.XA]=t[a.XA],t[a.Ur]&&(u[a.Ur]=t[a.Ur]),t.id&&(u.id=t.id,t[a.$y].id=t.id),t[a.Fq]&&(u[a.Fq]=t[a.Fq]),(0,i.hXl)(t[a.r1])||(u[a.r1]=t[a.r1])):(r||(r={}),c&&(r.id=c),u[a.OK]=[new C(e,t,r)],u[a.$y]=(0,s.xP)(e,r),u[a.XA]=(0,s.Vj)(e,n),o&&(u[a.Ur]=o),c&&(u.id=c))}return e.CreateAutoException=function(e,t,r,n,i,o,s,c){var u,l=w(i||o||e);return(u={})[a.pM]=g(e,l),u.url=t,u.lineNumber=r,u.columnNumber=n,u.error=I(i||o||e),u.evt=I(o||e),u[a.qg]=l,u.stackDetails=y(s||i||o),u.errorSrc=c,u},e.CreateFromInterface=function(t,r,o,s){var c=r[a.OK]&&(0,i.W$7)(r[a.OK],function(e){return C[a.vu](t,e)});return new e(t,(0,n.Im)((0,n.Im)({},r),{exceptions:c}),o,s)},e.prototype.toInterface=function(){var e,t=this,r=t.exceptions,n=t.properties,o=t.measurements,s=t.severityLevel,c=t.problemGroup,u=t.id,l=t.isManual,d=r instanceof Array&&(0,i.W$7)(r,function(e){return e.toInterface()})||void 0;return(e={ver:"4.0"})[a.OK]=d,e.severityLevel=s,e.properties=n,e.measurements=o,e.problemGroup=c,e.id=u,e.isManual=l,e},e.CreateSimpleException=function(e,t,r,n,i,o){var s;return{exceptions:[(s={},s[a.lW]=!0,s.message=e,s.stack=i,s.typeName=t,s)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=I,e}(),C=function(){function e(e,t,r){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var n=this;if(function(e){try{if((0,i.Gvm)(e))return"hasFullStack"in e&&"typeName"in e}catch(e){}return!1}(t))n[a.qg]=t[a.qg],n[a.pM]=t[a.pM],n[u]=t[u],n[a.on]=t[a.on]||[],n[a.lW]=t[a.lW];else{var d=t,h=d&&d.evt;(0,i.bJ7)(d)||(d=d[c]||h||d),n[a.qg]=(0,s.Rr)(e,w(d))||o.R2,n[a.pM]=(0,s.Vk)(e,g(t||d,n[a.qg]))||o.R2;var f=t[l]||y(t);n[a.on]=function(e){var t,r=e.obj;if(r&&r[a.oI]>0){t=[];var n=0,o=0;if((0,i.Iuo)(r,function(e){var r=e[a.xE]();if(S.regex.test(r)){var i=new S(r,n++);o+=i[a.J$],t[a.y5](i)}}),o>32768)for(var s=0,c=t[a.oI]-1,u=0,l=s,d=c;s<c;){if((u+=t[s][a.J$]+t[c][a.J$])>32768){var h=d-l+1;t.splice(l,h);break}l=s,d=c,s++,c--}}return t}(f),(0,i.cyL)(n[a.on])&&(0,i.W$7)(n[a.on],function(t){t[a.QE]=(0,s.Rr)(e,t[a.QE]),t[a.IE]=(0,s.Rr)(e,t[a.IE])}),n[u]=(0,s.Vt)(e,function(e){var t="";return e&&(e.obj?(0,i.Iuo)(e.obj,function(e){t+=e+"\n"}):t=e.src||""),t}(f)),n.hasFullStack=(0,i.cyL)(n.parsedStack)&&n.parsedStack[a.oI]>0,r&&(r[a.qg]=r[a.qg]||n[a.qg])}}return e.prototype.toInterface=function(){var e,t=this,r=t[a.on]instanceof Array&&(0,i.W$7)(t[a.on],function(e){return e.toInterface()});return(e={id:t.id,outerId:t.outerId,typeName:t[a.qg],message:t[a.pM],hasFullStack:t[a.lW],stack:t[u]})[a.on]=r||void 0,e},e.CreateFromInterface=function(t,r){var o=r[a.on]instanceof Array&&(0,i.W$7)(r[a.on],function(e){return S[a.vu](e)})||r[a.on];return new e(t,(0,n.Im)((0,n.Im)({},r),{parsedStack:o}))},e}(),S=function(){function e(t,r){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var n=this;if(n[a.J$]=0,"string"==typeof t){var o=t;n[a.Av]=r,n[a.lx]="<no_method>",n[a.QE]=(0,i.EHq)(o),n[a.IE]="",n[a.h_]=0;var s=o.match(e.regex);s&&s[a.oI]>=5&&(n[a.lx]=(0,i.EHq)(s[2])||n[a.lx],n[a.IE]=(0,i.EHq)(s[4]),n[a.h_]=parseInt(s[5])||0)}else n[a.Av]=t[a.Av],n[a.lx]=t[a.lx],n[a.QE]=t[a.QE],n[a.IE]=t[a.IE],n[a.h_]=t[a.h_],n[a.J$]=0;n.sizeInBytes+=n.method[a.oI],n.sizeInBytes+=n.fileName[a.oI],n.sizeInBytes+=n.assembly[a.oI],n[a.J$]+=e.baseSize,n.sizeInBytes+=n.level.toString()[a.oI],n.sizeInBytes+=n.line.toString()[a.oI]}return e.CreateFromInterface=function(t){return new e(t,null)},e.prototype.toInterface=function(){var e=this;return{level:e[a.Av],method:e[a.lx],assembly:e[a.QE],fileName:e[a.IE],line:e[a.h_]}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}()},5571:(e,t,r)=>{const n=r(7075);e.exports=(e,t,r)=>n(e,t,">",r)},5580:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(e,t,r)>0},5584:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});const s=a(r(1398)),c=s.window.createOutputChannel(s.l10n.t("Microsoft Authentication"),{log:!0});t.default=c},5664:(e,t,r)=>{"use strict";r.d(t,{Wy:()=>c,_1:()=>i,bA:()=>o,hW:()=>n,s6:()=>s,vR:()=>a});var n="function",i="object",o="undefined",a="prototype",s=Object,c=s[a]},5692:e=>{"use strict";e.exports=require("https")},5747:(e,t,r)=>{var n=r(3387),i=r(7599);t.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],t.sign=n.sign,t.verify=i.verify,t.decode=i.decode,t.isValid=i.isValid,t.createSign=function(e){return new n(e)},t.createVerify=function(e){return new i(e)}},5927:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppInsightsCore:()=>vt._,ApplicationInsights:()=>kt,Sender:()=>gt,SeverityLevel:()=>bt.O,arrForEach:()=>A.Iuo,isNullOrUndefined:()=>A.hXl,proxyFunctions:()=>I.o$,throwError:()=>A.$8});var n=r(8279),i=r(659),o=r(5025),a=r(3072),s=r(2445),c=r(1448),u=r(4164),l=r(5397),d=r(5014),h=r(1365),f=r(740),p=r(7952),g=r(4658),m=r(2318),v=r(2910),y=r(2475),w=r(3775),I=r(3673),A=r(269),C=r(6149),S=r(4276),E=r(9749),b=r(2317),T=r(4875),_=r(7292),k=r(856),P=r(4013),R=r(1190),O=r(8257),M=r(1575),N=r(7975),D=r(1062),x=r(7358),L="duration",U="tags",q="deviceType",F="data",H="name",B="traceID",z="length",j="stringify",$="measurements",V="dataType",K="envelopeType",G="toString",W="_get",X="enqueue",Y="count",Q="eventsLimitInMem",J="push",Z="item",ee="emitLineDelimitedJson",te="clear",re="createNew",ne="markAsSent",ie="clearSent",oe="bufferOverride",ae="BUFFER_KEY",se="SENT_BUFFER_KEY",ce="concat",ue="MAX_BUFFER_SIZE",le="triggerSend",de="diagLog",he="initialize",fe="_sender",pe="endpointUrl",ge="instrumentationKey",me="customHeaders",ve="maxBatchSizeInBytes",ye="onunloadDisableBeacon",we="isBeaconApiDisabled",Ie="alwaysUseXhrOverride",Ae="disableXhr",Ce="enableSessionStorageBuffer",Se="_buffer",Ee="onunloadDisableFetch",be="disableSendBeaconSplit",Te="enableSendPromise",_e="getSenderInst",ke="unloadTransports",Pe="convertUndefined",Re="maxBatchInterval",Oe="serialize",Me="_onError",Ne="_onPartialSuccess",De="_onSuccess",xe="itemsReceived",Le="itemsAccepted",Ue="oriPayload",qe="baseType",Fe="sampleRate",He="eventsSendRequest",Be="getSamplingScore",ze="baseType",je="baseData",$e="properties",Ve="true";function Ke(e,t,r){return(0,I.KY)(e,t,r,A.zzB)}function Ge(e,t,r){(0,A.hXl)(e)||(0,A.zav)(e,function(e,n){(0,A.EtT)(n)?r[e]=n:(0,A.KgX)(n)?t[e]=n:(0,_.Z)()&&(t[e]=(0,_.hm)()[j](n))})}function We(e,t){(0,A.hXl)(e)||(0,A.zav)(e,function(r,n){e[r]=n||t})}function Xe(e,t,r,n){var a=new D.L(e,n,t);Ke(a,"sampleRate",r[o.tU]),(r[je]||{}).startTime&&(a.time=(0,I._u)(r[je].startTime)),a.iKey=r.iKey;var s=r.iKey.replace(/-/g,"");return a[H]=a[H].replace("{0}",s),function(e,t,r){var n=r[U]=r[U]||{},o=t.ext=t.ext||{},a=t[U]=t[U]||[],s=o.user;s&&(Ke(n,M.O.userAuthUserId,s.authId),Ke(n,M.O.userId,s.id||s.localId));var c=o.app;c&&Ke(n,M.O.sessionId,c.sesId);var u=o.device;u&&(Ke(n,M.O.deviceId,u.id||u.localId),Ke(n,M.O[q],u.deviceClass),Ke(n,M.O.deviceIp,u.ip),Ke(n,M.O.deviceModel,u.model),Ke(n,M.O[q],u[q]));var l=t.ext.web;if(l){Ke(n,M.O.deviceLanguage,l.browserLang),Ke(n,M.O.deviceBrowserVersion,l.browserVer),Ke(n,M.O.deviceBrowser,l.browser);var d=r[F]=r[F]||{},h=d[je]=d[je]||{},f=h[$e]=h[$e]||{};Ke(f,"domain",l.domain),Ke(f,"isManual",l.isManual?Ve:null),Ke(f,"screenRes",l.screenRes),Ke(f,"userConsent",l.userConsent?Ve:null)}var p=o.os;p&&(Ke(n,M.O.deviceOS,p[H]),Ke(n,M.O.deviceOSVersion,p.osVer));var g=o.trace;g&&(Ke(n,M.O.operationParentId,g.parentID),Ke(n,M.O.operationName,(0,N.Rr)(e,g[H])),Ke(n,M.O.operationId,g[B]));for(var m={},v=a[z]-1;v>=0;v--){var y=a[v];(0,A.zav)(y,function(e,t){m[e]=t}),a.splice(v,1)}(0,A.zav)(a,function(e,t){m[e]=t});var w=(0,i.Im)((0,i.Im)({},n),m);w[M.O.internalSdkVersion]||(w[M.O.internalSdkVersion]=(0,N.Rr)(e,"javascript:".concat(Qe.Version),64)),r[U]=(0,I.hW)(w)}(e,r,a),r[U]=r[U]||[],(0,I.hW)(a)}function Ye(e,t){(0,A.hXl)(t[je])&&(0,w.ZP)(e,1,46,"telemetryItem.baseData cannot be null.")}var Qe={Version:"3.3.4"};function Je(e,t,r){Ye(e,t);var n={},i={};t[ze]!==a.J[V]&&(n.baseTypeSource=t[ze]),t[ze]===a.J[V]?(n=t[je][$e]||{},i=t[je][$]||{}):t[je]&&Ge(t[je],n,i),Ge(t[F],n,i),(0,A.hXl)(r)||We(n,r);var o=t[je][H],s=new a.J(e,o,n,i),c=new x.B(a.J[V],s);return Xe(e,a.J[K],t,c)}var Ze,et,tt=function(){function e(t,r){var i=[],o=!1,a=r.maxRetryCnt;this[W]=function(){return i},this._set=function(e){return i=e},(0,n.A)(e,this,function(e){e[X]=function(n){e[Y]()>=r[Q]?o||((0,w.ZP)(t,2,105,"Maximum in-memory buffer size reached: "+e[Y](),!0),o=!0):(n.cnt=n.cnt||0,!(0,A.hXl)(a)&&n.cnt>a||i[J](n))},e[Y]=function(){return i[z]},e.size=function(){for(var e=i[z],t=0;t<i[z];t++)e+=i[t].item[z];return r[ee]||(e+=2),e},e[te]=function(){i=[],o=!1},e.getItems=function(){return i.slice(0)},e.batchPayloads=function(e){if(e&&e[z]>0){var t=[];return(0,A.Iuo)(e,function(e){t[J](e[Z])}),r[ee]?t.join("\n"):"["+t.join(",")+"]"}return null},e[re]=function(e,r,n){var o=i.slice(0);e=e||t,r=r||{};var a=n?new it(e,r):new rt(e,r);return(0,A.Iuo)(o,function(e){a[X](e)}),a}})}return e.__ieDyn=1,e}(),rt=function(e){function t(r,i){var o=e.call(this,r,i)||this;return(0,n.A)(t,o,function(e,t){e[ne]=function(e){t[te]()},e[ie]=function(e){}}),o}return(0,i.qU)(t,e),t.__ieDyn=1,t}(tt),nt=["AI_buffer","AI_sentBuffer"],it=function(e){function t(r,i){var o=e.call(this,r,i)||this,a=!1,s=null==i?void 0:i.namePrefix,c=i[oe]||{getItem:g.vH,setItem:g.Dt},u=c.getItem,l=c.setItem,d=i.maxRetryCnt;return(0,n.A)(t,o,function(e,n){var i=m(t[ae]),o=m(t[se]),c=function(){var e=[];try{return(0,A.Iuo)(nt,function(t){var r=C(t);if(e=e[ce](r),s){var n=C(s+"_"+t);e=e[ce](n)}}),e}catch(e){(0,w.ZP)(r,2,41,"Transfer events from previous buffers: "+(0,I.lL)(e)+". previous Buffer items can not be removed",{exception:(0,A.mmD)(e)})}return[]}(),h=o[ce](c),f=e._set(i[ce](h));function p(e,t){var r=[],n=[];return(0,A.Iuo)(e,function(e){n[J](e[Z])}),(0,A.Iuo)(t,function(e){(0,A.Tnt)(e)||-1!==(0,A.rDm)(n,e[Z])||r[J](e)}),r}function m(e){return v(s?s+"_"+e:e)}function v(e){try{var t=u(r,e);if(t){var n=(0,_.hm)().parse(t);if((0,A.KgX)(n)&&(n=(0,_.hm)().parse(n)),n&&(0,A.cyL)(n))return n}}catch(t){(0,w.ZP)(r,1,42," storage key: "+e+", "+(0,I.lL)(t),{exception:(0,A.mmD)(t)})}return[]}function y(e,t){var n=e;try{n=s?s+"_"+n:n;var i=JSON[j](t);l(r,n,i)}catch(e){l(r,n,JSON[j]([])),(0,w.ZP)(r,2,41," storage key: "+n+", "+(0,I.lL)(e)+". Buffer cleared",{exception:(0,A.mmD)(e)})}}function C(e){try{var t=v(e),n=[];return(0,A.Iuo)(t,function(e){var t={item:e,cnt:0};n[J](t)}),(0,g.v7)(r,e),n}catch(e){}return[]}f[z]>t[ue]&&(f[z]=t[ue]),y(t[se],[]),y(t[ae],f),e[X]=function(i){e[Y]()>=t[ue]?a||((0,w.ZP)(r,2,67,"Maximum buffer size reached: "+e[Y](),!0),a=!0):(i.cnt=i.cnt||0,!(0,A.hXl)(d)&&i.cnt>d||(n[X](i),y(t.BUFFER_KEY,e[W]())))},e[te]=function(){n[te](),y(t.BUFFER_KEY,e[W]()),y(t[se],[]),a=!1},e[ne]=function(n){y(t[ae],e._set(p(n,e[W]())));var i=m(t[se]);i instanceof Array&&n instanceof Array&&((i=i[ce](n))[z]>t[ue]&&((0,w.ZP)(r,1,67,"Sent buffer reached its maximum size: "+i[z],!0),i[z]=t[ue]),y(t[se],i))},e[ie]=function(e){var r=m(t[se]);r=p(e,r),y(t[se],r)},e[re]=function(n,i,o){o=!!o;var a=e[W]().slice(0),s=m(t[se]).slice(0);n=n||r,i=i||{},e[te]();var c=o?new t(n,i):new rt(n,i);return(0,A.Iuo)(a,function(e){c[X](e)}),o&&c[ne](s),c}}),o}var r;return(0,i.qU)(t,e),r=t,t.VERSION="_1",t.BUFFER_KEY="AI_buffer"+r.VERSION,t.SENT_BUFFER_KEY="AI_sentBuffer"+r.VERSION,t.MAX_BUFFER_SIZE=2e3,t}(tt),ot=function(){function e(t){(0,n.A)(e,this,function(e){function r(e,o){var a="__aiCircularRefCheck",s={};if(!e)return(0,w.ZP)(t,1,48,"cannot serialize object because it is null or undefined",{name:o},!0),s;if(e[a])return(0,w.ZP)(t,2,50,"Circular reference detected while serializing object",{name:o},!0),s;if(!e.aiDataContract){if("measurements"===o)s=i(e,"number",o);else if("properties"===o)s=i(e,"string",o);else if("tags"===o)s=i(e,"string",o);else if((0,A.cyL)(e))s=n(e,o);else{(0,w.ZP)(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:o},!0);try{(0,_.hm)()[j](e),s=e}catch(e){(0,w.ZP)(t,1,48,e&&(0,A.Tnt)(e[G])?e[G]():"Error serializing object",null,!0)}}return s}return e[a]=!0,(0,A.zav)(e.aiDataContract,function(i,a){var c=(0,A.Tnt)(a)?1&a():1&a,u=(0,A.Tnt)(a)?4&a():4&a,l=2&a,d=void 0!==e[i],h=(0,A.Gvm)(e[i])&&null!==e[i];if(!c||d||l){if(!u){var f;void 0!==(f=h?l?n(e[i],i):r(e[i],i):e[i])&&(s[i]=f)}}else(0,w.ZP)(t,1,24,"Missing required field specification. The field is required but not present on source",{field:i,name:o})}),delete e[a],s}function n(e,n){var i;if(e)if((0,A.cyL)(e)){i=[];for(var o=0;o<e[z];o++){var a=r(e[o],n+"["+o+"]");i[J](a)}}else(0,w.ZP)(t,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:n},!0);return i}function i(e,r,n){var i;return e&&(i={},(0,A.zav)(e,function(e,o){if("string"===r)void 0===o?i[e]="undefined":null===o?i[e]="null":o[G]?i[e]=o[G]():i[e]="invalid field: toString() is not defined.";else if("number"===r)if(void 0===o)i[e]="undefined";else if(null===o)i[e]="null";else{var a=parseFloat(o);i[e]=a}else i[e]="invalid field: "+n+" is of unknown type.",(0,w.ZP)(t,1,i[e],null,!0)})),i}e[Oe]=function(e){var n=r(e,"root");try{return(0,_.hm)()[j](n)}catch(e){(0,w.ZP)(t,1,48,e&&(0,A.Tnt)(e[G])?e[G]():"Error serializing object",null,!0)}}})}return e.__ieDyn=1,e}(),at=r(8596),st=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/e.INT_MAX_VALUE*100},e.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[z]<8;)e=e[ce](e);for(var t=5381,r=0;r<e[z];++r)t=(t<<5)+t+e.charCodeAt(r),t&=t;return Math.abs(t)},e.INT_MAX_VALUE=2147483647,e}(),ct=function(){var e=new st,t=new at.o;this[Be]=function(r){return r[U]&&r[U][t.userId]?e.getHashCodeScore(r[U][t.userId]):r.ext&&r.ext.user&&r.ext.user.id?e.getHashCodeScore(r.ext.user.id):r[U]&&r[U][t.operationId]?e.getHashCodeScore(r[U][t.operationId]):r.ext&&r.ext.telemetryTrace&&r.ext.telemetryTrace[B]?e.getHashCodeScore(r.ext.telemetryTrace[B]):100*Math.random()}},ut=function(){function e(e,t){this.INT_MAX_VALUE=2147483647;var r=t||(0,w.y0)(null);(e>100||e<0)&&(r.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[Fe]=e,this.samplingScoreGenerator=new ct}return e.prototype.isSampledIn=function(e){var t=this[Fe];return null==t||t>=100||e.baseType===d.J[V]||this.samplingScoreGenerator[Be](e)<t},e}(),lt=void 0;function dt(e){try{return e.responseText}catch(e){}return null}var ht,ft=(0,A.ZHX)(((Ze={endpointUrl:(0,y.Lx)(A.zzB,o._G+o.wc)})[ee]=(0,y.DD)(),Ze[Re]=15e3,Ze[ve]=102400,Ze.disableTelemetry=(0,y.DD)(),Ze[Ce]=(0,y.DD)(!0),Ze.isRetryDisabled=(0,y.DD)(),Ze[we]=(0,y.DD)(!0),Ze[be]=(0,y.DD)(!0),Ze[Ae]=(0,y.DD)(),Ze[Ee]=(0,y.DD)(),Ze[ye]=(0,y.DD)(),Ze[ge]=lt,Ze.namePrefix=lt,Ze.samplingPercentage=(0,y.Lx)(function(e){return!isNaN(e)&&e>0&&e<=100},100),Ze[me]=lt,Ze[Pe]=lt,Ze[Q]=1e4,Ze[oe]=!1,Ze.httpXHROverride={isVal:function(e){return e&&e.sendPOST},v:lt},Ze[Ie]=(0,y.DD)(),Ze.transports=lt,Ze.retryCodes=lt,Ze.maxRetryCnt={isVal:A.EtT,v:10},Ze)),pt=((et={})[a.J.dataType]=Je,et[s.C.dataType]=function(e,t,r){Ye(e,t);var n=t[je].message,i=t[je].severityLevel,o=t[je][$e]||{},a=t[je][$]||{};Ge(t[F],o,a),(0,A.hXl)(r)||We(o,r);var c=new s.C(e,n,i,o,a),u=new x.B(s.C[V],c);return Xe(e,s.C[K],t,u)},et[c.h.dataType]=function(e,t,r){var n;Ye(e,t);var i=t[je];(0,A.hXl)(i)||(0,A.hXl)(i[$e])||(0,A.hXl)(i[$e][L])?(0,A.hXl)(t[F])||(0,A.hXl)(t[F][L])||(n=t[F][L],delete t[F][L]):(n=i[$e][L],delete i[$e][L]);var o,a=t[je];((t.ext||{}).trace||{})[B]&&(o=t.ext.trace[B]);var s=a.id||o,u=a[H],l=a.uri,d=a[$e]||{},h=a[$]||{};if((0,A.hXl)(a.refUri)||(d.refUri=a.refUri),(0,A.hXl)(a.pageType)||(d.pageType=a.pageType),(0,A.hXl)(a.isLoggedIn)||(d.isLoggedIn=a.isLoggedIn[G]()),!(0,A.hXl)(a[$e])){var f=a[$e];(0,A.zav)(f,function(e,t){d[e]=t})}Ge(t[F],d,h),(0,A.hXl)(r)||We(d,r);var p=new c.h(e,u,l,n,d,h,s),g=new x.B(c.h[V],p);return Xe(e,c.h[K],t,g)},et[u.H.dataType]=function(e,t,r){Ye(e,t);var n=t[je],i=n[H],o=n.uri||n.url,a=n[$e]||{},s=n[$]||{};Ge(t[F],a,s),(0,A.hXl)(r)||We(a,r);var c=new u.H(e,i,o,void 0,a,s,n),l=new x.B(u.H[V],c);return Xe(e,u.H[K],t,l)},et[l.WJ.dataType]=function(e,t,r){Ye(e,t);var n=t[je][$]||{},i=t[je][$e]||{};Ge(t[F],i,n),(0,A.hXl)(r)||We(i,r);var o=t[je],a=l.WJ.CreateFromInterface(e,o,i,n),s=new x.B(l.WJ[V],a);return Xe(e,l.WJ[K],t,s)},et[d.J.dataType]=function(e,t,r){Ye(e,t);var n=t[je],i=n[$e]||{},o=n[$]||{};Ge(t[F],i,o),(0,A.hXl)(r)||We(i,r);var a=new d.J(e,n[H],n.average,n.sampleCount,n.min,n.max,n.stdDev,i,o),s=new x.B(d.J[V],a);return Xe(e,d.J[K],t,s)},et[h.A.dataType]=function(e,t,r){Ye(e,t);var n=t[je][$]||{},i=t[je][$e]||{};Ge(t[F],i,n),(0,A.hXl)(r)||We(i,r);var a=t[je];if((0,A.hXl)(a))return(0,w.OG)(e,"Invalid input for dependency data"),null;var s=a[$e]&&a[$e][o.ym]?a[$e][o.ym]:"GET",c=new h.A(e,a.id,a.target,a[H],a[L],a.success,a.responseCode,s,a.type,a.correlationContext,i,n),u=new x.B(h.A[V],c);return Xe(e,h.A[K],t,u)},et),gt=function(e){function t(){var r,i,a,s,c,u,l,d=e.call(this)||this;d.priority=1001,d.identifier=f.BreezeChannelIdentifier;var h,y,O,M,N,D,x,L,q,H,B,j,$,V,K,G,W,Q,ee,ae,se,ce,ue,Be,ze,je,$e,Ve=0;return(0,n.A)(t,d,function(e,n){function f(t,n){var i=dt(t);if(!t||i+""!="200"&&""!==i){var o=(0,R.x)(i);o&&o[xe]&&o[xe]>o[Le]&&!V?e[Ne](n,o):e[Me](n,(0,I.HU)(t))}else r=0,e[De](n,0)}function Ke(e,t,r){4===e.readyState&&at(e.status,t,e.responseURL,r,(0,I.r4)(e),dt(e)||e.response)}function Ge(e){try{if(e){var t=e[Ue];return t&&t[z]?t:null}}catch(e){}return null}function We(t,r){return!(B||(t?t.baseData&&!t[qe]?(r&&(0,w.ZP)(r,1,70,"Cannot send telemetry without baseData and baseType"),1):(t[qe]||(t[qe]="EventData"),e[fe]?(n=t,e._sample.isSampledIn(n)?(t[o.tU]=e._sample[Fe],0):(r&&(0,w.ZP)(r,2,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample[Fe]}),1)):(r&&(0,w.ZP)(r,1,28,"Sender was not initialized"),1)):(r&&(0,w.ZP)(r,1,7,"Cannot send empty telemetry"),1)));var n}function Xe(e,r){var n=e.iKey||j,i=t.constructEnvelope(e,n,r,$);if(i){var a=!1;if(e[U]&&e[U][o.jp]&&((0,A.Iuo)(e[U][o.jp],function(e){try{e&&!1===e(i)&&(a=!0,(0,w.OG)(r,"Telemetry processor check returns false"))}catch(e){(0,w.ZP)(r,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,I.lL)(e),{exception:(0,A.mmD)(e)},!0)}}),delete e[U][o.jp]),!a)return i}else(0,w.ZP)(r,1,47,"Unable to create an AppInsights envelope")}function Ye(t){var r="",n=e[de]();try{var i=We(t,n),o=null;i&&(o=Xe(t,n)),o&&(r=c[Oe](o))}catch(e){}return r}function Qe(e){var t="";return e&&e[z]&&(t="["+e.join(",")+"]"),t}function Je(e){var t,r=tt();return(t={urlString:M})[F]=e,t.headers=r,t}function Ze(t,r,n,i){void 0===i&&(i=!0);var o=et(r),a=t&&t.sendPOST;return a&&o?(i&&e._buffer[ne](r),a(o,function(t,n,i){return function(t,r,n,i){200===r&&t?e._onSuccess(t,t[z]):i&&e[Me](t,i)}(r,t,0,i)},!n)):null}function et(t){var r;if((0,A.cyL)(t)&&t[z]>0){var n=e[Se].batchPayloads(t),i=tt();return(r={})[F]=n,r.urlString=M,r.headers=i,r.disableXhrSync=se,r.disableFetchKeepAlive=!ce,r[Ue]=t,r}return null}function tt(){try{var e=l||{};return(0,m.Qu)(M)&&(e[v.a[6]]=v.a[7]),e}catch(e){}return null}function nt(t){var r=t?t[z]:0;return e[Se].size()+r>D&&(y&&!y.isOnline()||e[le](!0,null,10),!0)}function at(t,n,i,o,a,s){var c=null;if(e._appId||(c=(0,R.x)(s))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!st(i))return void e[Me](n,a);if(y&&!y.isOnline())return void(V||(gt(n,10),(0,w.ZP)(e[de](),2,40,". Offline - Response Code: ".concat(t,". Offline status: ").concat(!y.isOnline(),". Will retry to send ").concat(n.length," items."))));!V&&yt(t)?(gt(n),(0,w.ZP)(e[de](),2,40,". Response code "+t+". Will retry to send "+n[z]+" items.")):e[Me](n,a)}else st(i),206===t?(c||(c=(0,R.x)(s)),c&&!V?e[Ne](n,c):e[Me](n,a)):(r=0,e[De](n,o))}function st(e){return!(u>=10||(0,A.hXl)(e)||""===e||e===M||(M=e,++u,0))}function ct(e,t){if(!h)return Ze(je&&je[_e]([3],!0),e,t);h(e,!1)}function ht(e){try{if(e&&e[z])return(0,A.KgX)(e[0])}catch(e){}return null}function pt(t,r){var n=null;if((0,A.cyL)(t)){for(var i=t[z],o=0;o<t[z];o++)i+=t[o].item[z];return je.getSyncFetchPayload()+i<=65e3?n=2:(0,_.Uf)()?n=3:(n=1,(0,w.ZP)(e[de](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender.")),Ze(je&&je[_e]([n],!0),t,r)}return null}function gt(t,n){if(void 0===n&&(n=1),t&&0!==t[z]){var o=e[Se];o[ie](t),r++;for(var a=0,s=t;a<s.length;a++){var c=s[a];c.cnt=c.cnt||0,c.cnt++,o[X](c)}!function(e){var t;if(r<=1)t=10;else{var n=(Math.pow(2,r)-1)/2,o=Math.floor(Math.random()*n*10)+1;o*=e,t=Math.max(Math.min(o,3600),10)}var a=(0,A.f0d)()+1e3*t;i=a}(n),mt()}}function mt(){if(!s&&!a){var t=i?Math.max(0,i-(0,A.f0d)()):0,r=Math.max(K,t);s=(0,A.dRz)(function(){s=null,e[le](!0,null,1)},r)}}function vt(){s&&s.cancel(),s=null,i=null}function yt(e){return(0,A.hXl)($e)?401===e||408===e||429===e||500===e||502===e||503===e||504===e:$e[z]&&$e.indexOf(e)>-1}function wt(){e[fe]=null,e[Se]=null,e._appId=null,e._sample=null,l={},y=null,r=0,i=null,a=!1,s=null,c=null,u=0,Ve=0,h=null,O=null,M=null,N=null,D=0,x=!1,H=null,B=!1,j=null,$=lt,V=!1,G=null,Q=lt,se=!1,ce=!1,ze=!1,ue=null,Be=null,je=null,(0,A.vF1)(e,"_senderConfig",{g:function(){return(0,I.CP)({},ft)}})}wt(),e.pause=function(){vt(),a=!0},e.resume=function(){a&&(a=!1,i=null,nt(),mt())},e.flush=function(t,r,n){if(void 0===t&&(t=!0),!a){vt();try{return e[le](t,null,n||1)}catch(t){(0,w.ZP)(e[de](),1,22,"flush failed, telemetry will not be collected: "+(0,I.lL)(t),{exception:(0,A.mmD)(t)})}}},e.onunloadFlush=function(){if(!a)if(x||ae)try{return e[le](!0,ct,2)}catch(t){(0,w.ZP)(e[de](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,I.lL)(t),{exception:(0,A.mmD)(t)})}else e.flush(!1)},e.addHeader=function(e,t){l[e]=t},e[he]=function(t,o,a,s){e.isInitialized()&&(0,w.ZP)(e[de](),1,28,"Sender is already initialized"),n[he](t,o,a,s);var v=e.identifier;c=new ot(o.logger),r=0,i=null,e[fe]=null,u=0;var P=e[de]();O=(0,C.Hm)((0,S.Z)("Sender"),o.evtNamespace&&o.evtNamespace()),y=(0,p.G)(O),e._addHook((0,E.a)(t,function(t){var r=t.cfg;r.storagePrefix&&(0,g.vh)(r.storagePrefix);var n=(0,b.i8)(null,r,o).getExtCfg(v,ft),i=n[pe];if(M&&i===M){var a=r[pe];a&&a!==i&&(n[pe]=a)}(0,A.$XS)(n[ge])&&(n[ge]=r[ge]),(0,A.vF1)(e,"_senderConfig",{g:function(){return n}}),N!==n[pe]&&(M=N=n[pe]),o.activeStatus()===T.f.PENDING?e.pause():o.activeStatus()===T.f.ACTIVE&&e.resume(),H&&H!==n[me]&&(0,A.Iuo)(H,function(e){delete l[e.header]}),D=n[ve],x=(!1===n[ye]||!1===n[we])&&(0,_.Uf)(),L=!1===n[ye]&&(0,_.Uf)(),q=!1===n[we]&&(0,_.Uf)(),ae=n[Ie],se=!!n[Ae],$e=n.retryCodes;var s=n[oe],c=!!n[Ce]&&(!!s||(0,g.AN)()),u=n.namePrefix,p=c!==G||c&&Q!==u||c&&W!==s;if(e[Se]){if(p)try{e._buffer=e._buffer[re](P,n,c)}catch(t){(0,w.ZP)(e[de](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+(0,I.lL)(t),{exception:(0,A.mmD)(t)})}nt()}else e[Se]=c?new it(P,n):new rt(P,n);Q=u,G=c,W=s,ce=!n[Ee]&&(0,_.R7)(!0),ze=!!n[be],e._sample=new ut(n.samplingPercentage,P),j=n[ge],(0,A.$XS)(j)||function(e,t){var r=t.disableInstrumentationKeyValidation;return!((0,A.hXl)(r)||!r)||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)}(j,r)||(0,w.ZP)(P,1,100,"Invalid Instrumentation key "+j),H=n[me],(0,A.KgX)(M)&&!(0,m.Qu)(M)&&H&&H[z]>0?(0,A.Iuo)(H,function(e){d.addHeader(e.header,e.value)}):H=null,ee=n[Te];var y=function(){var t;try{var r={xdrOnComplete:function(e,t,r){var n=Ge(r);if(n)return f(e,n)},fetchOnComplete:function(e,t,r,n){var i=Ge(n);if(i)return at(e.status,i,e.url,i[z],e.statusText,r||"")},xhrOnComplete:function(e,t,r){var n=Ge(r);if(n)return Ke(e,n,n[z])},beaconOnRetry:function(t,r,n){return function(t,r,n){var i=t&&t[Ue];if(ze)Be&&Be(i,!0),(0,w.ZP)(e[de](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var o=[],a=0;a<i[z];a++){var s=i[a],c=[s];n(et(c),r)?e._onSuccess(c,c[z]):o[J](s)}o[z]>0&&(Be&&Be(o,!0),(0,w.ZP)(e[de](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}(t,r,n)}};return(t={})[Te]=ee,t.isOneDs=!1,t.disableCredentials=!1,t[Ae]=se,t.disableBeacon=!q,t.disableBeaconSync=!L,t.senderOnCompleteCallBack=r,t}catch(e){}return null}();je?je.SetConfig(y):(je=new k.v)[he](y,P);var C=n.httpXHROverride,S=null,E=null,R=(0,I.jL)([3,1,2],n.transports);S=je&&je[_e](R,!1);var O=je&&je.getFallbackInst();ue=function(e,t){return Ze(O,e,t)},Be=function(e,t){return Ze(O,e,t,!1)},S=ae?C:S||C||O,e[fe]=function(e,t){return Ze(S,e,t)},ce&&(h=pt);var U=(0,I.jL)([3,1],n[ke]);ce||(U=U.filter(function(e){return 2!==e})),E=je&&je[_e](U,!0),E=ae?C:E||C,(ae||n[ke]||!h)&&E&&(h=function(e,t){return Ze(E,e,t)}),h||(h=ue),B=n.disableTelemetry,$=n[Pe]||lt,V=n.isRetryDisabled,K=n[Re]}))},e.processTelemetry=function(t,r){var n,i=(r=e._getTelCtx(r))[de]();try{if(!We(t,i))return;var o=Xe(t,i);if(!o)return;var a=c[Oe](o),s=e[Se];nt(a);var u=((n={})[Z]=a,n.cnt=0,n);s[X](u),mt()}catch(e){(0,w.ZP)(i,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,I.lL)(e),{exception:(0,A.mmD)(e)})}e.processNext(t,r)},e.isCompletelyIdle=function(){return!a&&0===Ve&&0===e._buffer[Y]()},e.getOfflineListener=function(){return y},e._xhrReadyStateChange=function(e,t,r){if(!ht(t))return Ke(e,t,r)},e[le]=function(t,r,n){var i;if(void 0===t&&(t=!0),!a)try{var o=e[Se];if(B)o[te]();else{if(o[Y]()>0){var s=o.getItems();!function(t,r){var n,i=(n="getNotifyMgr",e.core[n]?e.core[n]():e.core._notificationManager);if(i&&i[He])try{i[He](t,r)}catch(t){(0,w.ZP)(e[de](),1,74,"send request notification failed: "+(0,I.lL)(t),{exception:(0,A.mmD)(t)})}}(n||0,t),i=r?r.call(e,s,t):e[fe](s,t)}new Date}vt()}catch(t){var c=(0,_.L0)();(!c||c>9)&&(0,w.ZP)(e[de](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,I.lL)(t),{exception:(0,A.mmD)(t)})}return i},e.getOfflineSupport=function(){var e;return(e={getUrl:function(){return M},createPayload:Je})[Oe]=Ye,e.batch=Qe,e.shouldProcess=function(e){return!!We(e)},e},e._doTeardown=function(t,r){e.onunloadFlush(),(0,P.K)(y,!1),wt()},e[Me]=function(t,r,n){if(!ht(t))return function(t,r){(0,w.ZP)(e[de](),2,26,"Failed to send telemetry.",{message:r}),e._buffer&&e._buffer[ie](t)}(t,r)},e[Ne]=function(t,r){if(!ht(t))return function(t,r){for(var n=[],i=[],o=0,a=r.errors.reverse();o<a.length;o++){var s=a[o],c=t.splice(s.index,1)[0];yt(s.statusCode)?i[J](c):n[J](c)}t[z]>0&&e[De](t,r[Le]),n[z]>0&&e[Me](n,(0,I.r4)(null,["partial success",r[Le],"of",r.itemsReceived].join(" "))),i[z]>0&&(gt(i),(0,w.ZP)(e[de](),2,40,"Partial success. Delivered: "+t[z]+", Failed: "+n[z]+". Will retry to send "+i[z]+" our of "+r[xe]+" items"))}(t,r)},e[De]=function(t,r){if(!ht(t))return function(t){e._buffer&&e._buffer[ie](t)}(t)},e._xdrOnLoad=function(e,t){if(!ht(t))return f(e,t)}}),d}return(0,i.qU)(t,e),t.constructEnvelope=function(e,t,r,n){var o;return o=t===e.iKey||(0,A.hXl)(t)?e:(0,i.Im)((0,i.Im)({},e),{iKey:t}),(pt[o.baseType]||Je)(r,o,n)},t}(O.s),mt=r(4484),vt=r(2774),yt=r(8205),wt="instrumentationKey",It="connectionString",At="instrumentationkey",Ct="endpointUrl",St="ingestionendpoint",Et="userOverrideEndpointUrl",bt=r(9762),Tt=void 0,_t=((ht={diagnosticLogInterval:(0,y.Lx)(function(e){return e&&e>0},1e4)})[It]=Tt,ht[Ct]=Tt,ht[wt]=Tt,ht.extensionConfig={},ht),kt=function(){function e(t){var r,i=new vt._;function a(e){e&&(e.baseData=e.baseData||{},e.baseType=e.baseType||"EventData"),i.track(e)}((0,A.hXl)(t)||(0,A.hXl)(t[wt])&&(0,A.hXl)(t[It]))&&(0,A.$8)("Invalid input configuration"),(0,n.A)(e,this,function(e){function n(){var e=(0,E.e)(t||{},_t);r=e.cfg,i.addUnloadHook((0,E.a)(e,function(){var e=r[It];if((0,A.$XS)(e)){var t=(0,yt.Rf)(function(t,n){(0,yt.Dv)(e,function(e){var n=e.value,i=r[wt];!e.rejected&&n&&(r[It]=n,i=(0,mt.H)(n)[At]||i),t(i)})}),n=(0,yt.Rf)(function(t,n){(0,yt.Dv)(e,function(e){var n=e.value,i=r[Ct];if(!e.rejected&&n){var a=(0,mt.H)(n)[St];i=a?a+o.wc:i}t(i)})});r[wt]=t,r[Ct]=r[Et]||n}if((0,A.KgX)(e)){var i=(0,mt.H)(e),a=i[St];r[Ct]=r[Et]?r[Et]:a+o.wc,r[wt]=i[At]||r[wt]}r[Ct]=r[Et]?r[Et]:r[Ct]})),i.initialize(r,[new gt])}(0,A.vF1)(e,"config",{g:function(){return r}}),n(),e.initialize=n,e.track=a,(0,I.o$)(e,i,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"])})}return e.__ieDyn=1,e}()},5931:e=>{var t=Object.prototype.toString,r=Array.isArray;e.exports=function(e){return"string"==typeof e||!r(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==t.call(e)}},6004:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MicrosoftSovereignCloudAuthenticationTelemetryReporter=t.MicrosoftAuthenticationTelemetryReporter=void 0;const i=n(r(1170));class o{sharedProperties={};_telemetryReporter;constructor(e){this._telemetryReporter=new i.default(e)}get telemetryReporter(){return this._telemetryReporter}setSharedProperty(e,t){this.sharedProperties[e]=t}postEvent(e,t){const r={...this.sharedProperties,...Object.fromEntries(t)};this._telemetryReporter.sendTelemetryEvent(e,r)}sendActivatedWithMsalNoBrokerEvent(){this._telemetryReporter.sendTelemetryEvent("activatingmsalnobroker")}sendLoginEvent(e){this._telemetryReporter.sendTelemetryEvent("login",{scopes:JSON.stringify(this._scrubGuids(e))})}sendLoginFailedEvent(){this._telemetryReporter.sendTelemetryEvent("loginFailed")}sendLogoutEvent(){this._telemetryReporter.sendTelemetryEvent("logout")}sendLogoutFailedEvent(){this._telemetryReporter.sendTelemetryEvent("logoutFailed")}sendTelemetryErrorEvent(e){let t,r,n,i;if("string"==typeof e)t=e;else{const t=e;n=t.errorCode,i=t.correlationId,r=t.name}this._telemetryReporter.sendTelemetryErrorEvent("msalError",{errorMessage:t,errorName:r,errorCode:n,errorCorrelationId:i})}sendTelemetryClientAuthErrorEvent(e){const t=e.errorCode,r=e.correlationId,n=e.name;let i,o,a;e.platformBrokerError&&(i=e.platformBrokerError.errorCode,o=`${e.platformBrokerError.statusCode}`,a=e.platformBrokerError.tag),this._telemetryReporter.sendTelemetryErrorEvent("msalClientAuthError",{errorName:n,errorCode:t,correlationId:r,brokerErrorCode:i,brokerStatusCode:o,brokerTag:a})}sendAccountEvent(e,t){this._telemetryReporter.sendTelemetryEvent("account",{scopes:JSON.stringify(this._scrubGuids(e)),accountType:t})}_scrubGuids(e){return e.map(e=>e.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}"))}}t.MicrosoftAuthenticationTelemetryReporter=o,t.MicrosoftSovereignCloudAuthenticationTelemetryReporter=class extends o{sendLoginEvent(e){this._telemetryReporter.sendTelemetryEvent("loginMicrosoftSovereignCloud",{scopes:JSON.stringify(this._scrubGuids(e))})}sendLoginFailedEvent(){this._telemetryReporter.sendTelemetryEvent("loginMicrosoftSovereignCloudFailed")}sendLogoutEvent(){this._telemetryReporter.sendTelemetryEvent("logoutMicrosoftSovereignCloud")}sendLogoutFailedEvent(){this._telemetryReporter.sendTelemetryEvent("logoutMicrosoftSovereignCloudFailed")}}},6111:e=>{var t=1/0,r=9007199254740991,n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=/^(?:0|[1-9]\d*)$/,c=parseInt;function u(e){return e!=e}var l,d,h=Object.prototype,f=h.hasOwnProperty,p=h.toString,g=h.propertyIsEnumerable,m=(l=Object.keys,d=Object,function(e){return l(d(e))}),v=Math.max;function y(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||s.test(e))&&e>-1&&e%1==0&&e<t}var w=Array.isArray;function I(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=A(e)?p.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}function A(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function C(e){return!!e&&"object"==typeof e}e.exports=function(e,r,s,l){var d;e=I(e)?e:(d=e)?function(e,t){return function(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r]);return i}(t,function(t){return e[t]})}(d,function(e){return I(e)?function(e,t){var r=w(e)||function(e){return function(e){return C(e)&&I(e)}(e)&&f.call(e,"callee")&&(!g.call(e,"callee")||"[object Arguments]"==p.call(e))}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!f.call(e,o)||i&&("length"==o||y(o,n))||r.push(o);return r}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||h))return m(e);var t,r,n=[];for(var i in Object(e))f.call(e,i)&&"constructor"!=i&&n.push(i);return n}(e)}(d)):[],s=s&&!l?function(e){var r=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||C(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(A(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=A(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var r=o.test(e);return r||a.test(e)?c(e.slice(2),r?2:8):i.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),s=r%1;return r==r?s?r-s:r:0}(s):0;var S=e.length;return s<0&&(s=v(S+s,0)),function(e){return"string"==typeof e||!w(e)&&C(e)&&"[object String]"==p.call(e)}(e)?s<=S&&e.indexOf(r,s)>-1:!!S&&function(e,t,r){if(t!=t)return function(e,t,r){for(var n=e.length,i=r+-1;++i<n;)if(t(e[i],i,e))return i;return-1}(e,u,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,r,s)>-1}},6149:(e,t,r)=>{"use strict";r.d(t,{Ds:()=>z,El:()=>_,Fc:()=>j,Hm:()=>O,ML:()=>N,Q3:()=>D,So:()=>L,Wg:()=>H,Ym:()=>x,ee:()=>B,lQ:()=>F,mB:()=>M,oS:()=>V,sq:()=>$,vF:()=>K,zh:()=>U});var n=r(269),i=r(6182),o=r(4276),a=r(6492),s="on",c="attachEvent",u="addEventListener",l="detachEvent",d="removeEventListener",h="events",f="visibilitychange",p="pagehide",g="pageshow",m="unload",v="beforeunload",y=(0,o.Z)("aiEvtPageHide"),w=(0,o.Z)("aiEvtPageShow"),I=/\.[\.]+/g,A=/[\.]+$/,C=1,S=(0,o.T)("events"),E=/^([^.]*)(?:\.(.+)|)/;function b(e){return e&&e[i.W7]?e[i.W7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,a.m5):e}function T(e,t){var r;if(t){var o=a.m5;(0,n.cyL)(t)?(o=a.m5,(0,n.Iuo)(t,function(e){(e=b(e))&&("."!==e[0]&&(e="."+e),o+=e)})):o=b(t),o&&("."!==o[0]&&(o="."+o),e=(e||a.m5)+o)}var s=E.exec(e||a.m5)||[];return(r={})[i.QM]=s[1],r.ns=(s[2]||a.m5).replace(I,".").replace(A,a.m5)[i.sY](".").sort().join("."),r}function _(e,t,r){var o=[],s=S.get(e,h,{},!1),c=T(t,r);return(0,n.zav)(s,function(e,t){(0,n.Iuo)(t,function(e){var t;c[i.QM]&&c[i.QM]!==e.evtName[i.QM]||c.ns&&c.ns!=c.ns||o[i.y5](((t={})[i.RS]=e.evtName[i.QM]+(e.evtName.ns?"."+e.evtName.ns:a.m5),t.handler=e[i.Yo],t))})}),o}function k(e,t,r){void 0===r&&(r=!0);var n=S.get(e,h,{},r),i=n[t];return i||(i=n[t]=[]),i}function P(e,t,r,n){e&&t&&t[i.QM]&&(e[d]?e[d](t[i.QM],r,n):e[l]&&e[l](s+t[i.QM],r))}function R(e,t,r,n){for(var o=t[i.oI];o--;){var a=t[o];a&&(r.ns&&r.ns!==a.evtName.ns||n&&!n(a)||(P(e,a.evtName,a[i.Yo],a.capture),t[i.Ic](o,1)))}}function O(e,t){return t?T("xx",(0,n.cyL)(t)?[e].concat(t):[e,t]).ns[i.sY]("."):e}function M(e,t,r,n,o){var a;void 0===o&&(o=!1);var l=!1;if(e)try{var d=T(t,n);if(l=function(e,t,r,n){var o=!1;return e&&t&&t[i.QM]&&r&&(e[u]?(e[u](t[i.QM],r,n),o=!0):e[c]&&(e[c](s+t[i.QM],r),o=!0)),o}(e,d,r,o),l&&S.accept(e)){var h=((a={guid:C++,evtName:d})[i.Yo]=r,a.capture=o,a);k(e,d.type)[i.y5](h)}}catch(e){}return l}function N(e,t,r,o,a){if(void 0===a&&(a=!1),e)try{var s=T(t,o),c=!1;!function(e,t,r){if(t[i.QM])R(e,k(e,t[i.QM]),t,r);else{var o=S.get(e,h,{});(0,n.zav)(o,function(n,i){R(e,i,t,r)}),0===(0,n.cGk)(o)[i.oI]&&S.kill(e,h)}}(e,s,function(e){return!((!s.ns||r)&&e[i.Yo]!==r||(c=!0,0))}),c||P(e,s,r,a)}catch(e){}}function D(e,t,r,n){return void 0===n&&(n=!1),M(e,t,r,null,n)}function x(e,t,r,n){void 0===n&&(n=!1),N(e,t,r,null,n)}function L(e,t,r){var i=!1,o=(0,n.zkX)();o&&(i=M(o,e,t,r),i=M(o.body,e,t,r)||i);var a=(0,n.YEm)();return a&&(i=M(a,e,t,r)||i),i}function U(e,t,r){var i=(0,n.zkX)();i&&(N(i,e,t,r),N(i.body,e,t,r));var o=(0,n.YEm)();o&&N(o,e,t,r)}function q(e,t,r,o){var a=!1;return t&&e&&e[i.oI]>0&&(0,n.Iuo)(e,function(e){e&&(r&&-1!==(0,n.rDm)(r,e)||(a=L(e,t,o)||a))}),a}function F(e,t,r,o){var a=!1;return t&&e&&(0,n.cyL)(e)&&!(a=q(e,t,r,o))&&r&&r[i.oI]>0&&(a=q(e,t,null,o)),a}function H(e,t,r){e&&(0,n.cyL)(e)&&(0,n.Iuo)(e,function(e){e&&U(e,t,r)})}function B(e,t,r){return F([v,m,p],e,t,r)}function z(e,t){H([v,m,p],e,t)}function j(e,t,r){var i=O(y,r),o=q([p],e,t,i);return t&&-1!==(0,n.rDm)(t,f)||(o=q([f],function(t){var r=(0,n.YEm)();e&&r&&"hidden"===r.visibilityState&&e(t)},t,i)||o),!o&&t&&(o=j(e,null,r)),o}function $(e,t){var r=O(y,t);H([p],e,r),H([f],null,r)}function V(e,t,r){var i=O(w,r),o=q([g],e,t,i);return!(o=q([f],function(t){var r=(0,n.YEm)();e&&r&&"visible"===r.visibilityState&&e(t)},t,i)||o)&&t&&(o=V(e,null,r)),o}function K(e,t){var r=O(w,t);H([g],e,r),H([f],null,r)}},6170:(e,t,r)=>{const n=r(3908),i=r(144),{safeRe:o,t:a}=r(9718);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?o[a.COERCERTLFULL]:o[a.COERCERTL];let i;for(;(i=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&i.index+i[0].length===r.index+r[0].length||(r=i),n.lastIndex=i.index+i[1].length+i[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?o[a.COERCEFULL]:o[a.COERCE]);if(null===r)return null;const s=r[2],c=r[3]||"0",u=r[4]||"0",l=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return i(`${s}.${c}.${u}${l}${d}`,t)}},6182:(e,t,r)=>{"use strict";r.d(t,{$5:()=>O,$o:()=>H,AP:()=>_,Az:()=>oe,Bl:()=>F,Cd:()=>ce,DI:()=>M,Di:()=>x,FI:()=>P,HC:()=>G,Ic:()=>g,Ik:()=>B,JQ:()=>i,JR:()=>z,Ju:()=>w,K0:()=>m,L:()=>pe,M5:()=>L,NA:()=>Ae,OL:()=>n,O_:()=>ue,P5:()=>ye,QM:()=>re,Qg:()=>Y,RF:()=>T,RS:()=>k,Rr:()=>Ie,Ru:()=>de,Uw:()=>h,Vq:()=>fe,W7:()=>ee,XM:()=>D,XW:()=>a,YH:()=>X,Yo:()=>ne,Yq:()=>E,Zu:()=>se,_w:()=>v,by:()=>U,c1:()=>ge,cV:()=>ie,cp:()=>he,do:()=>me,e4:()=>V,e_:()=>le,fA:()=>R,h0:()=>l,h3:()=>I,h4:()=>N,ih:()=>u,mE:()=>y,oI:()=>o,on:()=>c,pF:()=>b,pM:()=>j,re:()=>Z,s:()=>q,sY:()=>J,sl:()=>S,sx:()=>te,tI:()=>$,tX:()=>Q,tZ:()=>C,tn:()=>K,uR:()=>W,vR:()=>A,wJ:()=>ae,wi:()=>we,x6:()=>d,y5:()=>p,y9:()=>f,yy:()=>ve,zs:()=>s});var n="toLowerCase",i="blkVal",o="length",a="rdOnly",s="notify",c="warnToConsole",u="throwInternal",l="setDf",d="watch",h="logger",f="apply",p="push",g="splice",m="hdlr",v="cancel",y="initialize",w="identifier",I="removeNotificationListener",A="addNotificationListener",C="isInitialized",S="instrumentationKey",E="INACTIVE",b="value",T="getNotifyMgr",_="getPlugin",k="name",P="iKey",R="time",O="processNext",M="getProcessTelContext",N="pollInternalLogs",D="enabled",x="stopPollingInternalLogs",L="unload",U="onComplete",q="version",F="loggingLevelConsole",H="createNew",B="teardown",z="messageId",j="message",$="isAsync",V="diagLog",K="_doTeardown",G="update",W="getNext",X="setNextPlugin",Y="protocol",Q="userAgent",J="split",Z="nodeType",ee="replace",te="logInternalMessage",re="type",ne="handler",ie="status",oe="getResponseHeader",ae="getAllResponseHeaders",se="isChildEvt",ce="data",ue="getCtx",le="setCtx",de="complete",he="itemsReceived",fe="urlString",pe="sendPOST",ge="headers",me="timeout",ve="setRequestHeader",ye="traceId",we="spanId",Ie="traceFlags",Ae="getAttribute"},6195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecretStorageCachePlugin=void 0;const n=r(1398);t.SecretStorageCachePlugin=class{_secretStorage;_key;_onDidChange=new n.EventEmitter;onDidChange=this._onDidChange.event;_disposable;_value;constructor(e,t){this._secretStorage=e,this._key=t,this._disposable=n.Disposable.from(this._onDidChange,this._registerChangeHandler())}_registerChangeHandler(){return this._secretStorage.onDidChange(e=>{e.key===this._key&&this._onDidChange.fire()})}async beforeCacheAccess(e){const t=await this._secretStorage.get(this._key);this._value=t,t&&e.tokenCache.deserialize(t)}async afterCacheAccess(e){if(e.cacheHasChanged){const t=e.tokenCache.serialize();t!==this._value&&await this._secretStorage.store(this._key,t)}}dispose(){this._disposable.dispose()}}},6254:(e,t,r)=>{const n=r(3908);e.exports=(e,t)=>new n(e,t).minor},6348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},6422:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventBufferer=void 0,t.EventBufferer=class{data=[];wrapEvent(e,t,r){return(n,i,o)=>e(e=>{const o=this.data[this.data.length-1];if(!t)return void(o?o.buffers.push(()=>n.call(i,e)):n.call(i,e));const a=o;a?(a.items??=[],a.items.push(e),0===a.buffers.length&&o.buffers.push(()=>{a.reducedResult??=r?a.items.reduce(t,r):a.items.reduce(t),n.call(i,a.reducedResult)})):n.call(i,t(r,e))},void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const r=e();return this.data.pop(),t.buffers.forEach(e=>e()),r}async bufferEventsAsync(e){const t={buffers:new Array};this.data.push(t);try{return await e()}finally{this.data.pop(),t.buffers.forEach(e=>e())}}}},6492:(e,t,r)=>{"use strict";r.d(t,{Bw:()=>u,Ev:()=>w,Fk:()=>A,HP:()=>n,Hr:()=>c,LZ:()=>o,QW:()=>C,Vj:()=>y,Vo:()=>h,Yd:()=>s,Yp:()=>p,dI:()=>g,eT:()=>a,fc:()=>f,jy:()=>l,kI:()=>I,l0:()=>m,m5:()=>i,qT:()=>d,s4:()=>v,xW:()=>S});var n=void 0,i="",o="channels",a="core",s="createPerfMgr",c="disabled",u="extensionConfig",l="extensions",d="processTelemetry",h="priority",f="eventsSent",p="eventsDiscarded",g="eventsSendRequest",m="perfEvent",v="offlineEventsStored",y="offlineBatchSent",w="offlineBatchDrop",I="getPerfMgr",A="domain",C="path",S="Not dynamic - "},6535:(e,t,r)=>{"use strict";r.d(t,{Si:()=>v,VN:()=>m,Z1:()=>g});var n=r(269),i=r(6182),o=r(7292),a=r(6492),s=4294967296,c=4294967295,u=123456789,l=987654321,d=!1,h=u,f=l;function p(){try{var e=2147483647&(0,n.f0d)();(t=(Math.random()*s^e)+e)<0&&(t>>>=0),h=u+t&c,f=l-t&c,d=!0}catch(e){}var t}function g(e){return e>0?Math.floor(m()/c*(e+1))>>>0:0}function m(e){var t=0,r=(0,o.MY)()||(0,o.iN)();return r&&r.getRandomValues&&(t=r.getRandomValues(new Uint32Array(1))[0]&c),0===t&&(0,o.lT)()&&(d||p(),t=function(){var e=((f=36969*(65535&f)+(f>>16)&c)<<16)+(65535&(h=18e3*(65535&h)+(h>>16)&c))>>>0&c;return e>>>=0}()&c),0===t&&(t=Math.floor(s*Math.random()|0)),e||(t>>>=0),t}function v(e){void 0===e&&(e=22);for(var t=m()>>>0,r=0,n=a.m5;n[i.oI]<e;)r++,n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===r&&(t=(m()<<2&4294967295|3&t)>>>0,r=0);return n}},6548:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetryReporter=void 0,t.BaseTelemetryReporter=class{constructor(e,t,r){this.telemetrySender=e,this.vscodeAPI=t,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,t,r,n){n?this.telemetrySender.sendEventData(e,{properties:t,measurements:r}):this.telemetryLogger.logUsage(e,{properties:t,measurements:r})}sendTelemetryEvent(e,t,r){this.internalSendTelemetryEvent(e,t,r,!1)}sendRawTelemetryEvent(e,t,r){const n={...t};for(const e of Object.keys(n??{})){const t=n[e];"string"==typeof e&&void 0!==t&&(n[e]=new this.vscodeAPI.TelemetryTrustedValue("string"==typeof t?t:t.value))}this.sendTelemetryEvent(e,n,r)}sendDangerousTelemetryEvent(e,t,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,t,r,!0)}internalSendTelemetryErrorEvent(e,t,r,n){n?this.telemetrySender.sendEventData(e,{properties:t,measurements:r}):this.telemetryLogger.logError(e,{properties:t,measurements:r})}sendTelemetryErrorEvent(e,t,r){this.internalSendTelemetryErrorEvent(e,t,r,!1)}sendDangerousTelemetryErrorEvent(e,t,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,t,r,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}}},6585:e=>{var t=1e3,r=60*t,n=60*r,i=24*n,o=7*i;function a(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,s){s=s||{};var c,u,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(a){var s=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return s*o;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===l&&isFinite(e))return s.long?(c=e,(u=Math.abs(c))>=i?a(c,u,i,"day"):u>=n?a(c,u,n,"hour"):u>=r?a(c,u,r,"minute"):u>=t?a(c,u,t,"second"):c+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=n?Math.round(e/n)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6780:(e,t,r)=>{const n=r(8311);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},6874:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},6928:e=>{"use strict";e.exports=require("path")},6942:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0,t.Config={macOSBrokerRedirectUri:"msauth.com.microsoft.VSCode.helper://auth"}},6953:(e,t,r)=>{const n=r(144);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},6982:e=>{"use strict";e.exports=require("crypto")},7015:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=async function(e){const t=new u.MicrosoftAuthenticationTelemetryReporter(e.extension.packageJSON.aiKey);"msal-no-broker"===(l=d(),e.subscriptions.push(c.workspace.onDidChangeConfiguration(async t=>{if(!t.affectsConfiguration("microsoft-authentication"))return;if(l===d())return;e.globalState.update("msalMigration",void 0);const r=c.l10n.t("Reload");await c.window.showInformationMessage("Reload required",{modal:!0,detail:c.l10n.t("Microsoft Account configuration has been changed.")},r)===r&&c.commands.executeCommand("workbench.action.reloadWindow")})),l)&&t.sendActivatedWithMsalNoBrokerEvent();const r=new s.UriEventHandler;e.subscriptions.push(r);const n=await a.MsalAuthProvider.create(e,t,o.default,r);e.subscriptions.push(c.authentication.registerAuthenticationProvider("microsoft","Microsoft",n,{supportsMultipleAccounts:!0,supportsChallenges:!0,supportedAuthorizationServers:[c.Uri.parse("https://login.microsoftonline.com/*"),c.Uri.parse("https://login.microsoftonline.com/*/v2.0")]}));let i=await h(e,r);e.subscriptions.push(c.workspace.onDidChangeConfiguration(async t=>{t.affectsConfiguration("microsoft-sovereign-cloud")&&(i?.dispose(),i=await h(e,r))}))},t.deactivate=function(){o.default.info("Microsoft Authentication is deactivating...")};const i=r(8197),o=n(r(5584)),a=r(252),s=r(7740),c=r(1398),u=r(6004);let l="msal";const d=()=>c.workspace.getConfiguration("microsoft-authentication").get("implementation")??"msal";async function h(e,t){const r=c.workspace.getConfiguration("microsoft-sovereign-cloud").get("environment");let n;if(!r)return;if("custom"===r){const e=c.workspace.getConfiguration("microsoft-sovereign-cloud").get("customEnvironment");if(!e)return void(await c.window.showErrorMessage(c.l10n.t("You must also specify a custom environment in order to use the custom environment auth provider."),c.l10n.t("Open settings"))&&await c.commands.executeCommand("workbench.action.openSettingsJson","microsoft-sovereign-cloud.customEnvironment"));try{i.Environment.add(e)}catch(e){return void(await c.window.showErrorMessage(c.l10n.t("Error validating custom environment setting: {0}",e.message),c.l10n.t("Open settings"))&&await c.commands.executeCommand("workbench.action.openSettings","microsoft-sovereign-cloud.customEnvironment"))}n=e.name}else n=r;const o=i.Environment.get(n);if(!o)return void await c.window.showErrorMessage(c.l10n.t("The environment `{0}` is not a valid environment.",n),c.l10n.t("Open settings"));const s=await a.MsalAuthProvider.create(e,new u.MicrosoftSovereignCloudAuthenticationTelemetryReporter(e.extension.packageJSON.aiKey),c.window.createOutputChannel(c.l10n.t("Microsoft Sovereign Cloud Authentication"),{log:!0}),t,o),l=c.authentication.registerAuthenticationProvider("microsoft-sovereign-cloud",n,s,{supportsMultipleAccounts:!0,supportsChallenges:!0});return e.subscriptions.push(l),l}},7019:(e,t,r)=>{const n=r(1977),i=r(4623),o={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},a={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};e.exports=function(e,t){if(!e||!t)return;const r=t.asymmetricKeyType;if(!r)return;const s=o[r];if(!s)throw new Error(`Unknown key type "${r}".`);if(!s.includes(e))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${s.join(", ")}.`);if(n)switch(r){case"ec":const r=t.asymmetricKeyDetails.namedCurve,n=a[e];if(r!==n)throw new Error(`"alg" parameter "${e}" requires curve "${n}".`);break;case"rsa-pss":if(i){const r=parseInt(e.slice(-3),10),{hashAlgorithm:n,mgf1HashAlgorithm:i,saltLength:o}=t.asymmetricKeyDetails;if(n!==`sha${r}`||i!==n)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(void 0!==o&&o>r>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}}}},7059:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(e,t,r)<0},7075:(e,t,r)=>{const n=r(3908),i=r(3904),{ANY:o}=i,a=r(8311),s=r(7638),c=r(5580),u=r(7059),l=r(5200),d=r(4089);e.exports=(e,t,r,h)=>{let f,p,g,m,v;switch(e=new n(e,h),t=new a(t,h),r){case">":f=c,p=l,g=u,m=">",v=">=";break;case"<":f=u,p=d,g=c,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,h))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let a=null,s=null;if(n.forEach(e=>{e.semver===o&&(e=new i(">=0.0.0")),a=a||e,s=s||e,f(e.semver,a.semver,h)?a=e:g(e.semver,s.semver,h)&&(s=e)}),a.operator===m||a.operator===v)return!1;if((!s.operator||s.operator===m)&&p(e,s.semver))return!1;if(s.operator===v&&g(e,s.semver))return!1}return!0}},7083:e=>{var t=1/0,r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s=Object.prototype.toString;function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return function(e,u){var l;if("function"!=typeof u)throw new TypeError("Expected a function");return e=function(e){var u=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return NaN;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var u=i.test(e);return u||o.test(e)?a(e.slice(2),u?2:8):n.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),l=u%1;return u==u?l?u-l:u:0}(e),function(){return--e>0&&(l=u.apply(this,arguments)),e<=1&&(u=void 0),l}}(2,e)}},7247:e=>{"use strict";e.exports=require("./msal-node-runtime")},7260:(e,t,r)=>{var n=r(5747);e.exports=function(e,t){t=t||{};var r=n.decode(e,t);if(!r)return null;var i=r.payload;if("string"==typeof i)try{var o=JSON.parse(i);null!==o&&"object"==typeof o&&(i=o)}catch(e){}return!0===t.complete?{header:r.header,payload:i,signature:r.signature}:i}},7272:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},7292:(e,t,r)=>{"use strict";r.d(t,{$Z:()=>F,Iu:()=>H,L0:()=>N,MY:()=>P,PV:()=>L,R7:()=>x,U5:()=>T,Uf:()=>D,Z:()=>_,cU:()=>E,g$:()=>b,hm:()=>k,iN:()=>R,lT:()=>M,lV:()=>O,xk:()=>U});var n=r(5664),i=r(269),o=r(6182),a=r(3673),s=r(6492),c="documentMode",u="location",l="console",d="JSON",h="crypto",f="msCrypto",p="ReactNative",g="msie",m="trident/",v="XMLHttpRequest",y=null,w=null,I=!1,A=null,C=null;function S(e,t){var r=!1;if(e){try{if(!(r=t in e)){var o=e[n.vR];o&&(r=t in o)}}catch(e){}if(!r)try{var a=new e;r=!(0,i.b07)(a[t])}catch(e){}}return r}function E(e){I=e}function b(e){if(e&&I){var t=(0,i.zS2)("__mockLocation");if(t)return t}return typeof location===n._1&&location?location:(0,i.zS2)(u)}function T(){return typeof console!==n.bA?console:(0,i.zS2)(l)}function _(){return Boolean(typeof JSON===n._1&&JSON||null!==(0,i.zS2)(d))}function k(){return _()?JSON||(0,i.zS2)(d):null}function P(){return(0,i.zS2)(h)}function R(){return(0,i.zS2)(f)}function O(){var e=(0,i.w3n)();return!(!e||!e.product)&&e.product===p}function M(){var e=(0,i.w3n)();if(e&&(e[o.tX]!==w||null===y)){var t=((w=e[o.tX])||s.m5)[o.OL]();y=(0,a.Ju)(t,g)||(0,a.Ju)(t,m)}return y}function N(e){if(void 0===e&&(e=null),!e){var t=(0,i.w3n)()||{};e=t?(t.userAgent||s.m5)[o.OL]():s.m5}var r=(e||s.m5)[o.OL]();if((0,a.Ju)(r,g)){var n=(0,i.YEm)()||{};return Math.max(parseInt(r[o.sY](g)[1]),n[c]||0)}if((0,a.Ju)(r,m)){var u=parseInt(r[o.sY](m)[1]);if(u)return u+4}return null}function D(e){return null!==C&&!1!==e||(C=(0,i.w9M)()&&Boolean((0,i.w3n)().sendBeacon)),C}function x(e){var t=!1;try{t=!!(0,i.zS2)("fetch");var r=(0,i.zS2)("Request");t&&e&&r&&(t=S(r,"keepalive"))}catch(e){}return t}function L(){return null===A&&(A=typeof XDomainRequest!==n.bA)&&U()&&(A=A&&!S((0,i.zS2)(v),"withCredentials")),A}function U(){var e=!1;try{e=!!(0,i.zS2)(v)}catch(e){}return e}function q(e,t){if(e)for(var r=0;r<e[o.oI];r++){var n=e[r];if(n[o.RS]&&n[o.RS]===t)return n}return{}}function F(e){var t=(0,i.YEm)();return t&&e?q(t.querySelectorAll("meta"),e).content:null}function H(e){var t,r=(0,i.FJj)();if(r){var n=r.getEntriesByType("navigation")||[];t=q((n[o.oI]>0?n[0]:{}).serverTiming,e).description}return t}},7358:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});var n=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t}},7374:(e,t,r)=>{"use strict";r.d(t,{eL:()=>i,iD:()=>a,uG:()=>o});var n=r(4282),i=(0,n.H)({LocalStorage:0,SessionStorage:1}),o=(0,n.H)({AI:0,AI_AND_W3C:1,W3C:2}),a=(0,n.H)({Normal:1,Critical:2})},7414:(e,t,r)=>{const n=r(144);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},7599:(e,t,r)=>{var n=r(2861).Buffer,i=r(8948),o=r(8789),a=r(2203),s=r(2851),c=r(9023),u=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function l(e){var t=e.split(".",1)[0];return function(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}(n.from(t,"base64").toString("binary"))}function d(e){return e.split(".")[2]}function h(e){return u.test(e)&&!!l(e)}function f(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var i=d(e=s(e)),a=function(e){return e.split(".",2).join(".")}(e);return o(t).verify(a,i,r)}function p(e,t){if(t=t||{},!h(e=s(e)))return null;var r=l(e);if(!r)return null;var i=function(e,t){t=t||"utf8";var r=e.split(".")[1];return n.from(r,"base64").toString(t)}(e);return("JWT"===r.typ||t.json)&&(i=JSON.parse(i,t.encoding)),{header:r,payload:i,signature:d(e)}}function g(e){var t=(e=e||{}).secret||e.publicKey||e.key,r=new i(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new i(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}c.inherits(g,a),g.prototype.verify=function(){try{var e=f(this.signature.buffer,this.algorithm,this.key.buffer),t=p(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},g.decode=p,g.isValid=h,g.verify=f,e.exports=g},7631:(e,t,r)=>{const n=r(8311);e.exports=(e,t)=>new n(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},7638:(e,t,r)=>{const n=r(8311);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},7651:(e,t,r)=>{const n=r(855),i=r(4977),o=r(7019),a=r(5747),s=r(6111),c=r(7914),u=r(8928),l=r(3639),d=r(9001),h=r(5931),f=r(7083),{KeyObject:p,createSecretKey:g,createPrivateKey:m}=r(6982),v=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];i&&v.splice(3,0,"PS256","PS384","PS512");const y={expiresIn:{isValid:function(e){return u(e)||h(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return u(e)||h(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return h(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:s.bind(null,v),message:'"algorithm" must be a valid string enum value'},header:{isValid:d,message:'"header" must be an object'},encoding:{isValid:h,message:'"encoding" must be a string'},issuer:{isValid:h,message:'"issuer" must be a string'},subject:{isValid:h,message:'"subject" must be a string'},jwtid:{isValid:h,message:'"jwtid" must be a string'},noTimestamp:{isValid:c,message:'"noTimestamp" must be a boolean'},keyid:{isValid:h,message:'"keyid" must be a string'},mutatePayload:{isValid:c,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:c,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:c,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},w={iat:{isValid:l,message:'"iat" should be a number of seconds'},exp:{isValid:l,message:'"exp" should be a number of seconds'},nbf:{isValid:l,message:'"nbf" should be a number of seconds'}};function I(e,t,r,n){if(!d(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){const o=e[i];if(o){if(!o.isValid(r[i]))throw new Error(o.message)}else if(!t)throw new Error('"'+i+'" is not allowed in "'+n+'"')})}const A={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},C=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];e.exports=function(e,t,r,i){"function"==typeof r?(i=r,r={}):r=r||{};const s="object"==typeof e&&!Buffer.isBuffer(e),c=Object.assign({alg:r.algorithm||"HS256",typ:s?"JWT":void 0,kid:r.keyid},r.header);function u(e){if(i)return i(e);throw e}if(!t&&"none"!==r.algorithm)return u(new Error("secretOrPrivateKey must have a value"));if(null!=t&&!(t instanceof p))try{t=m(t)}catch(e){try{t=g("string"==typeof t?Buffer.from(t):t)}catch(e){return u(new Error("secretOrPrivateKey is not valid key material"))}}if(c.alg.startsWith("HS")&&"secret"!==t.type)return u(new Error(`secretOrPrivateKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)){if("private"!==t.type)return u(new Error(`secretOrPrivateKey must be an asymmetric key when using ${c.alg}`));if(!r.allowInsecureKeySizes&&!c.alg.startsWith("ES")&&void 0!==t.asymmetricKeyDetails&&t.asymmetricKeyDetails.modulusLength<2048)return u(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`))}if(void 0===e)return u(new Error("payload is required"));if(s){try{!function(e){I(w,!0,e,"payload")}(e)}catch(e){return u(e)}r.mutatePayload||(e=Object.assign({},e))}else{const t=C.filter(function(e){return void 0!==r[e]});if(t.length>0)return u(new Error("invalid "+t.join(",")+" option for "+typeof e+" payload"))}if(void 0!==e.exp&&void 0!==r.expiresIn)return u(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==e.nbf&&void 0!==r.notBefore)return u(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{!function(e){I(y,!1,e,"options")}(r)}catch(e){return u(e)}if(!r.allowInvalidAsymmetricKeyTypes)try{o(c.alg,t)}catch(e){return u(e)}const l=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete e.iat:s&&(e.iat=l),void 0!==r.notBefore){try{e.nbf=n(r.notBefore,l)}catch(e){return u(e)}if(void 0===e.nbf)return u(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==r.expiresIn&&"object"==typeof e){try{e.exp=n(r.expiresIn,l)}catch(e){return u(e)}if(void 0===e.exp)return u(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(A).forEach(function(t){const n=A[t];if(void 0!==r[t]){if(void 0!==e[n])return u(new Error('Bad "options.'+t+'" option. The payload already has an "'+n+'" property.'));e[n]=r[t]}});const d=r.encoding||"utf8";if("function"!=typeof i){let n=a.sign({header:c,payload:e,secret:t,encoding:d});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&n.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`);return n}i=i&&f(i),a.createSign({header:c,privateKey:t,payload:e,encoding:d}).once("error",i).once("done",function(e){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&e.length<256)return i(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`));i(null,e)})}},7740:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.UriEventHandler=void 0;const s=a(r(1398));class c extends s.EventEmitter{_disposable=s.window.registerUriHandler(this);handleUri(e){this.fire(e)}dispose(){super.dispose(),this._disposable.dispose()}}t.UriEventHandler=c},7847:(e,t,r)=>{"use strict";r.d(t,{i:()=>n,x:()=>i});var n=500,i="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"},7867:(e,t,r)=>{"use strict";r.d(t,{$:()=>l,M:()=>d});var n,i=r(269),o=r(6182),a=r(6492),s=[a.fc,a.Yp,a.dI,a.l0],c=null;function u(e,t){return function(){var r=arguments,n=l(t);if(n){var i=n.listener;i&&i[e]&&i[e][o.y9](i,r)}}}function l(e){var t,r=c;return r||!0===e.disableDbgExt||(r=c||((t=(0,i.zS2)("Microsoft"))&&(c=t.ApplicationInsights),c)),r?r.ChromeDbgExt:null}function d(e){if(!n){n={};for(var t=0;t<s[o.oI];t++)n[s[t]]=u(s[t],e)}return n}},7914:e=>{var t=Object.prototype.toString;e.exports=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==t.call(e)}},7952:(e,t,r)=>{"use strict";r.d(t,{G:()=>c});var n=r(6149),i=r(269),o=r(4276),a=r(5130);function s(e,t){(0,n.ML)(e,null,null,t)}function c(e){var t=(0,i.YEm)(),r=(0,i.w3n)(),c=!1,u=[],l=1;!r||(0,i.hXl)(r.onLine)||r.onLine||(l=2);var d=0,h=m(),f=(0,n.Hm)((0,o.Z)("OfflineListener"),e);try{if(g((0,i.zkX)())&&(c=!0),t){var p=t.body||t;p.ononline&&g(p)&&(c=!0)}}catch(e){c=!1}function g(e){var t=!1;return e&&(t=(0,n.mB)(e,"online",y,f))&&(0,n.mB)(e,"offline",w,f),t}function m(){return 2!==d&&2!==l}function v(){var e=m();h!==e&&(h=e,(0,i.Iuo)(u,function(e){var t={isOnline:h,rState:l,uState:d};try{e(t)}catch(e){}}))}function y(){l=1,v()}function w(){l=2,v()}return{isOnline:function(){return h},isListening:function(){return c},unload:function(){var e=(0,i.zkX)();if(e&&c){if(s(e,f),t){var r=t.body||t;(0,i.b07)(r.ononline)||s(r,f)}c=!1}},addListener:function(e){return u[a.y5](e),{rm:function(){var t=u.indexOf(e);return t>-1?u.splice(t,1):void 0}}},setOnlineState:function(e){d=e,v()}}}},7975:(e,t,r)=>{"use strict";r.d(t,{HQ:()=>g,Rr:()=>u,Vj:()=>p,Vk:()=>d,Vt:()=>h,_T:()=>m,lq:()=>c,pJ:()=>l,qW:()=>v,xP:()=>f,zx:()=>s});var n=r(269),i=r(3775),o=r(7292),a=r(5130);function s(e,t,r){var i=t[a.oI],o=c(e,t);if(o[a.oI]!==i){for(var s=0,u=o;void 0!==r[u];)s++,u=(0,n.P0f)(o,0,147)+v(s);o=u}return o}function c(e,t){var r;return t&&(t=(0,n.EHq)((0,n.oJg)(t)))[a.oI]>150&&(r=(0,n.P0f)(t,0,150),(0,i.ZP)(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),r||t}function u(e,t,r){var o;return void 0===r&&(r=1024),t&&(r=r||1024,(t=(0,n.EHq)((0,n.oJg)(t)))[a.oI]>r&&(o=(0,n.P0f)(t,0,r),(0,i.ZP)(e,2,61,"string value is too long. It has been truncated to "+r+" characters.",{value:t},!0))),o||t}function l(e,t){return m(e,t,2048,66)}function d(e,t){var r;return t&&t[a.oI]>32768&&(r=(0,n.P0f)(t,0,32768),(0,i.ZP)(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),r||t}function h(e,t){var r;if(t){var o=""+t;o[a.oI]>32768&&(r=(0,n.P0f)(o,0,32768),(0,i.ZP)(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return r||t}function f(e,t){if(t){var r={};(0,n.zav)(t,function(t,c){if((0,n.Gvm)(c)&&(0,o.Z)())try{c=(0,o.hm)()[a.Jj](c)}catch(t){(0,i.ZP)(e,2,49,"custom property is not valid",{exception:t},!0)}c=u(e,c,8192),t=s(e,t,r),r[t]=c}),t=r}return t}function p(e,t){if(t){var r={};(0,n.zav)(t,function(t,n){t=s(e,t,r),r[t]=n}),t=r}return t}function g(e,t){return t?m(e,t,128,69)[a.xE]():t}function m(e,t,r,o){var s;return t&&(t=(0,n.EHq)((0,n.oJg)(t)))[a.oI]>r&&(s=(0,n.P0f)(t,0,r),(0,i.ZP)(e,2,o,"input is too long, it has been truncated to "+r+" characters.",{data:t},!0)),s||t}function v(e){var t="00"+e;return(0,n.hKY)(t,t[a.oI]-3)}},8060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsalLoggerOptions=void 0;const n=r(20),i=r(1398);t.MsalLoggerOptions=class{_output;_telemtryReporter;piiLoggingEnabled=!1;constructor(e,t){this._output=e,this._telemtryReporter=t}get logLevel(){return this._toMsalLogLevel(i.env.logLevel)}loggerCallback(e,t,r){switch(e){case n.LogLevel.Error:return this._output.error(t),void this._telemtryReporter.sendTelemetryErrorEvent(t);case n.LogLevel.Warning:return void this._output.warn(t);case n.LogLevel.Info:return void this._output.debug(t);case n.LogLevel.Verbose:return void this._output.trace(t);case n.LogLevel.Trace:return;default:return void this._output.debug(t)}}_toMsalLogLevel(e){switch(e){case i.LogLevel.Trace:return n.LogLevel.Trace;case i.LogLevel.Debug:return n.LogLevel.Verbose;case i.LogLevel.Info:return n.LogLevel.Info;case i.LogLevel.Warning:return n.LogLevel.Warning;case i.LogLevel.Error:return n.LogLevel.Error;default:return n.LogLevel.Info}}}},8156:(e,t,r)=>{"use strict";r.d(t,{NS:()=>h,Q6:()=>d,Z4:()=>g,r2:()=>p});var n=r(8279),i=r(269),o=r(6182),a=r(6492),s="ctx",c="ParentContextKey",u="ChildrenContextKey",l=null,d=function(){function e(t,r,n){var a,l=this;l.start=(0,i.f0d)(),l[o.RS]=t,l[o.tI]=n,l[o.Zu]=function(){return!1},(0,i.Tnt)(r)&&(0,i.vF1)(l,"payload",{g:function(){return!a&&(0,i.Tnt)(r)&&(a=r(),r=null),a}}),l[o.O_]=function(t){return t?t===e[c]||t===e[u]?l[t]:(l[s]||{})[t]:null},l[o.e_]=function(t,r){t&&(t===e[c]?(l[t]||(l[o.Zu]=function(){return!0}),l[t]=r):t===e[u]?l[t]=r:(l[s]=l[s]||{})[t]=r)},l[o.Ru]=function(){var t=0,r=l[o.O_](e[u]);if((0,i.cyL)(r))for(var n=0;n<r[o.oI];n++){var a=r[n];a&&(t+=a[o.fA])}l[o.fA]=(0,i.f0d)()-l.start,l.exTime=l[o.fA]-t,l[o.Ru]=function(){}}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),h=function(){function e(t){this.ctx={},(0,n.A)(e,this,function(e){e.create=function(e,t,r){return new d(e,t,r)},e.fire=function(e){e&&(e[o.Ru](),t&&(0,i.Tnt)(t[a.l0])&&t[a.l0](e))},e[o.e_]=function(t,r){t&&((e[s]=e[s]||{})[t]=r)},e[o.O_]=function(t){return(e[s]||{})[t]}})}return e.__ieDyn=1,e}(),f="CoreUtils.doPerf";function p(e,t,r,n,i){if(e){var s=e;if(s[a.kI]&&(s=s[a.kI]()),s){var l=void 0,h=s[o.O_](f);try{if(l=s.create(t(),n,i)){if(h&&l[o.e_]&&(l[o.e_](d[c],h),h[o.O_]&&h[o.e_])){var p=h[o.O_](d[u]);p||(p=[],h[o.e_](d[u],p)),p[o.y5](l)}return s[o.e_](f,l),r(l)}}catch(e){l&&l[o.e_]&&l[o.e_]("exception",e)}finally{l&&s.fire(l),s[o.e_](f,h)}}}return r()}function g(){return l}},8197:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Environment:()=>n});var n=function(){function e(e){if(this.validateAuthority=!0,!e||"object"!=typeof e)throw new Error("'parameters' is a required parameter and must be of type 'object'.");["name","portalUrl","managementEndpointUrl","resourceManagerEndpointUrl","activeDirectoryEndpointUrl","activeDirectoryResourceId"].forEach(function(t){if(!e[t]||"string"!=typeof e[t].valueOf())throw new Error('Please provide "'+t+'" for the environment and it must be of type "string".')}),this.name=e.name,this.portalUrl=e.portalUrl,this.managementEndpointUrl=e.managementEndpointUrl,this.resourceManagerEndpointUrl=e.resourceManagerEndpointUrl,this.activeDirectoryEndpointUrl=e.activeDirectoryEndpointUrl,this.activeDirectoryResourceId=e.activeDirectoryResourceId,this.activeDirectoryGraphApiVersion&&(this.activeDirectoryGraphApiVersion=e.activeDirectoryGraphApiVersion),this.activeDirectoryGraphResourceId&&(this.activeDirectoryGraphResourceId=e.activeDirectoryGraphResourceId),this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix&&(this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix=e.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix),this.azureDataLakeStoreFileSystemEndpointSuffix&&(this.azureDataLakeStoreFileSystemEndpointSuffix=e.azureDataLakeStoreFileSystemEndpointSuffix),this.batchResourceId&&(this.batchResourceId=e.batchResourceId),this.galleryEndpointUrl&&(this.galleryEndpointUrl=e.galleryEndpointUrl),this.keyVaultDnsSuffix&&(this.keyVaultDnsSuffix=e.keyVaultDnsSuffix),this.publishingProfileUrl&&(this.publishingProfileUrl=e.publishingProfileUrl),this.sqlManagementEndpointUrl&&(this.sqlManagementEndpointUrl=e.sqlManagementEndpointUrl),this.sqlServerHostnameSuffix&&(this.sqlServerHostnameSuffix=e.sqlServerHostnameSuffix),this.storageEndpointSuffix&&(this.storageEndpointSuffix=e.storageEndpointSuffix)}return e.add=function(t){var r={},n=new e(t);r[t.name]=n,Object.assign(e,r)},e.get=function(t){if(!t)throw new TypeError("name cannot be null or undefined and must be of type string.");return e[t]},e.AzureCloud={name:"AzureCloud",portalUrl:"https://portal.azure.com",publishingProfileUrl:"https://go.microsoft.com/fwlink/?LinkId=254432",managementEndpointUrl:"https://management.core.windows.net",resourceManagerEndpointUrl:"https://management.azure.com/",sqlManagementEndpointUrl:"https://management.core.windows.net:8443/",sqlServerHostnameSuffix:".database.windows.net",galleryEndpointUrl:"https://gallery.azure.com/",activeDirectoryEndpointUrl:"https://login.microsoftonline.com/",activeDirectoryResourceId:"https://management.core.windows.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.windows.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.windows.net",keyVaultDnsSuffix:".vault.azure.net",azureDataLakeStoreFileSystemEndpointSuffix:"azuredatalakestore.net",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"azuredatalakeanalytics.net",validateAuthority:!0},e.ChinaCloud={name:"AzureChinaCloud",portalUrl:"https://portal.azure.cn",publishingProfileUrl:"https://go.microsoft.com/fwlink/?LinkID=301774",managementEndpointUrl:"https://management.core.chinacloudapi.cn",resourceManagerEndpointUrl:"https://management.chinacloudapi.cn",sqlManagementEndpointUrl:"https://management.core.chinacloudapi.cn:8443/",sqlServerHostnameSuffix:".database.chinacloudapi.cn",galleryEndpointUrl:"https://gallery.chinacloudapi.cn/",activeDirectoryEndpointUrl:"https://login.chinacloudapi.cn/",activeDirectoryResourceId:"https://management.core.chinacloudapi.cn/",activeDirectoryGraphResourceId:"https://graph.chinacloudapi.cn/",activeDirectoryGraphApiVersion:"2013-04-05",batchResourceId:"https://batch.chinacloudapi.cn/",storageEndpointSuffix:"core.chinacloudapi.cn",keyVaultDnsSuffix:".vault.azure.cn",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},e.USGovernment={name:"AzureUSGovernment",portalUrl:"https://portal.azure.us",publishingProfileUrl:"https://manage.windowsazure.us/publishsettings/index",managementEndpointUrl:"https://management.core.usgovcloudapi.net",resourceManagerEndpointUrl:"https://management.usgovcloudapi.net",sqlManagementEndpointUrl:"https://management.core.usgovcloudapi.net:8443/",sqlServerHostnameSuffix:".database.usgovcloudapi.net",galleryEndpointUrl:"https://gallery.usgovcloudapi.net/",activeDirectoryEndpointUrl:"https://login.microsoftonline.us/",activeDirectoryResourceId:"https://management.core.usgovcloudapi.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.usgovcloudapi.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.usgovcloudapi.net",keyVaultDnsSuffix:".vault.usgovcloudapi.net",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},e.GermanCloud={name:"AzureGermanCloud",portalUrl:"https://portal.microsoftazure.de/",publishingProfileUrl:"https://manage.microsoftazure.de/publishsettings/index",managementEndpointUrl:"https://management.core.cloudapi.de",resourceManagerEndpointUrl:"https://management.microsoftazure.de",sqlManagementEndpointUrl:"https://management.core.cloudapi.de:8443/",sqlServerHostnameSuffix:".database.cloudapi.de",galleryEndpointUrl:"https://gallery.cloudapi.de/",activeDirectoryEndpointUrl:"https://login.microsoftonline.de/",activeDirectoryResourceId:"https://management.core.cloudapi.de/",activeDirectoryGraphResourceId:"https://graph.cloudapi.de/",batchResourceId:"https://batch.microsoftazure.de/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.cloudapi.de",keyVaultDnsSuffix:".vault.microsoftazure.de",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},e}()},8205:(e,t,r)=>{"use strict";r.d(t,{Dv:()=>u,Qo:()=>N,Rf:()=>O,Xf:()=>D,lh:()=>M});var n,i,o,a=r(269),s="Promise",c="rejected";function u(e,t){return l(e,function(e){return t?t({status:"fulfilled",rejected:!1,value:e}):e},function(e){return t?t({status:c,rejected:!0,reason:e}):e})}function l(e,t,r,n){var i=e;try{if((0,a.$XS)(e))(t||r)&&(i=e.then(t,r));else try{t&&(i=t(e))}catch(e){if(!r)throw e;i=r(e)}}finally{n&&function(e,t){var r=e;t&&((0,a.$XS)(e)?r=e.finally?e.finally(t):e.then(function(e){return t(),e},function(e){throw t(),e}):t())}(i,n)}return i}var d,h=!1,f=["pending","resolving","resolved",c],p="dispatchEvent";function g(e){var t;return e&&e.createEvent&&(t=e.createEvent("Event")),!!t&&t.initEvent}var m,v,y,w,I="unhandledRejection",A=I.toLowerCase(),C=[],S=0,E=10;function b(e){return(0,a.Tnt)(e)?e.toString():(0,a.mmD)(e)}function T(e,t,r){var c,u,l=(0,a.KVm)(arguments,3),v=0,y=!1,w=[],T=S++,_=C.length>0?C[C.length-1]:void 0,k=!1,P=null;function R(t,r){try{return C.push(T),k=!0,P&&P.cancel(),P=null,e(function(e,n){w.push(function(){try{var i=2===v?t:r,o=(0,a.b07)(i)?c:(0,a.Tnt)(i)?i(c):i;(0,a.$XS)(o)?o.then(e,n):i?e(o):3===v?n(o):e(o)}catch(e){n(e)}}),y&&M()},l)}finally{C.pop()}}function O(){return f[v]}function M(){if(w.length>0){var e=w.slice();w=[],k=!0,P&&P.cancel(),P=null,t(e)}}function N(e,t){return function(r){if(v===t){if(2===e&&(0,a.$XS)(r))return v=1,void r.then(N(2,1),N(3,1));v=e,y=!0,c=r,M(),k||3!==e||P||(P=(0,a.dRz)(D,E))}}}function D(){if(!k)if(k=!0,(0,a.Lln)())process.emit(I,c,u);else{var e=(0,a.zkX)()||(0,a.mS$)();!m&&(m=(0,a.GuU)((0,a.gBW)(a.zS2,[s+"RejectionEvent"]).v)),function(e,t,r,n){var i=(0,a.YEm)();!d&&(d=(0,a.GuU)(!!(0,a.gBW)(g,[i]).v));var o=d.v?i.createEvent("Event"):n?new Event(t):{};if(r&&r(o),d.v&&o.initEvent(t,!1,!0),o&&e[p])e[p](o);else{var s=e["on"+t];if(s)s(o);else{var c=(0,a.zS2)("console");c&&(c.error||c.log)(t,(0,a.mmD)(o))}}}(e,A,function(e){return(0,a.vF1)(e,"promise",{g:function(){return u}}),e.reason=c,e},!!m.v)}}return u={then:R,catch:function(e){return R(void 0,e)},finally:function(e){var t=e,r=e;return(0,a.Tnt)(e)&&(t=function(t){return e&&e(),t},r=function(t){throw e&&e(),t}),R(t,r)}},(0,a.UxO)(u,"state",{get:O}),h&&function(e,t){i=i||{toString:function(){return"[[PromiseResult]]"}},o=o||{toString:function(){return"[[PromiseIsHandled]]"}};var r={};r[n=n||{toString:function(){return"[[PromiseState]]"}}]={get:t},r[i]={get:function(){return(0,a.SZ2)(c)}},r[o]={get:function(){return k}},(0,a.isD)(e,r)}(u,O),(0,a.Lok)()&&(u[(0,a.Y0g)(11)]="IPromise"),u.toString=function(){return"IPromise"+(h?"["+T+((0,a.b07)(_)?"":":"+_)+"]":"")+" "+O()+(y?" - "+b(c):"")},function(){(0,a.Tnt)(r)||(0,a.zkd)(s+": executor is not a function - "+b(r));var e=N(3,0);try{r.call(u,N(2,0),e)}catch(t){e(t)}}(),u}function _(e){return function(t){var r=(0,a.KVm)(arguments,1);return e(function(e,r){try{var n=[],i=1;(0,a.DA8)(t,function(t,o){t&&(i++,l(t,function(t){n[o]=t,0===--i&&e(n)},r))}),0===--i&&e(n)}catch(e){r(e)}},r)}}function k(e){(0,a.Iuo)(e,function(e){try{e()}catch(e){}})}function P(e,t){return T(P,function(e){var t=(0,a.EtT)(e)?e:0;return function(e){(0,a.dRz)(function(){k(e)},t)}}(t),e,t)}function R(e,t){!v&&(v=(0,a.GuU)((0,a.gBW)(a.zS2,[s]).v||null));var r=v.v;if(!r)return P(e);(0,a.Tnt)(e)||(0,a.zkd)(s+": executor is not a function - "+(0,a.mmD)(e));var n=0,i=new r(function(t,r){e(function(e){n=2,t(e)},function(e){n=3,r(e)})});return(0,a.UxO)(i,"state",{get:function(){return f[n]}}),i}function O(e){return T(O,k,e)}function M(e,t){return!y&&(r=O,y=(0,a.GuU)(function(e){var t=(0,a.KVm)(arguments,1);return r(function(t,r){var n=[],i=1;function o(e,r){i++,u(e,function(e){e.rejected?n[r]={status:c,reason:e.reason}:n[r]={status:"fulfilled",value:e.value},0===--i&&t(n)})}try{(0,a.cyL)(e)?(0,a.Iuo)(e,o):(0,a.xZI)(e)?(0,a.DA8)(e,o):(0,a.zkd)("Input is not an iterable"),0===--i&&t(n)}catch(e){r(e)}},t)})),y.v(e,t);var r}function N(e,t){return!w&&(w=(0,a.GuU)(R)),w.v.call(this,e,t)}var D=_(N);(0,a.Y0g)(11)},8257:(e,t,r)=>{"use strict";r.d(t,{s:()=>m});var n,i=r(8279),o=r(269),a=r(9749),s=r(6182),c=r(3775),u=r(3673),l=r(6492),d=r(2317),h=r(836),f=r(8969),p="getPlugin",g=((n={})[l.Bw]={isVal:u.Gh,v:{}},n),m=function(){function e(){var t,r,n,m,v,y=this;function w(e){void 0===e&&(e=null);var t=e;if(!t){var i=r||(0,d.i8)(null,{},y[l.eT]);t=n&&n[p]?i[s.$o](null,n[p]):i[s.$o](null,n)}return t}function I(e,t,i){(0,a.e)(e,g,(0,c.y0)(t)),!i&&t&&(i=t[s.DI]()[s.uR]());var o=n;n&&n[p]&&(o=n[p]()),y[l.eT]=t,r=(0,d.i8)(i,e,t,o)}function A(){t=!1,y[l.eT]=null,r=null,n=null,v=(0,f.w)(),m=(0,h.P)()}A(),(0,i.A)(e,y,function(e){e[s.mE]=function(e,r,n,i){I(e,r,i),t=!0},e[s.Ik]=function(t,r){var i,o=e[l.eT];if(o&&(!t||o===t[l.eT]())){var a,c=!1,u=t||(0,d.tS)(null,o,n&&n[p]?n[p]():n),h=r||((i={reason:0})[s.tI]=!1,i);return e[s.tn]&&!0===e[s.tn](u,h,f)?a=!0:f(),a}function f(){c||(c=!0,m.run(u,r),v.run(u[s.e4]()),!0===a&&u[s.$5](h),A())}},e[s.HC]=function(t,r){var i=e[l.eT];if(i&&(!t||i===t[l.eT]())){var o,a=!1,c=t||(0,d.nU)(null,i,n&&n[p]?n[p]():n),u=r||{reason:0};return e._doUpdate&&!0===e._doUpdate(c,u,h)?o=!0:h(),o}function h(){a||(a=!0,I(c.getCfg(),c.core(),c[s.uR]()))}},(0,u.RF)(e,"_addUnloadCb",function(){return m},"add"),(0,u.RF)(e,"_addHook",function(){return v},"add"),(0,o.vF1)(e,"_unloadHooks",{g:function(){return v}})}),y[s.e4]=function(e){return w(e)[s.e4]()},y[s.tZ]=function(){return t},y.setInitialized=function(e){t=e},y[s.YH]=function(e){n=e},y[s.$5]=function(e,t){t?t[s.$5](e):n&&(0,o.Tnt)(n[l.qT])&&n[l.qT](e,null)},y._getTelCtx=w}return e.__ieDyn=1,e}()},8261:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REDIRECT_URI=void 0,t.isSupportedClient=function(e){return r.includes(e.scheme)||/(?:^|\.)vscode\.dev$/.test(e.authority)||/(?:^|\.)github\.dev$/.test(e.authority)||/^localhost:\d+$/.test(e.authority)||/^127\.0\.0\.1:\d+$/.test(e.authority)},t.DEFAULT_REDIRECT_URI="https://vscode.dev/redirect";const r=["vscode","vscode-insiders","vscode-wsl","vscode-exploration"]},8279:(e,t,r)=>{"use strict";r.d(t,{A:()=>L});var n,i=r(269),o="constructor",a="prototype",s="function",c="_dynInstFuncs",u="_isDynProxy",l="_dynClass",d="_dynCls$",h="_dynInstChk",f=h,p="_dfOpts",g="_unknown_",m="__proto__",v="_dyn"+m,y="__dynProto$Gbl",w="_dynInstProto",I="useBaseInst",A="setInstFuncs",C=Object,S=C.getPrototypeOf,E=C.getOwnPropertyNames,b=(0,i.mS$)(),T=b[y]||(b[y]={o:(n={},n[A]=!0,n[I]=!0,n),n:1e3});function _(e){return e&&(e===C[a]||e===Array[a])}function k(e){return _(e)||e===Function[a]}function P(e){var t;if(e){if(S)return S(e);var r=e[m]||e[a]||(e[o]?e[o][a]:null);t=e[v]||r,(0,i.v0u)(e,v)||(delete e[w],t=e[v]=e[w]||e[v],e[w]=r)}return t}function R(e,t){var r=[];if(E)r=E(e);else for(var n in e)"string"==typeof n&&(0,i.v0u)(e,n)&&r.push(n);if(r&&r.length>0)for(var o=0;o<r.length;o++)t(r[o])}function O(e,t,r){return t!==o&&typeof e[t]===s&&(r||(0,i.v0u)(e,t))&&t!==m&&t!==a}function M(e){(0,i.zkd)("DynamicProto: "+e)}function N(e,t){for(var r=e.length-1;r>=0;r--)if(e[r]===t)return!0;return!1}function D(e,t,r,n,o){if(!_(e)){var a=r[c]=r[c]||(0,i.sSX)(null);if(!_(a)){var d=a[t]=a[t]||(0,i.sSX)(null);!1!==a[f]&&(a[f]=!!o),_(d)||R(r,function(t){O(r,t,!1)&&r[t]!==n[t]&&(d[t]=r[t],delete r[t],(!(0,i.v0u)(e,t)||e[t]&&!e[t][u])&&(e[t]=function(e,t){var r=function(){var n=function(e,t,r,n){var o=null;if(e&&(0,i.v0u)(r,l)){var a=e[c]||(0,i.sSX)(null);if((o=(a[r[l]]||(0,i.sSX)(null))[t])||M("Missing ["+t+"] "+s),!o[h]&&!1!==a[f]){for(var u=!(0,i.v0u)(e,t),d=P(e),p=[];u&&d&&!k(d)&&!N(p,d);){var g=d[t];if(g){u=g===n;break}p.push(d),d=P(d)}try{u&&(e[t]=o),o[h]=1}catch(e){a[f]=!1}}}return o}(this,t,e,r)||function(e,t,r){var n=t[e];return n===r&&(n=P(t)[e]),typeof n!==s&&M("["+e+"] is not a "+s),n}(t,e,r);return n.apply(this,arguments)};return r[u]=1,r}(e,t)))})}}}function x(e,t){return(0,i.v0u)(e,a)?e.name||t||g:((e||{})[o]||{}).name||t||g}function L(e,t,r,n){(0,i.v0u)(e,a)||M("theClass is an invalid class definition.");var o=e[a];(function(e,t){if(S){for(var r=[],n=P(t);n&&!k(n)&&!N(r,n);){if(n===e)return!0;r.push(n),n=P(n)}return!1}return!0})(o,t)||M("["+x(e)+"] not in hierarchy of ["+x(t)+"]");var s=null;(0,i.v0u)(o,l)?s=o[l]:(s=d+x(e,"_")+"$"+T.n,T.n++,o[l]=s);var h=L[p],g=!!h[I];g&&n&&void 0!==n[I]&&(g=!!n[I]);var m=function(e){var t=(0,i.sSX)(null);return R(e,function(r){!t[r]&&O(e,r,!1)&&(t[r]=e[r])}),t}(t),v=function(e,t,r,n){function o(e,t,r){var i=t[r];if(i[u]&&n){var o=e[c]||{};!1!==o[f]&&(i=(o[t[l]]||{})[r]||i)}return function(){return i.apply(e,arguments)}}var a=(0,i.sSX)(null);R(r,function(e){a[e]=o(t,r,e)});for(var s=P(e),d=[];s&&!k(s)&&!N(d,s);)R(s,function(e){!a[e]&&O(s,e,!S)&&(a[e]=o(t,s,e))}),d.push(s),s=P(s);return a}(o,t,m,g);r(t,v);var y=!!S&&!!h[A];y&&n&&(y=!!n[A]),D(o,s,t,m,!1!==y)}L[p]=T.o},8311:(e,t,r)=>{class n{constructor(e,t){if(t=o(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter(e=>!m(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&p)|(this.options.loose&&g))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,o=n?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];e=e.replace(o,P(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(u[l.COMPARATORTRIM],d),s("comparator trim",e),e=e.replace(u[l.TILDETRIM],h),s("tilde trim",e),e=e.replace(u[l.CARETTRIM],f),s("caret trim",e);let c=e.split(" ").map(e=>w(e,this.options)).join(" ").split(/\s+/).map(e=>k(e,this.options));n&&(c=c.filter(e=>(s("loose invalid filter",e,this.options),!!e.match(u[l.COMPARATORLOOSE])))),s("range list",c);const v=new Map,y=c.map(e=>new a(e,this.options));for(const e of y){if(m(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const I=[...v.values()];return i.set(t,I),I}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(r=>y(r,t)&&e.set.some(e=>y(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1}}e.exports=n;const i=new(r(8794)),o=r(8587),a=r(3904),s=r(7272),c=r(3908),{safeRe:u,t:l,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:f}=r(9718),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:g}=r(6874),m=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let i=n.pop();for(;r&&n.length;)r=n.every(e=>i.intersects(e,t)),i=n.pop();return r},w=(e,t)=>(s("comp",e,t),e=S(e,t),s("caret",e),e=A(e,t),s("tildes",e),e=b(e,t),s("xrange",e),e=_(e,t),s("stars",e),e),I=e=>!e||"x"===e.toLowerCase()||"*"===e,A=(e,t)=>e.trim().split(/\s+/).map(e=>C(e,t)).join(" "),C=(e,t)=>{const r=t.loose?u[l.TILDELOOSE]:u[l.TILDE];return e.replace(r,(t,r,n,i,o)=>{let a;return s("tilde",e,t,r,n,i,o),I(r)?a="":I(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:I(i)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:o?(s("replaceTilde pr",o),a=`>=${r}.${n}.${i}-${o} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,s("tilde return",a),a})},S=(e,t)=>e.trim().split(/\s+/).map(e=>E(e,t)).join(" "),E=(e,t)=>{s("caret",e,t);const r=t.loose?u[l.CARETLOOSE]:u[l.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,i,o,a)=>{let c;return s("caret",e,t,r,i,o,a),I(r)?c="":I(i)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:I(o)?c="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:a?(s("replaceCaret pr",a),c="0"===r?"0"===i?`>=${r}.${i}.${o}-${a} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}-${a} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o}-${a} <${+r+1}.0.0-0`):(s("no pr"),c="0"===r?"0"===i?`>=${r}.${i}.${o}${n} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o} <${+r+1}.0.0-0`),s("caret return",c),c})},b=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map(e=>T(e,t)).join(" ")),T=(e,t)=>{e=e.trim();const r=t.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return e.replace(r,(r,n,i,o,a,c)=>{s("xRange",e,r,n,i,o,a,c);const u=I(i),l=u||I(o),d=l||I(a),h=d;return"="===n&&h&&(n=""),c=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(l&&(o=0),a=0,">"===n?(n=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===n&&(n="<",l?i=+i+1:o=+o+1),"<"===n&&(c="-0"),r=`${n+i}.${o}.${a}${c}`):l?r=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(r=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),s("xRange return",r),r})},_=(e,t)=>(s("replaceStars",e,t),e.trim().replace(u[l.STAR],"")),k=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),P=e=>(t,r,n,i,o,a,s,c,u,l,d,h)=>`${r=I(n)?"":I(i)?`>=${n}.0.0${e?"-0":""}`:I(o)?`>=${n}.${i}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=I(u)?"":I(l)?`<${+u+1}.0.0-0`:I(d)?`<${u}.${+l+1}.0-0`:h?`<=${u}.${l}.${d}-${h}`:e?`<${u}.${l}.${+d+1}-0`:`<=${c}`}`.trim(),R=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(s(e[r].semver),e[r].semver!==a.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},8393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryUtil=void 0;class r{static applyReplacements(e,t){for(const r of Object.keys(e))for(const n of t)n.lookup.test(r)&&(void 0!==n.replacementString?e[r]=n.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.8"}}static getInstance(){return r._instance||(r._instance=new r),r._instance}}t.TelemetryUtil=r},8435:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(6982))&&n.__esModule?n:{default:n};t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i.default.createHash("md5").update(e).digest()}},8528:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loopbackTemplate=void 0,t.loopbackTemplate='\n<!DOCTYPE html>\n<html lang="en">\n\n<head>\n\t<meta charset="utf-8" />\n\t<title>Microsoft Account - Sign In</title>\n\t<meta name="viewport" content="width=device-width, initial-scale=1">\n\t<style>\n\t\thtml {\n\t\t\theight: 100%;\n\t\t}\n\n\t\tbody {\n\t\t\tbox-sizing: border-box;\n\t\t\tmin-height: 100%;\n\t\t\tmargin: 0;\n\t\t\tpadding: 15px 30px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tcolor: white;\n\t\t\tfont-family: "Segoe UI","Helvetica Neue","Helvetica",Arial,sans-serif;\n\t\t\tbackground-color: #2C2C32;\n\t\t}\n\n\t\t.branding {\n\t\t\tbackground-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAlqADAAQAAAABAAAAlgAAAADkcSUjAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAxaElEQVR4Ae19CbgdRbXu6j2cecoECTIkICCGzAg+7qeQ9544QFQgiXpVEJTEe59ALsbMwE5AMZCQELgKeSoqDlyiQogCSUAC6FNCQhIwQMALCbNMGc68p37/v7prnz47++yzzzl76OCu851d3dXV1VXVf69atWqtVZaUg397IPJwSCKT46zgx16wh+19XSYnO6PjE7H4MDuZ7BSxXhQJ/On5KTWbTSMm3bYlvHXmJNxj2SatFLFVioeWn5lDDwAgMvOU2NG/3DMo2h691rLtr4bqBtVX1NVJRUOVBIIiyYSI3RkXO9q5NZmU5S98tu7XpmQF2AwAzCoNwMrAMm/CT3HkrgqJTI/KwodOD4ZDa5MVdUPtfe+KxONKiSob6+SIE46XqsYGK5FIBoLVtQEJiSRaWp+xktaNuzpqfirTLcBOZNJtdnjrDCk6wMrA8hOgWJcZoFSrT4nJogfPESu4Dv8AVLTTEqsC9MkSDHB2NIYfkZGnjJOqpiZQrkTCAmWyKqtDgXBAEs0tLyZtWRl7953/u/uiUR0sVgH2xuKERCJJnhc6lIFV6B7OuXyAJrIpqDzVlQ99TUKVt0scAEomQaXskBAONlEFrgpvLdkZk6r6Wjn6IxMx2qVeY0IsSVrhqnCgMiiJA62v4a5Vkmz/4a7PDWtmVXSIfGMSAGYVFGCpGvGh5VCiHohEAiJXi77sKx+eLZU1N0hHCyuTAJCCDqCAKIUCYxv4AcY6YnL0qeOkZuhQSeoo6b5OG+AC4ZJQRThQFQbAWt7Bvf8ZSNg3P3deA8ZUF2AzADCrMAArA4u9XMoQsQMp6nHlH5dKdcMcad+fJGVCCKRAxfMU1XKB1dYpI8acKI0jj5FkDNSti3LpzSgjCQQmrFA4HKiuIMAO2EnrtkBb+8pdXxr2OjOd+bAd2vQ2cro8mXPjwH/LwBp4H/a/hLvuCsr06cpky6KHfiK1jRdJ235M80ClABMtmMMfKJQDNB4j1VCstg4ZcTKANWpkZmCxAJZiABYIhgO1VRwi21HGj63OxI27pje9xGz5BlgZWOzVUgSPjEqufOheqWmcIq37YwBCWKsDDGlQULnAUh6L4CLFAh/fCmCNOSE7sNxi3IilxiUQCAdrayR+oCWBcn4q0eSy56c2PMc80+6yg2t4MEAKVgYWO7HYwcz8Ig9XSTz5kNQ0nC7tB6KoBmZ+bnAZdaVUhIMHVDxWQtQCYI3thWKZ8rrHLICiCwCslmIKFGn/GoPm9S+cW7ddswJgZw4Ta9NkC/n6HsrA6nufDewOV/Ap8x8cggHvMUztTpLO5igkCV2g4hMIJI3dY56mqBdwgXOlWP0DlhbNkhVgtoQDELza7Z1iJ2J3J2P2DX8/r+Evmsm2A2dukkBfAYbZSDkUrQco+IQ0XeY9eKwEraekovYkzP4OBhUrlGLEXYB1q6QnzXPYLUtuJ5SLcei1k62tMYDKDtTWnRusrf5/J9zbcv9xa5snc9aooLJti3xYbsVy1lEOxekBI01f8NBECVnbJVx1hHS2YSrnGf4y1SQTwAyYTJzpvr6lAWA2AWYlW1vidrQjGait/VS4pvaPx9/bvOn43+4/GwCzDcAoC0P+rKNd1ot9q1s5d489YIa/BQ9+Ap/yAxKsgJSJ8gGXUc94I1BD4Og/j91zDodYGFTmvf88VsYnpiWSt7ICNXWcoQoo2uNJ217298/X/8bky7ZcVKZYppcKE0OaDg0FDn9XPfwFCYc3YEYGUEUpTQeFUNTgyZniDBUyfJdecu9hVJjAYS+YbGuJ8z9QXXNaqL5uzQlrm3d88O79X+Ujt860MIu17ExDZJliFealkMJYMn1NQNZATnXlQ9+ScPXNEm3H02zKrZQK9PpoxQ5+PBJ3pVwqbkBJpFhjPiSNx47sWY7V60Nyy4BaQDQhdqCyJgRWX5LNLbuA8xUfaKz7sTtEkkhhMuBoU5QpVm792rdclKbzkyWoFj64WCrrAKo2SNMxhukSjb4CvoZe/pGBebyfP88ZTNx14KQX6BdV4McQSna2JZItLXGrsurEUEPdra8daPnv43934CIy+Qoqth2hDKx8v4hpkKbrAi++3AUbf4AlmqukvTmuiytgWfr3OBdg/bs533cpwMDgJ6BFEQtUVB4dGlz/kxPuab5TH8S2A1z9bGi+6/o+KY/8FKkUw6KH/ktqm/4Ngk8y6UHltvVCH39IrQx1SsXmoI9l5Tc72xS2Y50AWGtnaEjdF46/p3mtPuJqqmOUQ356YMZtYai8xITrfzsGb4Dg8392W6IZ8FOygImXslwe8KOzF0Dti2D8vZbO0KC6z37wdwfm/d2yvu8dvbPfXr7acw8YcULkrw0Sa34EoBovHZCmq3Jez7dlvwKkGMCoqIHn+E8tQtse5n1UwZn37HXVq0nOeO14sj0Ws44tD4U59FjWLEaaPue+IyXWskMqa11QUfCZQgaK6OtxhqeaIkpInjLUyiRBjJKMhRrrqkOh5IXlodB0S3/ilDR9/cngyx+RcOVg6WjtXZqe67OUUqVnJroQsgu+nTzF/oXUlsIUTIk/WaZY/e18A6r5D34MXbkV0vTBEoVKZ1Zpen8flv2+FCHLnq0YV4N2Zwcwb48pU6z+dDfVXiKnRKGh8HksJt+tIp44penZlmj68yBzD6DjRQ8pmQbwWR4u2aSau0oQg2JRT9EaUqZYfep9vEaKFGhFs2DDN6Si8m594Yk4RQyF+0gVMRlgwyTzb9qRIZu51C02+Uzc7WLaSS55eIvJh1WHwnVGWt0O+VM1eFgMg4dIXBY8OF+qar8HlRd0JciHRRutEoXUy/Q836R5kjIemnwmzpjJTcwlD7O6+crAytaZ5ppK013B5/wNy6W6/goIPkmlMBD1V5puCu8h5gs66GV6E7zHPZRRsmSrgOS7ZI3K84O9Bg/zN/wcuulfVYMHZ+3Mw+Hk+bmmuHT8pPgrZki/aG4qfVymWNneAfmp6Y5TDpm34T6s+306v9L0bA/ntSzAMZdK45qht4qXKVaPPeTM/GISWVcjnZV/xPB3mho8WL1ofPZY4AAuGHmWAZMpKv3cpPsgLlOsTC/BLNHMXn+YRAOPglE/ERoK3a1oMt1XrDQdDsne4YEEl/kv1vOzPcetUxlY6Z3kLNFEZdGG42Gk/hh00w9Xg4fedNPTy8n7OdBjgKRl+5RcudUqy7G8ADDS9DkPnApQbYNjjsOlsz1/SzTeZ/V2bKiQiZk/HUvp572VWcTrfaNYVLddvTUkgyYl5Rk2c1NARtRbUkIHX3nrKyNNn/fgp6BCcL8E0DUxuHShNL3ULzBFqVCR1KwwlZi3LshnQbkDizMkS61i2dkmqDa2zMQpr7tuDc3FQyOmNH0TtD4hTZ97/1ckFLxDEniBCbpvUZMofzQjHdzp5/6oZaoWuQHLMLOrXmgQO34hvugzUMJgfMnvIH5I9rXfgRfTJpqv9P4vU63r7cAYPESmx2X+A7NgQLoCtn68q7BLNL3VK3U9DT1pp6lsPjzoBVj8mqFWSzOfW549B7ZwP4W67RB1fgm7ACh24T84DZTsKlm2/WKZOX499Z1l512OdYoPG5yqkho8qBAoIXMf+K5UNiyAch4axbdXwiWaVAU9BwZQqdHPJCAPD82/55aSHbp17BlY/JrXQLVmOoa/VTtnSqjqVuFI2LI3itkJmX6nCLrICVceIRVVD8iNTy2RK6yrtVGGypWshVke7Bg8kCqJzF2/Gk45LoGMynEf5HGPl6WEIl/yAIlPTjstcmWyP86tW+ZZoWvCo65sbvrblVLVcCuGCFtiUb6MCjQshH/oOquAtQJMbgKzp6TUD7lKVjy9Ua57bJAaaUZ2dnd0kb1KxblKXtAYPMxd/zss0VwibTB4sEGlaF7sl8AXZP61TjhxX1qqirYO2alTPx0c3JHetbGbdq6SmqZLpXUfAEUnAo7NWA8NYLNjkFBXQJj4NpxkTpMrJj6ixgXPTLNTXut6uLkoyTR4WD0zpg5kB7+3EbrpZ6g0veQyqh5abyTuRBSP1dsM8iYwnMBTn91ph4afdKw0jDrWtqForq+oh6KKmWyDoegOLO/MbuXOO6V20BekdS9ngRwyu+ftsaZ2DPIfmI8je7Rtvlwx9vuatdRDo/FJNe/3gzDZg8FD3RjH4KE/SzTsinTy0WOH9OFCWrl8hD4GPwZYSSj/wmzBqm2y7Ff23H7cZ856Lzxk6LfjLc30nFw69R1PKwmsrqGQL57iAg6DK3c+CCadoOIyhnoh8dzXy6EVhvvohMQ7bQyN18mNf1sHUURdSYdGCj6pnDd349H4RmDwUD0AULH5hQBVT+WaZwF0YEYkGA5KKGRZrfsWyS++fHGgtvofYEpArArjpLaXl93jZYd5N9SE4oTkM5vAd0yQln1k0vvLI/HLsZXa1TbCX7n1nNyw43z5zujHBZ7iVLhaYHfQqRYbafrcB8ZhDHkEk5BG6YD7oP63LVV04Q8AKhIxGuZjsAOVBZtx4C1JJKYmb/78Y/r8aKLKrsYR1A0NBAtfryxPcIkuPPbajjeUVTuOhBcUfM11E6Aa4iy4sqb9/4fPJVCvNrhADFd+QCqr/irLd8zSCYFjht3zjDRLvft0SakwdniYd/+ZuG+LhMKNKk03fj77VFiJMiuDjnGwuoG860a4ED1RAKojbttSwxrB7zYGHuc1MS55AF4IGUjLIUO46RksuNp/lYpqmC/Bw1x+mVln1mhB07Ju6AoMjf8iL738FTy3UzhrjIzm8/IfyKjTfdCc+6bC1eYa/Z7jMcfggS33BsPamDjTtfQ0c55eFtO95XiPzT0m5jUGU0Z6XhvyQ3g6ViXVtr2LZeWUiOZH2044YVL0dT3x5w8oFhys2rIeqiEwX2rPN6hMqx0n+G37YuDdpsqoY56V67eNV1DphCHSxeuZO/obU/7GMjn7m/PANyFNX6MC3XiCzvgpJjk4mDQTe3P0lMb0TNd4rzfde+wt1+TzXk8d66gWxUYC8P4f2yvtLWfJjQAV9e7JA7NtPg8haTzsPzD7GyUt72GbMqksYH35PWJoxDBbUTUK85ptsvypb8q3x96mz/TOSPtbCTV4wGvlJGTu+kWwSr7GFwYPfWoP51RoA4e+1n2PSqdMlZs/97aKSCKngOJGUvDrXiyTDQnsfqX4Z7bOCqc6DsHwNRcnYGjsgJQbHVE3+FZZ/vQdcC7u7CGDnar6XQUtI+L4aJpz/01gdK8BTwL5Gx9Egwd2vJ//teUY+kIBsCRBgGqpLPvMGXLzZxxQcVbrNCCti5wFBCfRL+2juMGW0QoseAzRd8D30O2fzUlP6+nc5DWxN583jUMSCm2Dw/y6QV+R007aKUu3nqRrkpxMcDjrS6BQ10jT59z/K6luvAyg4syPQ6wLqr4UWIq8Nih5NYe+Vuk48FmAap72Az8YB1Q9VwrdfNA3w9wm3RybOD2d5yakX2N6+nWTZtLNPeYc17lXC10yp93NcxM8uU1Sj7HJa2JvRm+aHjueelsh1qiqOREzx7/Jsh0X6mSC7gY5NOYSyKRz2xC24zv3rccQ8iXsRYOv2/ECnEsRpc2jQ19ch77Ols0ST5woy6as06GPn5f5YLJV0tu1Jp83zRybuKc83uvm2Bt7jzOVwTTmwT9dGu6ERS+TvDSV58UKFViH5EaNAfB6PwXftVofTD6J4oJsQaXpYGRnr6+V79y/GUs0ZykPR9/lbgN9G7NdNjeoDGLoqw2h3jfJDWefJiumvJbaszBX0VTf6Hu2Hs3bNQwT1m+kgiIRiB1KFSxYZFNLghoGdYMvkRuf3iHXbzlOxQUEV6ahcZorTZ/1wAjoiO3AyzkFwx+c8XORHKjiv5+DLRz6sA8h9nZuOzBdbvjMLK1uLkOfn9vl1g3A2r8CM8I9mEFV4qU4MiXvOzHH3th7zIK85+nH5rynfCYdW2ugnJBK/Ctrx0qw6hm5fvsXFFwcGimxN4HS9DUQfH573YfwPTwFg4fjpJM7PKjmhcnlV3Bx1ucOfe07xI6dJDees0Y4pNPFRy5DX1cLfXsUkCtOxxZjyU/Br9M+fEFUiekClwFFeszmpKeZc+8102xeM9dNbPJ5z538FbrkEghWQOZ1pyx7apUmczcqUi/VTQeoZq37H3g9T8J90FDpgMGDoVR8kLdMf1EuZ8ivqgthdWO1LPv0eFn22ZecoY+yKX+syjivYWC/kLxjFjYba3k37RwHbYQ/gU85qgDS977WMgyhZhL1SGJovFSWPf1ReIs7T2aOe1ULunTt2Vgp+L0EQcSiEF1YWDqiSoluDwKGg++HE0vDexhwmfO+1iYv+S0ubVHUksTQ9zVZfvYdWqzK71SU0L+nOFIv517vB9W/0gZ+l9vHkOSCtyIluHz0yxK1x0GV5GmdoeCVDfwpAyqBogJ82Zg1Vtd/RIKBF8B7nSUX/OJf4drz90qVYjHOBimecKgUY90ShOfuMaJU8B6nEgt+gFePpZlqLCBH25/DBzNaQUVAkXfMhwEK21Wath3ceW5d+PIkxSTPH7tXmk+eiOn6I1Dwo2ZDqcHF2nHxNY79jaskWLleRh33S2irQqVQfVIFHSDh3XHWrpQJLdPGeWMee/9ZbFECJkSY7VbVYcWh+eey7AmAaspz+iETUO4uDgOuSUkpcebad8mKuGCrZFlnh2fKsr/9FtP/86TNVfSDWkbmIoqQylljPEaib0lTExaGwra8/lpQosB9GE1QIOEqPxPW0tSUMa9pwEnqnIkmk3s5/1EUCo8V0E0TiBJmyvJzVusj2Mfs6/d5cCiWaSS/IkqxGWaffD70qWBoMIgyIcq4Uq9Irxfzx3myA5t43JKamoCMHClSXw+aSlkoMpihzwyFhKFJ1/vdPE5ZXdfy3Q5oTqFI6E5BRTvW8SK2lx+voNKPNgLWA338TxC6A4sNphRbjSkw/s8+eaa07fsurFhI2dhhfF2lDWTQoaggQVTpA0eJHHY4XiPOwetrDVNgwrnqiBtApRDl5DOtYP78BQ5vAlCFsSxzl7zcClHClB2iyoYAVARrmf8koWso9DZYFfHwdX0Y9oHTRy/CrOxt8AkrIZJALjpcpm51Xl+I9+m9H3MU05UQxEOHiVRXibwO7SRSrwoOjahbgJkQWE0e8oVztmji9Fkj0wcWMPRVVKiKTtuBy+XGsx0xiVKqyYXlVdlG/vshuN2YGVisoH5dnLWoOOImyJPeAc/wC3QcGGa4xnUMLErfFFaltk5k5CiRN94QaW4GuCBrVPGDCyRvLfkC2Hj+6zEO9Nh9MzzOOWhm3hhXteGOlldBTc/HssxmxzrpGbsYQ182omua21OT3FZrFzBPT+e85u0ak8+km3OVxOGkZ2DxDn7iEXQaxREzx/4SDD1M6m3sEAqO2ewQakrU/O6Pvije7p5785hrvGSu89jk8V7PlMdcN/eS0pih8UgMje++LfI2qoklOLXUZkt1wOcDkFfv1x8cI874Vkw+VgCB2RlMHXmsRejegwGIZ8JYjlon1rtfkhUXtOrQNx1C3CIFVstbtfTHZrtm8qbnST9nvkxp6enMw/+DeSzmTA86Y4Qa8eyT16NHT8UMrRVGCWTqM89uTA3MU7zlmWtMM9fT09Lzm3zmHhOn0vGWafJPkAw9TOQoAIygUb8eyJxi6HE9xXchnflT/ywUQctkunPaleY552HStZgJhi3M+uZBNgVVF4CKSzOR4oGKVTG457FfQm7AYm2pm04d9dknPwFqMB4znjexvkjtg6J9mVk7jUBiIPWqw2zxmFGC2SNqh+oRPBnB5QJIQcRjPXDKMYBzzry/zARVH7Q9EXsL1uEfx1rfUkdZ8dBQG/Y2plDHuQOLNTDgumL03/Gmxkln6y61fPYLuFhHMzSGgfkjj3aYezL1pGgMBjA8V+rlUjoDKr3uZE3l7zoFakHLqDbc0bIRVk0nyopzHtO1Pi4eF8ukras+vj3qG7DYDIKLPNd3xr0lweYJ4C0ehx2iX6T0TkcTXAZIFEccBYBxFqgyL2QheMyQmKJkSNc0FpGJenHoCwWx3hfAWl8EVOosWXnuPh36etPwZJH/ZKEX5r2H3lCeC7PFKyzunv1Ruf6pP0BK/xnIvEAaqFvFt1jqgCpw0OLQWN8gMhLKjG+8JtIK/1ecNbKGJGLpNeU9BCbTnWOagsZgMQOFRGiAWPHpECVsVIuZnR+Gh8PpmflM3F6UwDawnvz3S0Bd+k6xTOW5eG10pOaMPRuLxXCuTyl90hkuTL6Sx0AIlxXDIKpHjRQZMsShXPTa56VcqSHQTdcXBbJnQ2BWSWPR1kelDUPfcoBKVXci9vtFd6oQr6j/wGJtqCNFjUeGOWMuxBLQcixekwriO/KRLwHv0Hj4CPBeRzqgov0qAaT8Fqps+C4m2kkYY0BmEa4KghIvlZXnnCG3nveWZ+hT6LHp5XBwD/RvKPSWo0wrZkMMc6zZGBbfgT+t66DRyY6nkagDPM1Qwh+Ci4FDYwMWsisprcfQ2IGhkYw+KRazONloLIq1vvZWiFa+BJP2dchgybQ1MBYt8dCnjfD/z8AolmkfZ0NXA0JcvpgDt0Wdzd/Al45XFODSD4dG/wQCjOCiAcnRI0WaBrtMPb8D12KmAgvIHa2bpS3+IQUVhz6G94nasLalwD8Dp1imgo5ukSulH/NjuQGUywrdA78JQch7yGLmB8TmeQONCS6CbPgRWDSGu5Z/vAF+CkNfTS1mfXtXya1TL9dHqCXQIaLmwm/DBFJe7znT09PMuYl7upfXGdLLc1K7/7p58/+yOWNUccTYtVhS+QgsaPaBcPE5BJd/gndoHDTYlpHHBeB36oC89drZCirObA8VixkltmldmwkE6Wnm3MSmiEzn6Wkmb3rMfPjPP7D4oK3u0/78Z5FX9jhMsVq551o79/5iRDo0gomvAs818liR8ad1PXVa12H5qA89AKqVf2BxrYwCw5lrPieHD31C2jub5OUXk2CCAw7L5UNwcUxMQKHLCjTAKvsPct2Om5Bkq24aqW859LkH8ggsDB1k3uli59/v/jqMYO9Rvj2AmWFHR0BefglMMhza0LKGMzD/hQDUgRyj2fpBl8l12zdL5K9HpuwBVHTvv0r7tUb5AZb6bVoMYEFL8lv3zINu0o/AsBM9CTCMWAbBHCEOATXB1Y7pvU4WcZk5/PXfZTRLy6Cq6ufke09+VsHFehq1bb++TR/Va+CzQjK4EXe/5MvWLoerSeyXDPdBAVCwpOvFlxQqRHBhJrZnt7M4TOU8MzPzUYe4VaG4gS6FatGetfK97ddjaJyLa47RrB+NIQh8PwTOClGXgVEsgsrIdi5f+zOs+l8Bwahj7UuzJz5E//mDgDVcPX9lt8iB/Y7euj+HRdbWMZqNtiakfvAc8F2PSmTHYV1Do7aE+UobONf2C6jYE6gL33b/gUV+KgWqdX+AT6oLoOnARWhnhwcDKM669JhPRSCPxf/XXhHZS01PHPuqZ7SW5of9E3CNZj8mVbJLrtl+loIr4oojTM4Sxn7CFbuB9enfUKhakpNj8h93VUuyGvsl130UVilw323R94MTCCg9YYygp7hI1RQaOpB6vQEDCA6H1PrkOp03v97kgx/HnpL6V1CbqWgCv7hevrttsSy0Ilq7EgtQ2Wump33QW6kq9B1YpiMvvW8YhJ+PqdO0Ds9+yYoj/Ojam56kHqYHmgRwMaZFzVtvOuAaNtzBlR/B5bSAGqPYGAFbi9QPuVq+t+NfJJqcJpEJ+4QuLrlDWjmkeqBvQ6HZ4eGydcdLAO6DKqpPhI4SVZOp6OeARYHhAsekKZjwo8OiJ+Z16kbRAOLNV3nm5NElO5RhyvJLTHea3MiJ/iRq6v+3VFjPy7VPflxBxRmj2mNqK/7pf3IHltnh4fJ7P4IZ3zZoUg6Hdxp+pQ6oTFfqEOieKKBwzDh17AKLwyH/mR/meLJ/L7QN9jhDIvdB9CtTr0qMNneIiKEPhmH7lEfku9vnOoa+WIw3C9amP4oR+/AbzA1Y7Cxanlz++08CCI9DRbcWPgnIqGeWSnvBpR0L8JiYh/qPH+bTf6RREa8FNoFcAqKtoJ/B5bQFewZhO7141IaD3u9DJLFOZu+o1VUHP26np3Uu3k8vwDLSdCzRzFr7ZciiHgAQsPwBuyobfEW2LyVFokxjCCIee8BkQMV02v8RXNSPenk3zOYxwhpBKm/LFkw9TB6eDySY+03MsjIeu3I6qmTXYM+gwfYuWbLlNLULoHZtUYdGVtD8pzc+vfLefOnXvPem5zN5M6V3v9YzsChNp2Ibpemz7p0l4dpfqOeUJFSPnQ0wvTXo4ViR5FxLgYqnBlxpMTuGSnc02SK4OqBST3AZIwfTnvTYeUL3fk3P05dzlsf8DOa+no45a6QzXe4ZFKr6APjOv8o12y4v6p5BWlHvj6m0idMrb/Jma6S5Zu5Nvyc9vft5ZmDpEk3E0em+7N5rIX1eIdFWzGyVq6bgKfdAqmSCF1wpapUJXHgEh8NXXoILoBa/C1JN6+CyqBOUPI7t9AatxKzxLrn0vkp1bPdPODQeDCxdook4QqVZa2/D7GchZDjcL5mwQH7zFfQh5p0KKjc2YPOCy0vF+Koo5+KzXtkNfwz7HHBpAp/r2wALJdSNGyPUNE6DEuGzsuTJcY49JgTKzpYsvq18PivWHVjdpOlrfwvd9RmuM/787Jes4HIB6QUaW6Tgw4+Czb1IqTyZ+NdeFtn3btKR0pMZ85GhxsFvg5V39wyqHgWB6na5ZutMZSnoaIV9XKrQn2+yP/egfV2NNNJ0xjXDN0ql2S8Z0vR8BgLHK0pgxV0cOY/xnDAflU8tGIu+9aYzWRgCt0UJOF9znMH1bVjOZzt6L8vZM4h9zD2Drt3+LxIf97WUz9d8LWSbBYtcAZBrPm/7+noP8jsUS5XzoEc16+4mqR6+RSrqzkjtl8xCc/lnRUw+7zHTTEgde8Bz0LCIzLys/5oPFjPwkxCQDnn+2bPgYO1fwSTjOrh6G4Ya5pn+jDE0grpS5lXb9FUJP7VTIls+5Kw1gnL5wrDXvJz8xpj1oYFUzrt83dGSCMAZf81Y8FQHO+Pv7bkp0CCj95j3mZdujhl7yZSCCyDSYZCXcBzACwnAKLYGxqLxts2QPxwvd39zo8w/+ddQGDxHqR73Rwa3rMX59kc3RjBD44cw690JvusCHRqppVrKobGAfeaIEy5feyImfNg2pOooSNO7lmgK+GAt2lArnihxYkyAYeijAUYl9pjpaF4lt00/TX70lVfVWJSqwgvH/AE5T8eQ2AEzMw7n7jpdOqJxJWPIlC/XtPQCM92XMQ/ccbt7BtU1/QwiidWai+Kc96H6c0C+xh1W7fWQvzTBNVHxQGX6vhu4lGphjxnsLCrJKDZvmp4yw1KLGVBW9RsBd0oLxv4FIJyAOr+NZRXkx7ZsGviie/tnxvQ8uablcl9PecBv2VDj0D2DBl0i127bLpEnjtU26VIQBNLvkxCQ+v1XQJfqGHxNUEjHGthBHZ7eSQU4d7qTbChcLtLbMPaYSdgnyQ/Py7zHjHGntGDscxhaMHS3/re6asy0XYvBi/eFsQnpwdsscy0930DymHsdvha7fWEhu7J2HDZAfxYAm+bsSYih0fjDMHXoT2yeZervPc+WxmeZ6+bYe6+pS7Y0Nw+1PKfiq+dp1wzRFFC8OA5+Co72MfS1H1gtt5w7Xn54/otZ95gx7pTmjH5T4vvGw2nHFvVbZcDFupsO8B6bjjPXTOxtqzfNHDP2BpPONHOcLY+5tysvvdeg3dgzqKr+Llmy/SbNYvYMMvlzibvK7A4M3ptep2xpJq8pL/3ZmdLT09xzzgpH61INfSyYTMWMsYCDWV4Iin5JqDVfAFDN1PbopAJrlNmCDos2BI+TW2Th2FMByg3ujhrZ78tWZlGvweWTs2cQttNrugx81+MQS3xAh0blu3IbGv04ftIqJTOqC93BxtF+pTrafw6mYqNl1bl36CyJ03AytbkE406JM6xF4z8Jge6vAK6wTgDcvWNzKaaEefhxO0NjVd2pON4li7dOUXDx3ZC37CUwmwnmdZrYpDP2ppljE5t86efp96XnY34TzDFjSh//Bv/kvAYd4aIFGFzgj3vMdGCPmSHbR8stU59z/E4BUI4fiNwr43WntHDcl8G/rJJqgIu+rfwtpfe2EbNG1zKouv5eiWxbqv1Au4JeZo0GDObFegvNdC1bPnNvT/eZdJOPsTfNlM09oddgys7ruVEI5hxIsDj0VYKfAwFvb54Jby4XYg3NWeoYiMtFvgCqqZDaLRp/OcB1JZakKOci3YLDD1Ta7/9JWgbBRq6TlkGD5sjiJx+V2X/2n2VQDu8/IC17V2L42A1xA/z64KUXKujQR5eL2F4tFn0RBHI8+KnVOvSpNkWOQ1+2+tGdEgP5s0Xjr8WOW/8GgS9oozqOKCZFzlbL7NccXjfoWAY1fEzqq3fJVds+4YhZImARXF9k3lL89MGwXqhPQH56UQcsts6CuOE93ahR5UF5rimXXshhco+Z9pY1MrTzJLn5vB3gHypSi7PejhrIsUqzAVLKha4afytEF1NVpyug6hLFocoDqT/vdWR7mDU2O5ZBVdUb5KqtEYey4+Pxqj87n9JAn5i/+wkdBGdJZ9WUFyCQxA6rHS/hCyfDxSWd/AwdOuurgHYEFNw7sMfMLZ+frmrOpCrc17lQgcMqeZNF434LmdhkDDHc8zAEgB8iM0b2P3eOhWVQtD0J58FXy5VPbpBZ25oo83r++TfyqxyQ5/fgLOlwEfrm818Vq3U8KNc2LEI74BrYwwBNDH0sK9b5GmZ9p4FKrdJZTr6Gvt7qZ6T0V47ZBHP5SRCr7JMwpfQ+B5f71euXzaGRE522/di0oP4TUpvcJXM3f/z1mUdAhxvB5jDvv+BUiovQpCA3f+WADN1xCuRJD6oEnIx2/4KjdVCFPWY6WtZJdcuJcvO5m3XoUyZbFQn7V3Jf7zJS+oVjnsIEcTx2Z31FKqAtQUGqUmXi32f/rJjWCY1lHeFgCb/caTYGqnsY+OFHAnO3LGJXBMIWWBkeaU498MOPUyVTE4LLyI++dc+vAa4vYvji0EGpfPe85p70mGAM0CoCIR6dJ/953lI99patCUX+4bBICjbvsUFwB/kIpPRj8KL44fhzSCGgGBh3Axn41aQdsGqHWPZbr99+zLgT3gsNGvrtROuBBF5QrzIvLbPQP6jzwWDxOvr41t2rAK5LIWvijIp5s5FdKi9j6KvlUsVbYECnQpTwmA59o6fZUHArPZtJptfwXv8IboT68Bk6xPgRXClg4cALLvZiEjIVKDraiXBo2PB6qR9xmG1z59kMr7PQGMpYPup7MFCcocqRB91y7mUA1VVYLOVyDypuPCBrS1EmYwam47OiFL2zZSPoG4Y+BVWFOg7xA6hYTYKKlJOU66oJZ0rr/rtTS0CHgpReuxs/jmVQCPywI0JxztlC34SDKZapGgWN02H+RaB963ffxHreDzGzwteC3bNtBSTvZZOgkIehjzxkLBqRH5y7WIswWqmmPD/FNIfnFsUMS7bDYKRxBgSqFEVwKOm5T5i/WKELROxl/W7R06RW+g+KJXZnTIYdNVzqh9ONBprjVUEqVj0zPQd1660TIZB7GIaXkAv9+2+mADy3Y2gcgoVTp6E0dCCgOg5g1pe8WH4wbQNkLQHhHjMEpJ8DBY0RvjK8osg27HvduACCYjNcH0zJi90W1Ayd7DyVkbGtzAiswwAsfBeHELCchhnqM+OuRqkIXoD2noEL8LxvvY3GPCTh2B2yYnq7sx3ITH75bo84t/v210uVl2ybBf5wBfhDNAvrpqXeUUN70O1Gwt0w8OnAOhIUa8ShCiwio7dZXW/X/YsuUOVNDlVevA1uBCp+4Qz5HPd1NlyamucCrA53KDykgcXu5Rc+c3VI9g5KymhspE3m//UR2FptBumw+3mV5j0M+KlGHBHZ+ikM7/dj32sMP7EYKBcFqsUP2YCFncu681igWLQcTx8KWUZPzE62awNtLcru6bEDLfrQvJ+m8CpQ3X4q3tzD0PqogXYt5XjFB1cmYPXIvPtvKCw9k+onCBopfWT8ZkjksLzV+aYadqSk9KgsX3gx/k2/pD/LpPs8LgMr/QUZXfprJ2Bh3sK+123P6/JWIVWK0utgzg2ozPkhNL6UgWVemjemAJU8VwT7XjcMHQ8h8eNqqFEIlaKeyB9ngb0FD/ByyN1baXm9fgh9A3ltd26FRWysnVqcHWJW/OR9kNJ/GoLU4vBcBilGzGBil8/iAhkFpEMpIPXhrLBMsbJBzBhqKLAmcjN17HsNXXpHjdu8+mwl9P9apk9eKRR+0p9szvU6HlnK2G1xGVi9vXqvoUZk4oUA140w8KW2B2hGARfWDThYP++x1tckmNjNo9dK/ONWKdN3UeKa+fTxRtecC+pXbZkPcH0PqsPU5GdX5v8DZakMZgg0cZrkXYfC4Yf7bkkn/x3idMf775eAigBEXGFYcgo3U79EQtXQ7cSCKXX6CxIMunoo3KUOPVwtaXIZWH3qfi5Yu4YakQk/go3A51XafUi4U+pTQweWGSpIZWD1pwtVrwtS+iUT1ko8/nFVJaKtZKENNQyFMnF/6l7Ye2wrCIc62GukDKz+drSR0l8z6TG4s5yIPXbew9BIXXqKI7oYbgOCvsbeepl7vWneY/JfDMqH4bhEMRj2hAXjZxCsp8vAcl5J/34NuK4av1OsTpjPte+GQa5jqNG/ErvuUjDhVbmY6bqQ6cgFU6ZLRUyzEdRnbFIeKANroB1vloAiH31VAlEsAbVsd6T0/bZw8tQoJ1Qhvy8m99ysPZxs2d8mVujnZWB5XmO/D7kEREONyEcPyMkTTsEuFX+ERir2boRdZSGDUrVCPqAPZYMFCNbX84Yluy+qe7MMrD70XdasxlCDAtVrJv4vWP+sgadkDIsElzI9uN0gIdfYPNGlXOnFmMsljdFeLNAHmxorE/v33bv7oqalaK4/rWhL2k8DeThFEcaf1ZKJ0+HY4wegXOS5YAuI31zx5OJI8cib9L5UImpojgdS2QHfS0DFrFA4GKxrrEjs3/9fuy8e9DktdbFaQgz4AeUCvD2g5nOuO6VrJv0fDItL4E4JogjVsOUScm7BYMfEB93FC+b/oIuFTEiAcMYx+wsGahvDyVjnq4nmfReDUn1RH6pGKlayPBQW4hUYO0qamV0z8WpYMV0KhUH0tY4Q+ZfSG/AZnBUmTuDTiFsVNcFgbWPIjna8YLfun1H38uvHgVLdnvJN5rbdF9OJQrxbn5RJf1Yw1IDqzZVPfhEbiP5aN1BLUkG9F0MNBQt+UiBxj71rhdCaHno07QoLt1YIgGA7M9BbGC1zM5Bk+4GnwUIt3XNxw69cKixnPmyHNk121Yvcji9TrMIiEEtA6HAqDV4z8U5I6T+hzmyD3GW9Hx5vCDIGAzZzrIn5/eFwhxITVlVdKFBVF7Q7W59IdLSev/viprF7vt74S4JqEtsFlKWDijUpU6z8vo+eS0sZamyBlN7aBEONejXUsGCoYQDjvVvT8GNAZGaEXoqVUvTLH8VS/snCnmvVDQFa/tjR1sdsO3AdwHS/Wz0LgAptnTmJZkGZaq7ZysDyvsxCHxtwLdoxCiPMn2AgewQc2mb2eJMJWAQV0xHzlXZpkA4YWCiNQ5kdCtQ0WuCf4NmscwOmsd/f8/VBD2u3gDKduUmCmahTpm4rAytTrxQyLWW/uGUoKNejMNQ4CTr13cFF8GggenDgpVY89wLr6BHgsQ7DOjidTff5dbI0DnlhAEqSHdjNNh5fiw3Llu75+pC/IB0q2aqoAHcE3XkovZblp881yVJW+VKuPWDcKV36QqU0qJT+dPiN6AIXX7cGHPA4G7COGiF1AFaffDfQsw55KMsCoBok2bqfT7sTz7l+zzcGbdNHc+uVZzZh8jGZwOtzKAOrz12Wpxu8LgkWbr0XUvopEKimGWp4gEUJmAGZl2L1DVgsAYAKhAO19ZJs3o9j+Zkkg8v3XFL/rLaM9frwmbZulj6AppaBNYDOG/CtpApcAmJYuPUnMNS4SNr2gmO2HP/0TDdgMjEBRmDxkjLvOVEs3pWA92hQqDpJtuxrR7k/hl/AFS9f3PQirolAZCBvI9XURxP7/1MGVv/7Lj93upJqLWzh1qWQ0s/pcqdECT6umKGQxwAV05R5j9L8C8A6vMehUAFlBcNhq7oGgNp/wLKTt8bDVatevbDmNT6TIoOtg15MpvyFMTEPoQysPHTigIugTzG5Gowy9OoXPPEdMPTXwykwAUVqxi2KFUwKMgUWKRYYpWhchn/wGGCxAU5BkLWLeQegrATW8cJWVTUB9Q6YqlsqrI4f/P3iEW+zvpNus8Nb3wAVM6sEA25E9wLKwOreHyU8gycf405pwdavwZ3S7ZIAP5+EOyUbUvoUuFxQxeLY76FSjjj+WC+giK6kFa4IWxVVYMr3vQ5ErgzG965+ceZxyqErhXpjUsEAZTqwDCzTE36JzYxx/tZzYFS2DkpzdMHZiRcF7866L5DjFhJE7IhRx8CNfi135COg7EBFdQig4izvJSwdLU80t/7k1SuOamfTCk2h0ruvDKz0HvHDuRGkLtx2OpistXZlw1C7+T2w3xBWwV9yuKpKhh0xApuIYJ+gZDJgVdUGaMQAQD0HfN2w59Wmnxu5kwOoxaBQEfJbRQtlYBWtq/v4IJdyjbx9b1Pzu3uvxXB4QbCmqT4MnqmiBgYL4Mq4aZ7diQleLPokhKM37P5G453mKTrkzcCyi6OuY5KLFpeBVbSu7seDPLKuCffZw5rfjU6OJ2LjIQyFm2S7E2B7MRBI/OmlbwzdbEpXQPWyjmfyFjL+/4JPu45FLkyEAAAAAElFTkSuQmCC\');\n\t\t\tbackground-size: 24px;\n\t\t\tbackground-repeat: no-repeat;\n\t\t\tbackground-position: left center;\n\t\t\tpadding-left: 36px;\n\t\t\tfont-size: 20px;\n\t\t\tletter-spacing: -0.04rem;\n\t\t\tfont-weight: 400;\n\t\t\tcolor: white;\n\t\t\ttext-decoration: none;\n\t\t}\n\n\t\t.message-container {\n\t\t\tflex-grow: 1;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tmargin: 0 30px;\n\t\t}\n\n\t\t.message {\n\t\t\tfont-weight: 300;\n\t\t\tfont-size: 1.4rem;\n\t\t}\n\n\t\tbody.error .message {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\tbody.error .error-message {\n\t\t\tdisplay: block;\n\t\t}\n\n\t\t.error-message {\n\t\t\tdisplay: none;\n\t\t\tmax-width: 800px;\n\t\t\tfont-weight: 300;\n\t\t\tfont-size: 1.3rem;\n\t\t}\n\n\t\t.error-text {\n\t\t\tcolor: salmon;\n\t\t\tfont-size: 1rem;\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Light"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.woff2") format("woff2"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.svg#web") format("svg");\n\t\t\tfont-weight: 200\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Semilight"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.woff2") format("woff2"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.svg#web") format("svg");\n\t\t\tfont-weight: 300\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.svg#web") format("svg");\n\t\t\tfont-weight: 400\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Semibold"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.svg#web") format("svg");\n\t\t\tfont-weight: 600\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Bold"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.svg#web") format("svg");\n\t\t\tfont-weight: 700\n\t\t}\n\t</style>\n</head>\n\n<body>\n\t<a class="branding" href="https://code.visualstudio.com/">\n\t\tVisual Studio Code\n\t</a>\n\t<div class="message-container">\n\t\t<div class="message">\n\t\t\tYou are signed in now and can close this page.\n\t\t</div>\n\t\t<div class="error-message">\n\t\t\tAn error occurred while signing in:\n\t\t\t<div class="error-text"></div>\n\t\t</div>\n\t</div>\n\t<script>\n\t\tvar search = new URLSearchParams(window.location.search);\n\t\tvar error = search.get(\'error\');\n\t\tif (error) {\n\t\t\tconst description = search.get(\'error_description\');\n\t\t\tdocument.querySelector(\'.error-text\')\n\t\t\t\t.textContent = error + \' - \' + description;\n\t\t\tdocument.querySelector(\'body\')\n\t\t\t\t.classList.add(\'error\');\n\t\t}\n\t<\/script>\n</body>\n\n</html>\n'},8587:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},8596:(e,t,r)=>{"use strict";r.d(t,{o:()=>p});var n=r(659),i=r(3673);function o(e){var t="ai."+e+".";return function(e){return t+e}}var a=o("application"),s=o("device"),c=o("location"),u=o("operation"),l=o("session"),d=o("user"),h=o("cloud"),f=o("internal"),p=function(e){function t(){return e.call(this)||this}return(0,n.qU)(t,e),t}((0,i.SZ)({applicationVersion:a("ver"),applicationBuild:a("build"),applicationTypeId:a("typeId"),applicationId:a("applicationId"),applicationLayer:a("layer"),deviceId:s("id"),deviceIp:s("ip"),deviceLanguage:s("language"),deviceLocale:s("locale"),deviceModel:s("model"),deviceFriendlyName:s("friendlyName"),deviceNetwork:s("network"),deviceNetworkName:s("networkName"),deviceOEMName:s("oemName"),deviceOS:s("os"),deviceOSVersion:s("osVersion"),deviceRoleInstance:s("roleInstance"),deviceRoleName:s("roleName"),deviceScreenResolution:s("screenResolution"),deviceType:s("type"),deviceMachineName:s("machineName"),deviceVMName:s("vmName"),deviceBrowser:s("browser"),deviceBrowserVersion:s("browserVersion"),locationIp:c("ip"),locationCountry:c("country"),locationProvince:c("province"),locationCity:c("city"),operationId:u("id"),operationName:u("name"),operationParentId:u("parentId"),operationRootId:u("rootId"),operationSyntheticSource:u("syntheticSource"),operationCorrelationVector:u("correlationVector"),sessionId:l("id"),sessionIsFirst:l("isFirst"),sessionIsNew:l("isNew"),userAccountAcquisitionDate:d("accountAcquisitionDate"),userAccountId:d("accountId"),userAgent:d("userAgent"),userId:d("id"),userStoreRegion:d("storeRegion"),userAuthUserId:d("authUserId"),userAnonymousUserAcquisitionDate:d("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:d("authUserAcquisitionDate"),cloudName:h("name"),cloudRole:h("role"),cloudRoleVer:h("roleVer"),cloudRoleInstance:h("roleInstance"),cloudEnvironment:h("environment"),cloudLocation:h("location"),cloudDeploymentUnit:h("deploymentUnit"),internalNodeName:f("nodeName"),internalSdkVersion:f("sdkVersion"),internalAgentVersion:f("agentVersion"),internalSnippet:f("snippet"),internalSdkSrc:f("sdkSrc")}))},8610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(9614)),i=o(r(2298));function o(e){return e&&e.__esModule?e:{default:e}}let a,s,c=0,u=0;t.default=function(e,t,r){let o=t&&r||0;const l=t||new Array(16);let d=(e=e||{}).node||a,h=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==h){const t=e.random||(e.rng||n.default)();null==d&&(d=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=s=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:u+1;const g=f-c+(p-u)/1e4;if(g<0&&void 0===e.clockseq&&(h=h+1&16383),(g<0||f>c)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,u=p,s=h,f+=122192928e5;const m=(1e4*(268435455&f)+p)%4294967296;l[o++]=m>>>24&255,l[o++]=m>>>16&255,l[o++]=m>>>8&255,l[o++]=255&m;const v=f/4294967296*1e4&268435455;l[o++]=v>>>8&255,l[o++]=255&v,l[o++]=v>>>24&15|16,l[o++]=v>>>16&255,l[o++]=h>>>8|128,l[o++]=255&h;for(let e=0;e<6;++e)l[o+e]=d[e];return t||(0,i.default)(l)}},8789:(e,t,r)=>{var n=r(1045),i=r(2861).Buffer,o=r(6982),a=r(2010),s=r(9023),c="secret must be a string or buffer",u="key must be a string or a buffer",l="function"==typeof o.createPublicKey;function d(e){if(!i.isBuffer(e)&&"string"!=typeof e){if(!l)throw g(u);if("object"!=typeof e)throw g(u);if("string"!=typeof e.type)throw g(u);if("string"!=typeof e.asymmetricKeyType)throw g(u);if("function"!=typeof e.export)throw g(u)}}function h(e){if(!i.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw g("key must be a string, a buffer or an object")}function f(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function p(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function g(e){var t=[].slice.call(arguments,1),r=s.format.bind(s,e).apply(null,t);return new TypeError(r)}function m(e){var t;return t=e,i.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function v(e){return function(t,r){!function(e){if(!i.isBuffer(e)){if("string"==typeof e)return e;if(!l)throw g(c);if("object"!=typeof e)throw g(c);if("secret"!==e.type)throw g(c);if("function"!=typeof e.export)throw g(c)}}(r),t=m(t);var n=o.createHmac("sha"+e,r);return f((n.update(t),n.digest("base64")))}}function y(e){return function(t,r,o){var a=v(e)(t,o);return n(i.from(r),i.from(a))}}function w(e){return function(t,r){h(r),t=m(t);var n=o.createSign("RSA-SHA"+e);return f((n.update(t),n.sign(r,"base64")))}}function I(e){return function(t,r,n){d(n),t=m(t),r=p(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify(n,r,"base64")}}function A(e){return function(t,r){h(r),t=m(t);var n=o.createSign("RSA-SHA"+e);return f((n.update(t),n.sign({key:r,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function C(e){return function(t,r,n){d(n),t=m(t),r=p(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:n,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function S(e){var t=w(e);return function(){var r=t.apply(null,arguments);return a.derToJose(r,"ES"+e)}}function E(e){var t=I(e);return function(r,n,i){return n=a.joseToDer(n,"ES"+e).toString("base64"),t(r,n,i)}}function b(){return function(){return""}}function T(){return function(e,t){return""===t}}l&&(u+=" or a KeyObject",c+="or a KeyObject"),e.exports=function(e){var t={hs:v,rs:w,ps:A,es:S,none:b},r={hs:y,rs:I,ps:C,es:E,none:T},n=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw g('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var i=(n[1]||n[3]).toLowerCase(),o=n[2];return{sign:t[i](o),verify:r[i](o)}}},8794:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},8911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScopedAccountAccess=void 0;const n=r(1398);class i{_accountAccessSecretStorage;_onDidAccountAccessChangeEmitter=new n.EventEmitter;onDidAccountAccessChange=this._onDidAccountAccessChangeEmitter.event;value=new Array;_disposable;constructor(e,t=[]){this._accountAccessSecretStorage=e,this._disposable=n.Disposable.from(...t,this._onDidAccountAccessChangeEmitter,this._accountAccessSecretStorage.onDidChange(()=>this.update()))}static async create(e,t,r,n){const a=await o.create(e,t,r,n),s=new i(a,[a]);return await s.initialize(),s}dispose(){this._disposable.dispose()}async initialize(){await this.update()}isAllowedAccess(e){return this.value.includes(e.homeAccountId)}async setAllowedAccess(e,t){if(t){if(this.value.includes(e.homeAccountId))return;await this._accountAccessSecretStorage.store([...this.value,e.homeAccountId])}else await this._accountAccessSecretStorage.store(this.value.filter(t=>t!==e.homeAccountId))}async update(){const e=new Set(this.value),t=await this._accountAccessSecretStorage.get();this.value=t??[],e.size===this.value.length&&this.value.every(t=>e.has(t))||this._onDidAccountAccessChangeEmitter.fire()}}t.ScopedAccountAccess=i;class o{_secretStorage;_cloudName;_logger;_migrations;_disposable;_onDidChangeEmitter=new n.EventEmitter;onDidChange=this._onDidChangeEmitter.event;_key;constructor(e,t,r,i){this._secretStorage=e,this._cloudName=t,this._logger=r,this._migrations=i,this._key=`accounts-${this._cloudName}`,this._disposable=n.Disposable.from(this._onDidChangeEmitter,this._secretStorage.onDidChange(e=>{e.key===this._key&&this._onDidChangeEmitter.fire()}))}static async create(e,t,r,n){const i=new o(e,t,r,n);return await i.initialize(),i}async initialize(){if(this._migrations&&!await this.get())try{const e=new Set;for(const{clientId:t,authority:r}of this._migrations){const n=`accounts-${this._cloudName}-${t}-${r}`,i=await this._secretStorage.get(n);i&&JSON.parse(i).forEach(t=>e.add(t))}e.size>0&&await this.store(Array.from(e))}catch(e){this._logger.error(`Failed to migrate account access secret storage: ${e}`)}}async get(){const e=await this._secretStorage.get(this._key);if(e)return JSON.parse(e)}store(e){return this._secretStorage.store(this._key,JSON.stringify(e))}delete(){return this._secretStorage.delete(this._key)}dispose(){this._disposable.dispose()}}},8916:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BE_PROFILE:()=>o,NRT_PROFILE:()=>i,PostChannel:()=>At,RT_PROFILE:()=>n});var n="REAL_TIME",i="NEAR_REAL_TIME",o="BEST_EFFORT",a=r(659),s=r(8279),c=r(4822),u=r(269),l=r(8156),d=r(6149),h=r(4276),f=r(9749),p=r(2317),g=r(3673),m=r(3662),v=r(3775),y=r(8257),w=r(8205),I="",A="drop",C="requeue",S="no-cache, no-store",E="application/x-json-stream",b="cache-control",T="content-type",_="client-version",k="client-id",P="time-delta-to-apply-millis",R="upload-time",O="apikey",M="AuthMsaDeviceTicket",N="WebAuthToken",D="AuthXToken",x="msfpc",L="trace",U="user",q="allowRequestSending",F="firstRequestSent",H="shouldAddClockSkewHeaders",B="getClockSkewHeaderValue",z="setClockSkew",j="length",$="concat",V="iKey",K="count",G="events",W="push",X="split",Y="splice",Q="toLowerCase",J="hdrs",Z="useHdrs",ee="initialize",te="setTimeoutOverride",re="clearTimeoutOverride",ne="overrideEndpointUrl",ie="avoidOptions",oe="enableCompoundKey",ae="disableXhrSync",se="disableFetchKeepAlive",ce="useSendBeacon",ue="fetchCredentials",le="alwaysUseXhrOverride",de="serializeOfflineEvt",he="getOfflineRequestDetails",fe="createPayload",pe="createOneDSPayload",ge="payloadBlob",me="headers",ve="_thePayload",ye="urlString",we="batches",Ie="sendType",Ae="addHeader",Ce="canSendRequest",Se="sendQueuedRequests",Ee="isCompletelyIdle",be="setUnloading",Te="resume",_e="sendSynchronousBatch",ke="_transport",Pe="getWParam",Re="isBeacon",Oe="timings",Me="isTeardown",Ne="isSync",De="data",xe="_sendReason",Le="setKillSwitchTenants",Ue="_backOffTransmission",qe="identifier",Fe="eventsLimitInMem",He="autoFlushEventsLimit",Be="baseData",ze="sendAttempt",je="latency",$e="sync";function Ve(e){var t=(e.ext||{}).intweb;return t&&(0,c.yD)(t[x])?t[x]:null}function Ke(e){for(var t=null,r=0;null===t&&r<e[j];r++)t=Ve(e[r]);return t}var Ge=function(){function e(t,r){var n=r?[][$](r):[],i=this,o=Ke(n);i[V]=function(){return t},i.Msfpc=function(){return o||I},i[K]=function(){return n[j]},i[G]=function(){return n},i.addEvent=function(e){return!!e&&(n[W](e),o||(o=Ve(e)),!0)},i[X]=function(r,i){var a;if(r<n[j]){var s=n[j]-r;(0,u.hXl)(i)||(s=i<s?i:s),a=n[Y](r,s),o=Ke(n)}return new e(t,a)}}return e.create=function(t,r){return new e(t,r)},e}(),We=r(7292),Xe=r(856),Ye=r(5664),Qe=function(){function e(){var t=!0,r=!0,n=!0,i="use-collector-delta",o=!1;(0,s.A)(e,this,function(e){e[q]=function(){return t},e[F]=function(){n&&(n=!1,o||(t=!1))},e[H]=function(){return r},e[B]=function(){return i},e[z]=function(e){o||(e?(i=e,r=!0,o=!0):r=!1,t=!0)}})}return e.__ieDyn=1,e}(),Je=function(){function e(){var t={};(0,s.A)(e,this,function(e){e[Le]=function(e,r){if(e&&r)try{var n=(a=e[X](","),s=[],a&&(0,u.Iuo)(a,function(e){s[W]((0,u.EHq)(e))}),s);if("this-request-only"===r)return n;for(var i=1e3*parseInt(r,10),o=0;o<n[j];++o)t[n[o]]=(0,u.f0d)()+i}catch(e){return[]}var a,s;return[]},e.isTenantKilled=function(e){var r=t,n=(0,u.EHq)(e);return void 0!==r[n]&&r[n]>(0,u.f0d)()||(delete r[n],!1)}})}return e.__ieDyn=1,e}();function Ze(e){var t,r=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*r,Math.min(t,6e5)}var et,tt=2e6,rt=Math.min(tt,65e3),nt="metadata",it="f",ot=/\./,at=function(){function e(t,r,n,i,o,a){var d="data",h="baseData",f=!!i,p=!0,g=r,m={},v=!!a,y=o||c.Go;(0,s.A)(e,this,function(e){function r(e,t,i,o,a,s,l){(0,u.zav)(e,function(e,d){var h=null;if(d||(0,c.yD)(d)){var p=i,v=e,y=a,w=t;if(f&&!o&&ot.test(e)){var I=e.split("."),A=I.length;if(A>1){y&&(y=y.slice());for(var C=0;C<A-1;C++){var S=I[C];w=w[S]=w[S]||{},p+="."+S,y&&y.push(S)}v=I[A-1]}}var E=o&&function(e){var t=m[e];return void 0===t&&(e.length>=7&&(t=(0,u.tGl)(e,"ext.metadata")||(0,u.tGl)(e,"ext.web")),m[e]=t),t}(p);if(h=!E&&g&&g.handleField(p,v)?g.value(p,v,d,n):(0,c.TC)(v,d,n)){var b=h.value;if(w[v]=b,s&&s(y,v,h),l&&"object"==typeof b&&!(0,u.cyL)(b)){var T=y;T&&(T=T.slice()).push(v),r(d,b,p+"."+v,o,T,s,l)}}}})}e.createPayload=function(e,t,r,n,i,o){return{apiKeys:[],payloadBlob:I,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:r,isBeacon:n,sendType:o,sendReason:i}},e.appendPayload=function(r,n,i){var o=r&&n&&!r.overflow;return o&&(0,l.r2)(t,function(){return"Serializer:appendPayload"},function(){for(var t=n.events(),o=r.payloadBlob,a=r.numEvents,s=!1,c=[],l=[],d=r.isBeacon,h=d?65e3:3984588,f=d?rt:tt,p=0,g=0;p<t.length;){var m=t[p];if(m){if(a>=i){r.overflow=n.split(p);break}var v=e.getEventBlob(m);if(v&&v.length<=f){var y=v.length;if(o.length+y>h){r.overflow=n.split(p);break}o&&(o+="\n"),o+=v,++g>20&&((0,u.hKY)(o,0,1),g=0),s=!0,a++}else v?c.push(m):l.push(m),t.splice(p,1),p--}p++}if(c.length>0&&r.sizeExceed.push(Ge.create(n.iKey(),c)),l.length>0&&r.failedEvts.push(Ge.create(n.iKey(),l)),s){r.batches.push(n),r.payloadBlob=o,r.numEvents=a;var w=n.iKey();-1===(0,u.rDm)(r.apiKeys,w)&&r.apiKeys.push(w)}},function(){return{payload:r,theBatch:{iKey:n.iKey(),evts:n.events()},max:i}}),o},e.getEventBlob=function(e){try{return(0,l.r2)(t,function(){return"Serializer.getEventBlob"},function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+(0,c.EO)(e.iKey);var n,i={};v||(n=function(e,t,r){!function(e,t,r,n,i){if(i&&t){var o=e(i.value,i.kind,i.propertyType);if(o>-1){var a=t[nt];a||(a=t[nt]={f:{}});var s=a[it];if(s||(s=a[it]={}),r)for(var c=0;c<r.length;c++){var l=r[c];s[l]||(s[l]={f:{}});var d=s[l][it];d||(d=s[l][it]={}),s=d}s=s[n]={},(0,u.cyL)(i.value)?s.a={t:o}:s.t=o}}}(y,i,e,t,r)});var o=e.ext;o&&(t.ext=i,(0,u.zav)(o,function(e,t){r(t,i[e]={},"ext."+e,!0,null,null,!0)}));var a=t[d]={};a.baseType=e.baseType;var s=a[h]={};return r(e.baseData,s,h,!1,[h],n,p),r(e.data,a,d,!1,[],n,p),JSON.stringify(t)},function(){return{item:e}})}catch(e){return null}}})}return e.__ieDyn=1,e}();function st(e,t){return{set:function(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return(0,u.vKV)([e,t],r,n,i)}}}var ct="sendAttempt",ut="?cors=true&"+T[Q]()+"="+E,lt=((et={})[1]=C,et[100]=C,et[200]="sent",et[8004]=A,et[8003]=A,et),dt={},ht={};function ft(e,t,r){dt[e]=t,!1!==r&&(ht[t]=e)}function pt(e,t){var r=!1;if(e&&t){var n=(0,u.cGk)(e);if(n&&n[j]>0)for(var i=t[Q](),o=0;o<n[j];o++){var a=n[o];if(a&&(0,u.v0u)(t,a)&&a[Q]()===i){r=!0;break}}}return r}function gt(e,t,r,n){t&&r&&r[j]>0&&(n&&dt[t]?(e[J][dt[t]]=r,e[Z]=!0):e.url+="&"+t+"="+r)}ft(M,M,!1),ft(_,_),ft(k,"Client-Id"),ft(O,O),ft(P,P),ft(R,R),ft(D,D);var mt=function(){function e(t,r,n,i){var o,a,d,h,p,m,y,w,C,M,N,D,L,U,Q,qe,Fe,He,Be,ze,je,$e,Ve,Ke,et,tt,rt,nt,it,ot,dt,ft,mt=!1;(0,s.A)(e,this,function(e){function s(e,t){try{return dt&&dt.getSenderInst(e,t)}catch(e){}return null}function vt(){try{return{enableSendPromise:!1,isOneDs:!0,disableCredentials:!1,fetchCredentials:ft,disableXhr:!1,disableBeacon:!mt,disableBeaconSync:!mt,disableFetchKeepAlive:je,timeWrapper:it,addNoResponse:Ve,senderOnCompleteCallBack:{xdrOnComplete:yt,fetchOnComplete:wt,xhrOnComplete:It,beaconOnRetry:Ct}}}catch(e){}return null}function yt(e,t,r){var n=(0,g.Lo)(e);At(t,200,{},n),Dt(n)}function wt(e,t,r,n){var i={},o=e[me];o&&o.forEach(function(e,t){i[t]=e}),function(e,r,n){At(t,e,r,n),Dt(n)}(e.status,i,r||I)}function It(e,t,r){var n=(0,g.Lo)(e);At(t,e.status,(0,g.w3)(e,!0),n),Dt(n)}function At(e,t,r,n){try{e(t,r,n)}catch(e){(0,v.ZP)(y,2,518,(0,u.mmD)(e))}}function Ct(e,t,r){var n=200,i=e[ve],o=e[ye]+(Ve?"&NoResponseBody=true":I);try{var a=(0,u.w3n)();if(i){var s=!!C.getPlugin("LocalStorage"),c=[],l=[];(0,u.Iuo)(i[we],function(e){if(c&&e&&e[K]()>0)for(var t=e[G](),r=0;r<t[j];r++){if(!a.sendBeacon(o,U.getEventBlob(t[r]))){c[W](e[X](r));break}l[W](e[r])}else c[W](e[X](0))}),l[j]>0&&(i.sentEvts=l),s||xt(c,8003,i[Ie],!0)}else n=0}catch(e){(0,v.OG)(y,"Failed to send telemetry using sendBeacon API. Ex:"+(0,u.mmD)(e)),n=0}finally{At(t,n,{},I)}}function St(e){return 2===e||3===e}function Et(e){return Fe&&St(e)&&(e=2),e}function bt(){return!d&&p<r}function Tt(){var e=L;return L=[],e}function _t(e,t,r){var n=!1;return e&&e[j]>0&&!d&&w[t]&&U&&(n=0!==t||bt()&&(r>0||h[q]())),n}function kt(e){var t={};return e&&(0,u.Iuo)(e,function(e,r){t[r]={iKey:e[V](),evts:e[G]()}}),t}function Pt(e,r,n,i,o){if(e&&0!==e[j])if(d)xt(e,1,i);else{i=Et(i);try{var s=e,h=0!==i;(0,l.r2)(C,function(){return"HttpManager:_sendBatches"},function(s){s&&(e=e.slice(0));for(var u=[],l=null,d=(0,c.WB)(),f=w[i]||(h?w[1]:w[0]),p=f&&f[ke],g=$e&&(Fe||St(i)||3===p||f._isSync&&2===p);_t(e,i,r);){var m=e.shift();m&&m[K]()>0&&(a.isTenantKilled(m[V]())?u[W](m):(l=l||U[fe](r,n,h,g,o,i),U.appendPayload(l,m,t)?null!==l.overflow&&(e=[l.overflow][$](e),l.overflow=null,Mt(l,d,(0,c.WB)(),o),d=(0,c.WB)(),l=null):(Mt(l,d,(0,c.WB)(),o),d=(0,c.WB)(),e=[m][$](e),l=null)))}l&&Mt(l,d,(0,c.WB)(),o),e[j]>0&&(L=e[$](L)),xt(u,8004,i)},function(){return{batches:kt(s),retryCount:r,isTeardown:n,isSynchronous:h,sendReason:o,useSendBeacon:St(i),sendType:i}},!h)}catch(e){(0,v.ZP)(y,2,48,"Unexpected Exception sending batch: "+(0,u.mmD)(e))}}}function Rt(e,t){var r={url:o,hdrs:{},useHdrs:!1};t?(r[J]=(0,c.X$)(r[J],D),r.useHdrs=(0,u.cGk)(r.hdrs)[j]>0):(0,u.zav)(D,function(e,t){ht[e]?gt(r,ht[e],t,!1):(r[J][e]=t,r[Z]=!0)}),gt(r,k,"NO_AUTH",t),gt(r,_,c.xE,t);var n=I;(0,u.Iuo)(e.apiKeys,function(e){n[j]>0&&(n+=","),n+=e}),gt(r,O,n,t),gt(r,R,(0,u.f0d)().toString(),t);var i=function(e){for(var t=0;t<e.batches[j];t++){var r=e[we][t].Msfpc();if(r)return encodeURIComponent(r)}return I}(e);if((0,c.yD)(i)&&(r.url+="&ext.intweb.msfpc="+i),h[H]()&&gt(r,P,h[B](),t),C[Pe]){var a=C[Pe]();a>=0&&(r.url+="&w="+a)}for(var s=0;s<N[j];s++)r.url+="&"+N[s].name+"="+N[s].value;return r}function Ot(e,t,r){e[t]=e[t]||{},e[t][m.identifier]=r}function Mt(t,r,i,o){if(t&&t.payloadBlob&&t.payloadBlob[j]>0){var s=!!et,d=w[t.sendType];!St(t[Ie])&&t[Re]&&2===t.sendReason&&(d=w[2]||w[3]||d);var f=He;(t.isBeacon||3===d[ke])&&(f=!1);var g=Rt(t,f);f=f||g[Z];var I=(0,c.WB)();(0,l.r2)(C,function(){return"HttpManager:_doPayloadSend"},function(){for(var w=0;w<t.batches[j];w++)for(var A=t[we][w][G](),_=0;_<A[j];_++){var k=A[_];if(Q){var P=k[Oe]=k[Oe]||{};Ot(P,"sendEventStart",I),Ot(P,"serializationStart",r),Ot(P,"serializationCompleted",i)}k[ct]>0?k[ct]++:k[ct]=1}xt(t[we],1e3+(o||0),t[Ie],!0);var R={data:t[ge],urlString:g.url,headers:g[J],_thePayload:t,_sendReason:o,timeout:Be,disableXhrSync:ze,disableFetchKeepAlive:je};f&&(pt(R[me],b)||(R[me][b]=S),pt(R[me],T)||(R[me][T]=E));var O=null;d&&(O=function(r){h[F]();var i=function(r,i){!function(t,r,i,o){var s,l=9e3,d=null,f=!1,g=!1;try{var v=!0;if(typeof t!==Ye.bA){if(r){h[z](r["time-delta-millis"]);var y=r["kill-duration"]||r["kill-duration-seconds"];(0,u.Iuo)(a[Le](r["kill-tokens"],y),function(e){(0,u.Iuo)(i[we],function(t){if(t[V]()===e){d=d||[];var r=t[X](0);i.numEvents-=r[K](),d[W](r)}})})}if(200==t||204==t)return void(l=200);((s=t)>=300&&s<500&&429!=s||501==s||505==s||i.numEvents<=0)&&(v=!1),l=9e3+t%1e3}if(v){l=100;var w=i.retryCnt;0===i[Ie]&&(w<n?(f=!0,Nt(function(){0===i[Ie]&&p--,Pt(i[we],w+1,i[Me],Fe?2:i[Ie],5)},Fe,Ze(w))):(g=!0,Fe&&(l=8001)))}}finally{f||(h[z](),function(t,r,n,i){try{i&&m[Ue]();var o=t[we];200===r&&(o=t.sentEvts||t[we],i||t[Ne]||m._clearBackOff(),function(e){if(Q){var t=(0,c.WB)();(0,u.Iuo)(e,function(e){e&&e[K]()>0&&function(e,t){Q&&(0,u.Iuo)(e,function(e){Ot(e[Oe]=e[Oe]||{},"sendEventCompleted",t)})}(e[G](),t)})}}(o)),xt(o,r,t[Ie],!0)}finally{0===t[Ie]&&(p--,5!==n&&e.sendQueuedRequests(t[Ie],n))}}(i,l,o,g)),xt(d,8004,i[Ie])}}(r,i,t,o)},s=t[Me]||t[Ne];try{d.sendPOST(r,i,s),tt&&tt(R,r,s,t[Re])}catch(e){(0,v.OG)(y,"Unexpected exception sending payload. Ex:"+(0,u.mmD)(e)),At(i,0,{})}}),(0,l.r2)(C,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(O)if(0===t[Ie]&&p++,s&&!t.isBeacon&&3!==d[ke]){var e={data:R[De],urlString:R[ye],headers:(0,c.X$)({},R[me]),timeout:R.timeout,disableXhrSync:R[ae],disableFetchKeepAlive:R[se]},r=!1;(0,l.r2)(C,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{et(e,function(e){r=!0,M||e[ve]||(e[ve]=e[ve]||R[ve],e[xe]=e[xe]||R[xe]),O(e)},t.isSync||t[Me])}catch(e){r||O(R)}})}else O(R)})},function(){return{thePayload:t,serializationStart:r,serializationCompleted:i,sendReason:o}},t[Ne])}t.sizeExceed&&t.sizeExceed[j]>0&&xt(t.sizeExceed,8003,t[Ie]),t.failedEvts&&t.failedEvts[j]>0&&xt(t.failedEvts,8002,t[Ie])}function Nt(e,t,r){t?e():it.set(e,r)}function Dt(e){var t=rt;try{for(var r=0;r<t[j];r++)try{t[r](e)}catch(e){(0,v.ZP)(y,1,519,"Response handler failed: "+e)}if(e){var n=JSON.parse(e);(0,c.yD)(n.webResult)&&(0,c.yD)(n.webResult[x])&&qe.set("MSFPC",n.webResult[x],31536e3)}}catch(e){}}function xt(e,t,r,n){if(e&&e[j]>0&&i){var o=i[(s=t,u=lt[s],(0,c.yD)(u)||(u="oth",s>=9e3&&s<=9999?u="rspFail":s>=8e3&&s<=8999?u=A:s>=1e3&&s<=1999&&(u="send")),u)];if(o){var a=0!==r;(0,l.r2)(C,function(){return"HttpManager:_sendBatchesNotification"},function(){Nt(function(){try{o.call(i,e,t,a,r)}catch(e){(0,v.ZP)(y,1,74,"send request notification failed: "+e)}},n||a,0)},function(){return{batches:kt(e),reason:t,isSync:a,sendSync:n,sendType:r}},!a)}}var s,u}!function(){var e;o=null,a=new Je,d=!1,h=new Qe,mt=!1,p=0,m=null,y=null,w=null,C=null,M=!0,N=[],D={},L=[],U=null,Q=!1,qe=null,Fe=!1,He=!1,Be=e,ze=e,je=e,$e=e,Ve=e,Ke=[],et=e,tt=e,rt=[],nt=!1,it=st(),ot=!1,dt=null}(),e[ee]=function(e,t,r){nt||(C=t,qe=t.getCookieMgr(),y=(m=r).diagLog(),(0,u.Yny)(Ke,(0,f.a)(e,function(e){var n,i=e.cfg,a=e.cfg.extensionConfig[r.identifier];it=st(a[te],a[re]),(0,c.yD)(i.anonCookieName)?function(e,t,r){for(var n=0;n<e[j];n++)if(e[n].name===t)return void(e[n].value=r);e[W]({name:t,value:r})}(N,"anoncknm",i.anonCookieName):function(e){for(var t=0;t<e[j];t++)if("anoncknm"===e[t].name)return void e[Y](t,1)}(N),et=a.payloadPreprocessor,tt=a.payloadListener;var l=a.httpXHROverride,d=a[ne]?a[ne]:i.endpointUrl;o=d+ut,He=!!(0,u.b07)(a[ie])||!a[ie],Q=!a.disableEventTimings;var h=a.valueSanitizer,f=a.stringifyObjects,p=!!i[oe];(0,u.b07)(a[oe])||(p=!!a[oe]),Be=a.xhrTimeout,ze=!!a[ae],je=!!a[se],Ve=!1!==a.addNoResponse,ot=!!a.excludeCsMetaData,t.getPlugin("LocalStorage")&&(je=!0),mt=!(0,We.lV)(),U=new at(C,h,f,p,c.Go,ot),(0,u.hXl)(a[ce])||(mt=!!a[ce]),a[ue]&&(ft=a[ue]);var m=vt();dt?dt.SetConfig(m):(dt=new Xe.v)[ee](m,y);var I=l,A=a[le]?l:null,S=a[le]?l:null,E=[3,2];if(!l){M=!1;var b=[];(0,We.lV)()?(b=[2,1],E=[2,1,3]):b=[1,2,3],(l=s(b=(0,g.jL)(b,a.transports),!1))||(0,v.OG)(y,"No available transport to send events"),I=s(b,!0)}A||(A=s(E=(0,g.jL)(E,a.unloadTransports),!0)),$e=!M&&(mt&&(0,We.Uf)()||!je&&(0,We.R7)(!0)),(n={})[0]=l,n[1]=I||s([1,2,3],!0),n[2]=A||I||s([1],!0),n[3]=S||s([2,3],!0)||I||s([1],!0),w=n})),nt=!0)},e.addResponseHandler=function(e){return rt[W](e),{rm:function(){var t=rt.indexOf(e);t>=0&&rt[Y](t,1)}}},e[de]=function(e){try{if(U)return U.getEventBlob(e)}catch(e){}return I},e[he]=function(){try{return Rt(U&&U[fe](0,!1,!1,!1,1,0),He)}catch(e){}return null},e[pe]=function(e,r){try{var n=[];(0,u.Iuo)(e,function(e){r&&(e=(0,g.hW)(e));var t=Ge.create(e[V],[e]);n[W](t)});for(var i=null;n[j]>0&&U;){var o=n.shift();o&&o[K]()>0&&(i=i||U[fe](0,!1,!1,!1,1,0),U.appendPayload(i,o,t))}var a=Rt(i,He),s={data:i[ge],urlString:a.url,headers:a[J],timeout:Be,disableXhrSync:ze,disableFetchKeepAlive:je};return He&&(pt(s[me],b)||(s[me][b]=S),pt(s[me],T)||(s[me][T]=E)),s}catch(e){}return null},e._getDbgPlgTargets=function(){return[w[0],a,U,w,vt(),o]},e[Ae]=function(e,t){D[e]=t},e.removeHeader=function(e){delete D[e]},e[Ce]=function(){return bt()&&h[q]()},e[Se]=function(e,t){(0,u.b07)(e)&&(e=0),Fe&&(e=Et(e),t=2),_t(L,e,0)&&Pt(Tt(),0,!1,e,t||0)},e[Ee]=function(){return!d&&0===p&&0===L[j]},e[be]=function(e){Fe=e},e.addBatch=function(e){if(e&&e[K]()>0){if(a.isTenantKilled(e[V]()))return!1;L[W](e)}return!0},e.teardown=function(){L[j]>0&&Pt(Tt(),0,!0,2,2),(0,u.Iuo)(Ke,function(e){e&&e.rm&&e.rm()}),Ke=[]},e.pause=function(){d=!0},e[Te]=function(){d=!1,e[Se](0,4)},e[_e]=function(e,t,r){e&&e[K]()>0&&((0,u.hXl)(t)&&(t=1),Fe&&(t=Et(t),r=2),Pt([e],0,!1,t,r||0))}})}return e.__ieDyn=1,e}(),vt=1e4,yt="eventsDiscarded",wt=void 0,It=(0,u.ZHX)({eventsLimitInMem:{isVal:c.ei,v:vt},immediateEventLimit:{isVal:c.ei,v:500},autoFlushEventsLimit:{isVal:c.ei,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:function(e){return e&&e.sendPOST},v:wt},overrideInstrumentationKey:wt,overrideEndpointUrl:wt,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:wt,clearTimeoutOverride:wt,payloadPreprocessor:wt,payloadListener:wt,disableEventTimings:wt,valueSanitizer:wt,stringifyObjects:wt,enableCompoundKey:wt,disableOptimizeObj:!1,fetchCredentials:wt,transports:wt,unloadTransports:wt,useSendBeacon:wt,disableFetchKeepAlive:wt,avoidOptions:!1,xhrTimeout:wt,disableXhrSync:wt,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:u.EtT,v:6},maxUnloadEventRetryAttempts:{isVal:u.EtT,v:2},addNoResponse:wt,excludeCsMetaData:wt}),At=function(e){function t(){var r,a=e.call(this)||this;a.identifier="PostChannel",a.priority=1011,a.version="4.3.4";var y,I,A,C,S,E,b,T,_,k,P,R,O,D,x,q,F,H,B,z,Q,J,Z,ne,ie,oe=!1,ae=[],se=!1,ce=0,ue=0,le={},fe=n;return(0,s.A)(t,a,function(e,t){function a(){(0,d.Ds)(null,H),(0,d.sq)(null,H),(0,d.vF)(null,H)}function s(e){var t="";return e&&e[j]&&(0,u.Iuo)(e,function(e){t&&(t+="\n"),t+=e}),t}function ge(e){var t="";try{ye(e),t=T[de](e)}catch(e){}return t}function me(e){"beforeunload"!==(e||(0,u.zkX)().event).type&&(x=!0,T[be](x)),Le(2,2)}function ve(e){x=!1,T[be](x)}function ye(e){e.ext&&e.ext[L]&&delete e.ext[L],e.ext&&e.ext[U]&&e.ext[U].id&&delete e.ext[U].id,D&&(e.ext=(0,g.hW)(e.ext),e[Be]&&(e[Be]=(0,g.hW)(e[Be])),e[De]&&(e[De]=(0,g.hW)(e[De])))}function Ie(e,t){if(e[ze]||(e[ze]=0),e[je]||(e[je]=1),ye(e),e[$e])if(E||se)e[je]=3,e[$e]=!1;else if(T)return D&&(e=(0,g.hW)(e)),void T[_e](Ge.create(e[V],[e]),!0===e[$e]?1:e[$e],3);var r=e[je],n=ue,i=A;4===r&&(n=ce,i=I);var o=!1;if(n<i)o=!We(e,t);else{var a=1,s=20;4===r&&(a=4,s=1),o=!0,function(e,t,r,n){for(;r<=t;){var i=Ve(e,t,!0);if(i&&i[K]()>0){var o=i[X](0,n),a=o[K]();if(a>0)return 4===r?ce-=a:ue-=a,it(yt,[o],m.x.QueueFull),!0}r++}return Xe(),!1}(e[V],e[je],a,s)&&(o=!We(e,t))}o&&nt(yt,[e],m.x.QueueFull)}function ke(e,t,r){var n=Ye(e,t,r);return T[Se](t,r),n}function Re(){return ue>0}function Oe(){if(R>=0&&Ye(R,0,O)&&T[Se](0,O),ce>0&&!S&&!se){var e=le[fe][2];e>=0&&(S=Ne(function(){S=null,ke(4,0,1),Oe()},e))}var t=le[fe][1];!C&&!y&&t>=0&&!se&&(Re()?C=Ne(function(){C=null,ke(0===b?3:1,0,1),b++,b%=2,Oe()},t):b=0)}function Me(){r=null,oe=!1,ae=[],y=null,se=!1,ce=0,I=500,ue=0,A=vt,le={},fe=n,C=null,S=null,E=0,b=0,_={},k=0,Z=!1,P=0,R=-1,O=null,D=!0,x=!1,q=6,F=2,H=null,ne=null,ie=!1,B=st(),T=new mt(500,2,1,{requeue:tt,send:ot,sent:at,drop:ct,rspFail:ut,oth:lt}),et(),_[4]={batches:[],iKeyMap:{}},_[3]={batches:[],iKeyMap:{}},_[2]={batches:[],iKeyMap:{}},_[1]={batches:[],iKeyMap:{}},dt()}function Ne(e,t){0===t&&E&&(t=1);var r=1e3;return E&&(r=Ze(E-1)),B.set(e,t*r)}function xe(){return null!==C&&(C.cancel(),C=null,b=0,!0)}function Le(e,t){xe(),y&&(y.cancel(),y=null),se||ke(1,e,t)}function Ve(e,t,r){var n=_[t];n||(n=_[t=1]);var i=n.iKeyMap[e];return!i&&r&&(i=Ge.create(e),n.batches[W](i),n.iKeyMap[e]=i),i}function Ke(t,r){T[Ce]()&&!E&&(k>0&&ue>k&&(r=!0),r&&null==y&&e.flush(t,function(){},20))}function We(e,t){D&&(e=(0,g.hW)(e));var r=e[je],n=Ve(e[V],r,!0);return!!n.addEvent(e)&&(4!==r?(ue++,t&&0===e[ze]&&Ke(!e.sync,P>0&&n[K]()>=P)):ce++,!0)}function Xe(){for(var e=0,t=0,r=function(r){var n=_[r];n&&n[we]&&(0,u.Iuo)(n[we],function(n){4===r?e+=n[K]():t+=n[K]()})},n=1;n<=4;n++)r(n);ue=t,ce=e}function Ye(t,r,n){var i=!1,o=0===r;return!o||T[Ce]()?(0,l.r2)(e.core,function(){return"PostChannel._queueBatches"},function(){for(var e=[],r=4;r>=t;){var n=_[r];n&&n.batches&&n.batches[j]>0&&((0,u.Iuo)(n[we],function(t){T.addBatch(t)?i=i||t&&t[K]()>0:e=e[$](t[G]()),4===r?ce-=t[K]():ue-=t[K]()}),n[we]=[],n.iKeyMap={}),r--}e[j]>0&&nt(yt,e,m.x.KillSwitch),i&&R>=t&&(R=-1,O=0)},function(){return{latency:t,sendType:r,sendReason:n}},!o):(R=R>=0?Math.min(R,t):t,O=Math.max(O,n)),i}function Qe(e,t){ke(1,0,t),Xe(),Je(function(){e&&e(),ae[j]>0?y=Ne(function(){y=null,Qe(ae.shift(),t)},0):(y=null,Oe())})}function Je(e){T[Ee]()?e():y=Ne(function(){y=null,Je(e)},.25)}function et(){(le={})[n]=[2,1,0],le[i]=[6,3,0],le[o]=[18,9,0]}function tt(t,r){var n=[],i=q;x&&(i=F),(0,u.Iuo)(t,function(t){t&&t[K]()>0&&(0,u.Iuo)(t[G](),function(t){t&&(t[$e]&&(t[je]=4,t[$e]=!1),t[ze]<i?((0,c.u9)(t,e[qe]),Ie(t,!1)):n[W](t))})}),n[j]>0&&nt(yt,n,m.x.NonRetryableStatus),x&&Le(2,2)}function rt(t,r){var n=J||{},i=n[t];if(i)try{i.apply(n,r)}catch(r){(0,v.ZP)(e.diagLog(),1,74,t+" notification failed: "+r)}}function nt(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t&&t[j]>0&&rt(e,[t][$](r))}function it(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];t&&t[j]>0&&(0,u.Iuo)(t,function(t){t&&t[K]()>0&&rt(e,[t.events()][$](r))})}function ot(e,t,r){e&&e[j]>0&&rt("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==r])}function at(e,t){it("eventsSent",e,t),Oe()}function ct(e,t){it(yt,e,t>=8e3&&t<=8999?t-8e3:m.x.Unknown)}function ut(e){it(yt,e,m.x.NonRetryableStatus),Oe()}function lt(e,t){it(yt,e,m.x.Unknown),Oe()}function dt(){P=Q?0:Math.max(1500,A/6)}Me(),e._getDbgPlgTargets=function(){return[T,r]},e[ee]=function(n,i,o){(0,l.r2)(i,function(){return"PostChannel:initialize"},function(){t[ee](n,i,o),J=i.getNotifyMgr();try{H=(0,d.Hm)((0,h.Z)(e[qe]),i.evtNamespace&&i.evtNamespace()),e._addHook((0,f.a)(n,function(t){var n=t.cfg,o=(0,p.i8)(null,n,i);r=o.getExtCfg(e[qe],It),B=st(r[te],r[re]),D=!r.disableOptimizeObj&&(0,c.F2)(),z=r.ignoreMc1Ms0CookieProcessing,function(e){var t=e[Pe];e[Pe]=function(){var r=0;return z&&(r|=2),r|t.call(e)}}(i),A=r[Fe],I=r.immediateEventLimit,k=r[He],q=r.maxEventRetryAttempts,F=r.maxUnloadEventRetryAttempts,Q=r.disableAutoBatchFlushLimit,(0,u.$XS)(n.endpointUrl)?e.pause():se&&e[Te](),dt(),ne=r.overrideInstrumentationKey,ie=!!r.disableTelemetry,Z&&a();var s=n.disablePageUnloadEvents||[];Z=(0,d.ee)(me,s,H),Z=(0,d.Fc)(me,s,H)||Z,Z=(0,d.oS)(ve,n.disablePageShowEvents,H)||Z})),T[ee](n,e.core,e)}catch(t){throw e.setInitialized(!1),t}},function(){return{theConfig:n,core:i,extensions:o}})},e.processTelemetry=function(t,r){(0,c.u9)(t,e[qe]),r=r||e._getTelCtx(r);var n=t;ie||oe||(ne&&(n[V]=ne),Ie(n,!0),x?Le(2,2):Oe()),e.processNext(n,r)},e.getOfflineSupport=function(){try{var e=T&&T[he]();if(T)return{getUrl:function(){return e?e.url:null},serialize:ge,batch:s,shouldProcess:function(e){return!ie},createPayload:function(e){return null},createOneDSPayload:function(e){if(T[pe])return T[pe](e,D)}}}catch(e){}return null},e._doTeardown=function(e,t){Le(2,2),oe=!0,T.teardown(),a(),Me()},e.setEventQueueLimits=function(e,t){r[Fe]=A=(0,c.ei)(e)?e:vt,r[He]=k=(0,c.ei)(t)?t:0,dt();var n=ue>e;if(!n&&P>0)for(var i=1;!n&&i<=3;i++){var o=_[i];o&&o[we]&&(0,u.Iuo)(o[we],function(e){e&&e[K]()>=P&&(n=!0)})}Ke(!0,n)},e.pause=function(){xe(),se=!0,T&&T.pause()},e[Te]=function(){se=!1,T&&T[Te](),Oe()},e._loadTransmitProfiles=function(e){xe(),et(),fe=n,Oe(),(0,u.zav)(e,function(e,t){var r=t[j];if(r>=2){var n=r>2?t[2]:0;if(t[Y](0,r-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var i=t[0]/t[1];t[0]=Math.ceil(i)*t[1]}n>=0&&t[1]>=0&&n>t[1]&&(n=t[1]),t[W](n),le[e]=t}})},e.flush=function(e,t,r){var n;if(void 0===e&&(e=!0),!se)if(r=r||1,e)t||(n=(0,w.Qo)(function(e){t=e})),null==y?(xe(),Ye(1,0,r),y=Ne(function(){y=null,Qe(t,r)},0)):ae[W](t);else{var i=xe();ke(1,1,r),t&&t(),i&&Oe()}return n},e.setMsaAuthTicket=function(e){T[Ae](M,e)},e.setAuthPluginHeader=function(e){T[Ae](N,e)},e.removeAuthPluginHeader=function(){T.removeHeader(N)},e.hasEvents=Re,e._setTransmitProfile=function(e){fe!==e&&void 0!==le[e]&&(xe(),fe=e,Oe())},(0,g.o$)(e,function(){return T},["addResponseHandler"]),e[Ue]=function(){E<4&&(E++,xe(),Oe())},e._clearBackOff=function(){E&&(E=0,xe(),Oe())}}),a}return(0,a.qU)(t,e),t.__ieDyn=1,t}(y.s)},8928:e=>{var t=1/0,r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s=Object.prototype.toString;function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return"number"==typeof e&&e==function(e){var u=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return NaN;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var u=i.test(e);return u||o.test(e)?a(e.slice(2),u?2:8):n.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),l=u%1;return u==u?l?u-l:u:0}(e)}},8948:(e,t,r)=>{var n=r(2861).Buffer,i=r(2203);function o(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=n.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=n.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}r(9023).inherits(o,i),o.prototype.write=function(e){this.buffer=n.concat([this.buffer,n.from(e)]),this.emit("data",e)},o.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},e.exports=o},8969:(e,t,r)=>{"use strict";r.d(t,{d:()=>c,w:()=>u});var n,i,o=r(269),a=r(6182),s=r(3775);function c(e,t){n=e,i=t}function u(){var e=[];return{run:function(t){var r=e;e=[],(0,o.Iuo)(r,function(e){try{(e.rm||e.remove).call(e)}catch(e){(0,s.ZP)(t,2,73,"Unloading:"+(0,o.mmD)(e))}}),n&&r[a.oI]>n&&(i?i("doUnload",r):(0,s.ZP)(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))},add:function(t){t&&((0,o.Yny)(e,t),n&&e[a.oI]>n&&(i?i("Add",e):(0,s.ZP)(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}}}},8980:(e,t,r)=>{var n=r(1741),i=function(e,t){n.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};(i.prototype=Object.create(n.prototype)).constructor=i,e.exports=i},9001:e=>{var t,r,n=Function.prototype,i=Object.prototype,o=n.toString,a=i.hasOwnProperty,s=o.call(Object),c=i.toString,u=(t=Object.getPrototypeOf,r=Object,function(e){return t(r(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=c.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=u(e);if(null===t)return!0;var r=a.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&o.call(r)==s}},9008:(e,t)=>{t.setPassword=()=>Promise.resolve(),t.getPassword=()=>Promise.resolve(),t.deletePassword=()=>Promise.resolve()},9023:e=>{"use strict";e.exports=require("util")},9147:(e,t,r)=>{"use strict";r.d(t,{Dy:()=>c,Hf:()=>d,If:()=>f,QA:()=>u,V9:()=>l,hF:()=>h,nM:()=>o});var n=r(269),i=r(6182),o=(0,n.eCG)("[[ai_dynCfg_1]]"),a=(0,n.eCG)("[[ai_blkDynCfg_1]]"),s=(0,n.eCG)("[[ai_frcDynCfg_1]]");function c(e){var t;return e&&((0,n.cyL)(e)?(t=[])[i.oI]=e[i.oI]:(0,n.QdQ)(e)&&(t={}),t)?((0,n.zav)(e,function(e,r){t[e]=c(r)}),t):e}function u(e){if(e){var t=e[o]||e;if(t.cfg&&(t.cfg===e||t.cfg[o]===t))return t}return null}function l(e){if(e&&((0,n.QdQ)(e)||(0,n.cyL)(e)))try{e[a]=!0}catch(e){}return e}function d(e){if(e)try{e[s]=!0}catch(e){}return e}function h(e,t,r){var i=!1;return r&&!e[t.blkVal]&&((i=r[s])||r[a]||(i=(0,n.QdQ)(r)||(0,n.cyL)(r))),i}function f(e){(0,n.zkd)("InvalidAccess:"+e)}},9354:(e,t,r)=>{"use strict";r.d(t,{Gz:()=>l,M0:()=>f,PS:()=>h,cM:()=>c,k6:()=>d,wX:()=>u});var n=r(269),i=r(5130),o=(0,n.YEm)()||{},a=0,s=[null,null,null,null,null];function c(e){var t=a,r=s,n=r[t];return o.createElement?r[t]||(n=r[t]=o.createElement("a")):n={host:h(e,!0)},n.href=e,++t>=r[i.oI]&&(t=0),a=t,n}function u(e){var t,r=c(e);return r&&(t=r.href),t}function l(e){var t,r=c(e);return r&&(t=r[i.Ue]),t}function d(e,t){return e?e.toUpperCase()+" "+t:t}function h(e,t){var r=f(e,t)||"";if(r){var o=r.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=o&&o[i.oI]>3&&(0,n.KgX)(o[2])&&o[2][i.oI]>0)return o[2]+(o[3]||"")}return r}function f(e,t){var r=null;if(e){var o=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(null!=o&&o[i.oI]>2&&(0,n.KgX)(o[2])&&o[2][i.oI]>0&&(r=o[2]||"",t&&o[i.oI]>2)){var a=(o[1]||"")[i.OL](),s=o[3]||"";("http"===a&&":80"===s||"https"===a&&":443"===s)&&(s=""),r+=s}}return r}},9589:(e,t,r)=>{const n=r(9718),i=r(6874),o=r(3908),a=r(1123),s=r(144),c=r(6953),u=r(7414),l=r(3007),d=r(1832),h=r(2938),f=r(6254),p=r(4493),g=r(1729),m=r(560),v=r(9970),y=r(1763),w=r(909),I=r(3927),A=r(4277),C=r(5580),S=r(7059),E=r(4641),b=r(3999),T=r(4089),_=r(5200),k=r(2111),P=r(6170),R=r(3904),O=r(8311),M=r(7638),N=r(7631),D=r(9628),x=r(270),L=r(1261),U=r(3874),q=r(7075),F=r(5571),H=r(5342),B=r(6780),z=r(2525),j=r(5032);e.exports={parse:s,valid:c,clean:u,inc:l,diff:d,major:h,minor:f,patch:p,prerelease:g,compare:m,rcompare:v,compareLoose:y,compareBuild:w,sort:I,rsort:A,gt:C,lt:S,eq:E,neq:b,gte:T,lte:_,cmp:k,coerce:P,Comparator:R,Range:O,satisfies:M,toComparators:N,maxSatisfying:D,minSatisfying:x,minVersion:L,validRange:U,outside:q,gtr:F,ltr:H,intersects:B,simplifyRange:z,subset:j,SemVer:o,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers}},9614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a>o.length-16&&(i.default.randomFillSync(o),a=0),o.slice(a,a+=16)};var n,i=(n=r(6982))&&n.__esModule?n:{default:n};const o=new Uint8Array(256);let a=o.length},9628:(e,t,r)=>{const n=r(3908),i=r(8311);e.exports=(e,t,r)=>{let o=null,a=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(o&&-1!==a.compare(e)||(o=e,a=new n(o,r)))}),o}},9718:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=r(6874),a=r(7272),s=(t=e.exports={}).re=[],c=t.safeRe=[],u=t.src=[],l=t.t={};let d=0;const h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[h,i]],p=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=d++;a(e,i,t),l[e]=i,u[i]=t,s[i]=new RegExp(t,r?"g":void 0),c[i]=new RegExp(n,r?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${h}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?`+`(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},9749:(e,t,r)=>{"use strict";r.d(t,{e:()=>w,a:()=>I});var n,i=r(269),o=r(4276),a=r(6492),s=r(6182),c=r(991),u=r(9147),l=["push","pop","shift","unshift","splice"],d=function(e,t,r,n){e&&e[s.ih](3,108,"".concat(r," [").concat(t,"] failed - ")+(0,i.mmD)(n))};function h(e,t){var r=(0,i.kgX)(e,t);return r&&r.get}function f(e,t,r,n){if(t){var o=h(t,r);o&&o[e.prop]?t[r]=n:function(e,t,r,n){var o={n:r,h:[],trk:function(t){t&&t.fn&&(-1===(0,i.rDm)(o.h,t)&&o.h[s.y5](t),e.trk(t,o))},clr:function(e){var t=(0,i.rDm)(o.h,e);-1!==t&&o.h[s.Ic](t,1)}},c=!0,l=!1;function p(){c&&(l=l||(0,u.hF)(p,e,n),n&&!n[u.nM]&&l&&(n=g(e,n,r,"Converting")),c=!1);var t=e.act;return t&&o.trk(t),n}p[e.prop]={chng:function(){e.add(o)}},(0,i.vF1)(t,o.n,{g:p,s:function(m){if(n!==m){p[e.ro]&&!e.upd&&(0,u.If)("["+r+"] is read-only:"+(0,i.mmD)(t)),c&&(l=l||(0,u.hF)(p,e,n),c=!1);var v=l&&p[e.rf];if(l)if(v){(0,i.zav)(n,function(e){n[e]=m?m[e]:a.HP});try{(0,i.zav)(m,function(t,r){f(e,n,t,r)}),m=n}catch(t){d((e.hdlr||{})[s.Uw],r,"Assigning",t),l=!1}}else n&&n[u.nM]&&(0,i.zav)(n,function(t){var r=h(n,t);if(r){var i=r[e.prop];i&&i.chng()}});if(m!==n){var y=m&&(0,u.hF)(p,e,m);!v&&y&&(m=g(e,m,r,"Converting")),n=m,l=y}e.add(o)}}})}(e,t,r,n)}return t}function p(e,t,r,n){if(t){var i=h(t,r),o=i&&!!i[e.prop],a=n&&n[0],c=n&&n[1],l=n&&n[2];if(!o){if(l)try{(0,u.V9)(t)}catch(t){d((e.hdlr||{})[s.Uw],r,"Blocking",t)}try{f(e,t,r,t[r]),i=h(t,r)}catch(t){d((e.hdlr||{})[s.Uw],r,"State",t)}}a&&(i[e.rf]=a),c&&(i[e.ro]=c),l&&(i[e.blkVal]=!0)}return t}function g(e,t,r,n){try{(0,i.zav)(t,function(r,n){f(e,t,r,n)}),t[u.nM]||((0,i.UxO)(t,u.nM,{get:function(){return e[s.K0]}}),function(e,t,r){(0,i.cyL)(t)&&(0,i.Iuo)(l,function(n){var i=t[n];t[n]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var a=i[s.y9](this,n);return g(e,t,r,"Patching"),a}})}(e,t,r))}catch(t){d((e.hdlr||{})[s.Uw],r,n,t)}return t}var m="[[ai_",v="]]";function y(e,t,r){var a,l=(0,u.QA)(t);if(l)return l;var h,y=(0,o.Z)("dyncfg",!0),w=t&&!1!==r?t:(0,u.Dy)(t),I=((a={uid:null,cfg:w})[s.Uw]=e,a[s.zs]=function(){h[s.zs]()},a.set=function(t,r,n){try{t=f(h,t,r,n)}catch(t){d(e,r,"Setting value",t)}return t[r]},a[s.h0]=function(e,t){return t&&(0,i.zav)(t,function(t,r){(0,c.q)(I,e,t,r)}),e},a[s.x6]=function(e){return function(e,t){var r={fn:t,rm:function(){r.fn=null,e=null,t=null}};return(0,i.vF1)(r,"toJSON",{v:function(){return"WatcherHandler"+(r.fn?"":"[X]")}}),e.use(r,t),r}(h,e)},a.ref=function(e,t){var r;return p(h,e,t,(r={},r[0]=!0,r))[t]},a[s.XW]=function(e,t){var r;return p(h,e,t,(r={},r[1]=!0,r))[t]},a[s.JQ]=function(e,t){var r;return p(h,e,t,(r={},r[2]=!0,r))[t]},a._block=function(e,t){h.use(null,function(r){var n=h.upd;try{(0,i.b07)(t)||(h.upd=t),e(r)}finally{h.upd=n}})},a);return(0,i.vF1)(I,"uid",{c:!1,e:!1,w:!1,v:y}),g(h=function(e){var t,r,o=(0,i.jjc)(m+"get"+e.uid+v),a=(0,i.jjc)(m+"ro"+e.uid+v),c=(0,i.jjc)(m+"rf"+e.uid+v),u=(0,i.jjc)(m+"blkVal"+e.uid+v),l=(0,i.jjc)(m+"dtl"+e.uid+v),d=null,h=null;function f(t,n){var o=r.act;try{r.act=t,t&&t[l]&&((0,i.Iuo)(t[l],function(e){e.clr(t)}),t[l]=[]),n({cfg:e.cfg,set:e.set.bind(e),setDf:e[s.h0].bind(e),ref:e.ref.bind(e),rdOnly:e[s.XW].bind(e)})}catch(t){var a=e[s.Uw];throw a&&a[s.ih](1,107,(0,i.mmD)(t)),t}finally{r.act=o||null}}function p(){if(d){var e=d;d=null,h&&h[s._w](),h=null;var t=[];if((0,i.Iuo)(e,function(e){if(e&&(e[l]&&((0,i.Iuo)(e[l],function(t){t.clr(e)}),e[l]=null),e.fn))try{f(e,e.fn)}catch(e){t[s.y5](e)}}),d)try{p()}catch(e){t[s.y5](e)}t[s.oI]>0&&function(e,t){n||(n=(0,i.aqQ)("AggregationError",function(e,t){t[s.oI]>1&&(e.errors=t[1])}));var r="Watcher error(s): ";throw(0,i.Iuo)(t,function(e,t){r+="\n".concat(t," > ").concat((0,i.mmD)(e))}),new n(r,t||[])}(0,t)}}return(t={prop:o,ro:a,rf:c})[s.JQ]=u,t[s.K0]=e,t.add=function(e){if(e&&e.h[s.oI]>0){d||(d=[]),h||(h=(0,i.dRz)(function(){h=null,p()},0));for(var t=0;t<e.h[s.oI];t++){var r=e.h[t];r&&-1===(0,i.rDm)(d,r)&&d[s.y5](r)}}},t[s.zs]=p,t.use=f,t.trk=function(e,t){if(e){var r=e[l]=e[l]||[];-1===(0,i.rDm)(r,t)&&r[s.y5](t)}},r=t}(I),w,"config","Creating"),I}function w(e,t,r,n){var i=y(r,e||{},n);return t&&i[s.h0](i.cfg,t),i}function I(e,t,r){var n=e[u.nM]||e;return!n.cfg||n.cfg!==e&&n.cfg[u.nM]!==n?(function(e,t){e?(e[s.on](t),e[s.ih](2,108,t)):(0,u.If)(t)}(r,a.xW+(0,i.mmD)(e)),w(e,null,r)[s.x6](t)):n[s.x6](t)}},9762:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});var n=(0,r(4282).H)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})},9882:(e,t,r)=>{"use strict";r.d(t,{aq:()=>a,cL:()=>s});var n=r(269),i=r(6492),o=r(6535);function a(){var e=s();return(0,n.P0f)(e,0,8)+"-"+(0,n.P0f)(e,8,12)+"-"+(0,n.P0f)(e,12,16)+"-"+(0,n.P0f)(e,16,20)+"-"+(0,n.P0f)(e,20)}function s(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r=i.m5,a=0;a<4;a++)r+=t[15&(e=(0,o.VN)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var s=t[8+(3&(0,o.VN)())|0];return(0,n.hKY)(r,0,8)+(0,n.hKY)(r,9,4)+"4"+(0,n.hKY)(r,13,3)+s+(0,n.hKY)(r,16,3)+(0,n.hKY)(r,19,12)}},9896:e=>{"use strict";e.exports=require("fs")},9917:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sequencer=t.CachedPublicClientApplication=void 0;const n=r(20),i=r(3826),o=r(1398),a=r(2038),s=r(6195),c=r(8060);class u{_clientId;_secretStorage;_accountAccess;_logger;_pca;_accounts=[];_sequencer=new l;_disposable;_secretStorageCachePlugin;isBrokerAvailable=!1;_onDidAccountsChangeEmitter=new o.EventEmitter;onDidAccountsChange=this._onDidAccountsChangeEmitter.event;_onDidRemoveLastAccountEmitter=new o.EventEmitter;onDidRemoveLastAccount=this._onDidRemoveLastAccountEmitter.event;constructor(e,t,r,a,u){this._clientId=e,this._secretStorage=t,this._accountAccess=r,this._logger=a,this._secretStorageCachePlugin=new s.SecretStorageCachePlugin(this._secretStorage,`pca:${this._clientId}`);const l=new c.MsalLoggerOptions(a,u);let d;if(o.env.uiKind===o.UIKind.Web)this._logger.info(`[${this._clientId}] Native Broker is not available in web UI`);else if("msal-no-broker"===o.workspace.getConfiguration("microsoft-authentication").get("implementation"))this._logger.info(`[${this._clientId}] Native Broker disabled via settings`);else{const e=new i.NativeBrokerPlugin;this.isBrokerAvailable=e.isBrokerAvailable,this._logger.info(`[${this._clientId}] Native Broker enabled: ${this.isBrokerAvailable}`),this.isBrokerAvailable&&(d={nativeBrokerPlugin:e})}this._pca=new n.PublicClientApplication({auth:{clientId:e},system:{loggerOptions:{correlationId:e,loggerCallback:(e,t,r)=>l.loggerCallback(e,t,r),logLevel:n.LogLevel.Trace,piiLoggingEnabled:!0}},broker:d,cache:{cachePlugin:this._secretStorageCachePlugin}}),this._disposable=o.Disposable.from(this._registerOnSecretStorageChanged(),this._onDidAccountsChangeEmitter,this._onDidRemoveLastAccountEmitter,this._secretStorageCachePlugin)}get accounts(){return this._accounts}get clientId(){return this._clientId}static async create(e,t,r,n,i){const o=new u(e,t,r,n,i);return await o.initialize(),o}async initialize(){await this._sequencer.queue(()=>this._update())}dispose(){this._disposable.dispose()}async acquireTokenSilent(e){this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] starting...`);let t=await this._sequencer.queue(()=>this._pca.acquireTokenSilent(e));this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] got result`);const r=t.idTokenClaims.exp;if(r){if(new Date(1e3*(r-300))<new Date){this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] id token is expired or about to expire. Forcing refresh...`);const r=this.isBrokerAvailable?{...e,claims:e.claims??'{ "id_token": {}}'}:{...e,forceRefresh:!0};t=await this._sequencer.queue(()=>this._pca.acquireTokenSilent(r)),this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] got forced result`)}const n=t.idTokenClaims.exp;if(n&&new Date(1e3*(n-300))<new Date&&(this._logger.error(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] id token is still expired.`),this.isBrokerAvailable)){this._logger.error(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] forcing refresh with different claims...`);const r={...e,claims:e.claims??'{ "access_token": {}}'};t=await this._sequencer.queue(()=>this._pca.acquireTokenSilent(r)),this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] got forced result with different claims`);const n=t.idTokenClaims.exp;n&&new Date(1e3*(n-300))<new Date&&this._logger.error(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] id token is still expired.`)}}return t.account?!t.fromCache&&this._verifyIfUsingBroker(t)&&(this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] firing event due to change`),this._onDidAccountsChangeEmitter.fire({added:[],changed:[t.account],deleted:[]})):this._logger.error(`[acquireTokenSilent] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}] [${e.account.username}] no account found in result`),t}async acquireTokenInteractive(e){return this._logger.debug(`[acquireTokenInteractive] [${this._clientId}] [${e.authority}] [${e.scopes?.join(" ")}] loopbackClientOverride: ${e.loopbackClient?"true":"false"}`),await o.window.withProgress({location:o.ProgressLocation.Notification,cancellable:!0,title:o.l10n.t("Signing in to Microsoft...")},(t,r)=>this._sequencer.queue(async()=>{try{const t=await(0,a.raceCancellationAndTimeoutError)(this._pca.acquireTokenInteractive(e),r,3e5);return this.isBrokerAvailable&&await this._accountAccess.setAllowedAccess(t.account,!0),await this._update(),t}catch(t){throw this._logger.error(`[acquireTokenInteractive] [${this._clientId}] [${e.authority}] [${e.scopes?.join(" ")}] error: ${t}`),t}}))}async acquireTokenByRefreshToken(e){this._logger.debug(`[acquireTokenByRefreshToken] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}]`);const t=await this._sequencer.queue(async()=>{const t=await this._pca.acquireTokenByRefreshToken(e);return await this._update(),t});return t&&this.isBrokerAvailable&&t.account&&await this._accountAccess.setAllowedAccess(t.account,!0),t}async acquireTokenByDeviceCode(e){this._logger.debug(`[acquireTokenByDeviceCode] [${this._clientId}] [${e.authority}] [${e.scopes.join(" ")}]`);const t=await this._sequencer.queue(async()=>{const t=new a.DeferredPromise,r=await Promise.race([this._pca.acquireTokenByDeviceCode({...e,deviceCodeCallback:e=>{this._deviceCodeCallback(e,t)}}),t.p]);return await t.complete(r),await this._update(),r});return t&&this.isBrokerAvailable&&t.account&&await this._accountAccess.setAllowedAccess(t.account,!0),t}async _deviceCodeCallback(e,t){const r=o.l10n.t("Copy & Continue to Microsoft");if(await o.window.showInformationMessage(o.l10n.t({message:"Your Code: {0}",args:[e.userCode],comment:["The {0} will be a code, e.g. 123-456"]}),{modal:!0,detail:o.l10n.t("To finish authenticating, navigate to Microsoft and paste in the above one-time code.")},r)!==r)return this._logger.debug(`[deviceCodeCallback] [${this._clientId}] User cancelled the device code flow.`),void t.cancel();await o.env.clipboard.writeText(e.userCode),await o.env.openExternal(o.Uri.parse(e.verificationUri)),await o.window.withProgress({location:o.ProgressLocation.Notification,cancellable:!0,title:o.l10n.t({message:"Open [{0}]({0}) in a new tab and paste your one-time code: {1}",args:[e.verificationUri,e.userCode],comment:["The [{0}]({0}) will be a url and the {1} will be a code, e.g. 123456",'{Locked="[{0}]({0})"}']})},async(e,r)=>{const n=r.onCancellationRequested(()=>{this._logger.debug(`[deviceCodeCallback] [${this._clientId}] Device code flow cancelled by user.`),t.cancel()});try{await t.p,this._logger.debug(`[deviceCodeCallback] [${this._clientId}] Device code flow completed successfully.`)}catch(e){}finally{n.dispose()}})}removeAccount(e){return this.isBrokerAvailable?this._accountAccess.setAllowedAccess(e,!1):this._sequencer.queue(()=>this._pca.getTokenCache().removeAccount(e))}_registerOnSecretStorageChanged(){return this.isBrokerAvailable?this._accountAccess.onDidAccountAccessChange(()=>this._sequencer.queue(()=>this._update())):this._secretStorageCachePlugin.onDidChange(()=>this._sequencer.queue(()=>this._update()))}_lastSeen=new Map;_verifyIfUsingBroker(e){if(!e.fromNativeBroker)return!0;let t=e.account.nativeAccountId;t||(this._logger.error(`[verifyIfUsingBroker] [${this._clientId}] [${e.account.username}] no nativeAccountId found. Using homeAccountId instead.`),t=e.account.homeAccountId);const r=this._lastSeen.get(t),n=e.account.idTokenClaims.iat;return r?r!==n&&(this._lastSeen.set(t,n),!0):(this._lastSeen.set(t,n),!0)}async _update(){const e=this._accounts;this._logger.debug(`[update] [${this._clientId}] CachedPublicClientApplication update before: ${e.length}`),this._pca.clearCache();let t=await this._pca.getAllAccounts();this.isBrokerAvailable&&(t=t.filter(e=>this._accountAccess.isAllowedAccess(e))),this._accounts=t,this._logger.debug(`[update] [${this._clientId}] CachedPublicClientApplication update after: ${t.length}`);const r=new Set(e.map(e=>e.homeAccountId)),n=new Set(t.map(e=>e.homeAccountId)),i=t.filter(e=>!r.has(e.homeAccountId)),o=e.filter(e=>!n.has(e.homeAccountId));(i.length>0||o.length>0)&&(this._onDidAccountsChangeEmitter.fire({added:i,changed:[],deleted:o}),this._logger.debug(`[update] [${this._clientId}] CachedPublicClientApplication accounts changed. added: ${i.length}, deleted: ${o.length}`),t.length||(this._logger.debug(`[update] [${this._clientId}] CachedPublicClientApplication final account deleted. Firing event.`),this._onDidRemoveLastAccountEmitter.fire())),this._logger.debug(`[update] [${this._clientId}] CachedPublicClientApplication update complete`)}}t.CachedPublicClientApplication=u;class l{current=Promise.resolve(null);queue(e){return this.current=this.current.then(()=>e(),()=>e())}}t.Sequencer=l},9970:(e,t,r)=>{const n=r(560);e.exports=(e,t,r)=>n(t,e,r)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n=r(7015),i=exports;for(var o in n)i[o]=n[o];n.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/994fd12f8d3a5aa16f17d42c041e5809167e845a/extensions/microsoft-authentication/dist/extension.js.map